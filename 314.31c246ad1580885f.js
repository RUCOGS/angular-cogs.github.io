"use strict";(self.webpackChunkrucogs_website=self.webpackChunkrucogs_website||[]).push([[314],{8340:(I,U,a)=>{a.d(U,{e:()=>c});var s=a(4537),p=a(8692);const v=function(m,i,d,l){return{"dog-ear":m,"full-page":i,shadow:d,"full-width":l}},f=function(m){return{last:m}},C=["*"];let c=(()=>{class m{constructor(d,l,e,h,y,P,T){this.elementRef=d,this.title="",this.color="blank",this.bgImage="",this.bgRepeatMode="",this.bgPosition="",this.last=null!=l,this.dogEar=null!=e,this.fullPage=null!=h,this.fullWidth=null!=y,this.shadow=null!=P,this.bottomGradient=null!=T}ngOnInit(){this.last=this.elementRef.nativeElement.hasAttribute("last"),this.dogEar=this.elementRef.nativeElement.hasAttribute("dog-ear"),this.fullPage=this.elementRef.nativeElement.hasAttribute("full-page"),this.fullWidth=this.elementRef.nativeElement.hasAttribute("full-width"),this.shadow=this.elementRef.nativeElement.hasAttribute("shadow")}getBgStyle(){return{...this.bgImage&&{"background-image":"linear-gradient(var(--background-color), #00000000"+(this.bottomGradient?", var(--background-color)":"")+"), url("+this.bgImage+")"},...""!==this.bgRepeatMode&&{"background-repeat":this.bgRepeatMode,"background-size":"auto"},...""!==this.bgPosition&&{"background-position":this.bgPosition}}}}return m.\u0275fac=function(d){return new(d||m)(s.Y36(s.SBq),s.$8M("last"),s.$8M("dog-ear"),s.$8M("full-page"),s.$8M("full-width"),s.$8M("shadow"),s.$8M("bottom-gradient"))},m.\u0275cmp=s.Xpm({type:m,selectors:[["app-section"]],inputs:{title:"title",color:"color",bgImage:"bgImage",bgRepeatMode:"bgRepeatMode",bgPosition:"bgPosition"},ngContentSelectors:C,decls:6,vars:18,consts:[[3,"ngClass","ngStyle"],[1,"content"],[1,"mat-display-2","app-section","mb-16",3,"hidden"],[3,"ngClass"]],template:function(d,l){1&d&&(s.F$t(),s.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),s._uU(3),s.qZA(),s.Hsn(4),s.qZA()(),s._UZ(5,"div",3)),2&d&&(s.Gre("app-section bg main-bg ",l.color,""),s.Q6J("ngClass",s.l5B(11,v,l.dogEar,l.fullPage,l.shadow,l.fullWidth))("ngStyle",l.getBgStyle()),s.xp6(2),s.Q6J("hidden",""===l.title),s.xp6(1),s.Oqu(l.title),s.xp6(2),s.Gre("app-section bg bottom ",l.color,""),s.Q6J("ngClass",s.VKq(16,f,l.last)))},dependencies:[p.mk,p.PC],styles:["[_nghost-%COMP%]{display:block;overflow:hidden}.main-bg[_ngcontent-%COMP%]{height:100%;position:relative;display:flex;align-items:center;box-sizing:border-box;padding:var(--content-padding);padding-top:var(--dog-ear-padding);padding-bottom:var(--dog-ear-padding);background-size:cover;background-position:center}.dog-ear[_ngcontent-%COMP%]{border-top-left-radius:var(--dog-ear)}.full-page[_ngcontent-%COMP%]{min-height:100vh}.main-bg.full-width[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.main-bg.full-width[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:100%}div.last[_ngcontent-%COMP%]{height:0px}.bottom[_ngcontent-%COMP%]{position:absolute;height:128px;width:100%}.content[_ngcontent-%COMP%]{margin:auto;max-width:var(--content-width)}"]}),m})()},1805:(I,U,a)=>{a.r(U),a.d(U,{UsersPageComponent:()=>F,UsersPageModule:()=>pe});var s=a(8692),p=a(92),v=a(4536),f=a(8659),C=a(3331),c=a(7406),m=a(2516),i=a(3178),d=a(7950),l=a(3756),e=a(4537);let h=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[s.ez]}),r})();var y=a(335),P=a(7763),T=a(8239),E=a(3037),N=a(3556),M=a(274),A=a(7445),O=a(8340),D=a(9733);function J(r,o){1&r&&e._UZ(0,"app-eboard-term-group",2),2&r&&e.Q6J("group",o.$implicit)}let Q=(()=>{class r extends E.Gh{constructor(){var t;super(...arguments),t=this,this.eBoardTermGroups=[],this.valuesPerPage=6,this._valuesQuery=function(){var n=(0,T.Z)(function*(u,g){const b=yield(0,A.z)(t.backend.withAuth().query({query:M.Ps`
          query DisplayEBoardTerms($limit: Int, $skip: Int, $sorts: [EBoardTermSortInput!]) {
            eBoardTerms(limit: $limit, skip: $skip, sorts: $sorts) {
              eBoard {
                id
                avatarLink
                bio
                user {
                  id
                  avatarLink
                  bannerLink
                  netId
                  classYear
                  bio
                  displayName
                  username
                }
              }
              id
              year
              roles {
                roleCode
              }
            }
          }
        `,variables:{skip:u,limit:g,sorts:[{year:"desc"}]},fetchPolicy:"no-cache"}));return b.error?[]:b.data.eBoardTerms});return function(u,g){return n.apply(this,arguments)}}()}get eBoardTerms(){return this.values}set eBoardTerms(t){this.values=t}get values(){return super.values}set values(t){super.values=t,this.updateEBoardTermGroups()}updateEBoardTermGroups(){this.eBoardTermGroups=[];let t={year:0,terms:[]};for(const n of this.eBoardTerms){if(n.year!==t.year){const u={year:n.year,terms:[]};this.eBoardTermGroups.push(u),t=u}t.terms.push(n)}}getEBoardTermRoles(t){if(!t)return[];const n=t.roles?.map(u=>u?.roleCode);return n?1==n.length?n:n.filter(u=>u!==N.LO.Eboard):[]}}return r.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(r)))(n||r)}}(),r.\u0275cmp=e.Xpm({type:r,selectors:[["app-eboard-tab"]],inputs:{eBoardTerms:"eBoardTerms"},features:[e.qOj],decls:2,vars:1,consts:[["full-width",""],[3,"group",4,"ngFor","ngForOf"],[3,"group"]],template:function(t,n){1&t&&(e.TgZ(0,"app-section",0),e.YNc(1,J,1,1,"app-eboard-term-group",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.eBoardTermGroups))},dependencies:[s.sg,O.e,D.P]}),r})();var $=a(6527),L=a(9424);let w=(()=>{class r{constructor(t,n){this.elementRef=t,this.contentWidth=null!=n,this.contentWidth&&(this.elementRef.nativeElement.style.width="min(100%, var(--content-width))")}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.SBq),e.$8M("mat-tab-content-width"))},r.\u0275dir=e.lG2({type:r,selectors:[["","mat-tab-content-width",""]]}),r})();const G=function(){return{exact:!0}};function q(r,o){if(1&r&&(e.TgZ(0,"a",4,5)(2,"mat-icon"),e._uU(3),e.qZA(),e.TgZ(4,"div",6),e._uU(5),e.qZA()()),2&r){const t=o.$implicit,n=e.MAs(1);e.Q6J("routerLink",t.path)("routerLinkActiveOptions",e.DdM(5,G))("active",n.isActive),e.xp6(3),e.Oqu(t.matIcon),e.xp6(2),e.Oqu(t.label)}}let F=(()=>{class r{constructor(t){this.breakpointManager=t,this.usersTabs=[{matIcon:"person",label:"Members",path:"./"},{matIcon:"assignment_ind",label:"E-Board",path:"./eboard"}]}}return r.\u0275fac=function(t){return new(t||r)(e.Y36($.I))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users-page"]],decls:5,vars:1,consts:[["title","Members"],[1,"background-color-primary",2,"display","flex","flex-direction","row","justify-content","center"],["mat-tab-nav-bar","","color","primary","mat-align-tabs","center","backgroundColor","primary","mat-stretch-tabs","","mat-tab-content-width",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","routerLinkActiveOptions","active",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","routerLinkActiveOptions","active"],["rla","routerLinkActive"],[2,"margin-left","0.5em"]],template:function(t,n){1&t&&(e._UZ(0,"app-page-header",0),e.TgZ(1,"div",1)(2,"nav",2),e.YNc(3,q,6,6,"a",3),e.qZA()(),e._UZ(4,"router-outlet")),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.usersTabs))},dependencies:[i.lC,i.yS,i.Od,s.sg,L.q,C.Hw,m.BU,m.Nj,w],styles:[".users-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;margin-top:2em;margin-bottom:2em}.paginator[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.no-results-text[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}"]}),r})();var R=a(4583),B=a(5208),z=a(831),S=a(2709),Y=a(9638);function H(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Display name is required "),e.qZA())}function j(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Username is required "),e.qZA())}function W(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Username must contain only 0-9, a-z, A-Z, and '_' "),e.qZA())}function V(r,o){1&r&&(e.TgZ(0,"mat-error"),e._uU(1," Email must be formatted like: example@mail.com "),e.qZA())}let X=(()=>{class r{constructor(t,n,u,g){this.uiMessage=n,this.backend=u,this.dialogRef=g,this.monitor=new R.y,this.form=t.group({username:[null,[p.kI.required,p.kI.pattern(/^[a-zA-Z0-9_]*$/)]],displayName:[null,p.kI.required],email:[null,[p.kI.email]]}),g.disableClose=!0}ngOnInit(){}exit(t=!1,n={}){this.monitor.isProcessing||this.dialogRef.close({success:t,user:n})}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing some info!");return!0}catch(t){return this.uiMessage.error(t),!1}}save(){var t=this;return(0,T.Z)(function*(){if(t.monitor.isProcessing||!t.validate())return;const n={username:t.form.get("username")?.value};if(t.form.get("displayName")?.value&&(n.displayName=t.form.get("displayName")?.value),t.form.get("email")?.value&&(n.email=t.form.get("email")?.value),Object.keys(n).length>1){t.monitor.addProcess();const u=yield(0,A.z)(t.backend.withAuth().mutate({mutation:M.Ps`
            mutation CreateUserDialog($input: NewUserInput!) {
              newUser(input: $input)
            }
          `,variables:{input:n}}));if(t.monitor.removeProcess(),u.errors)return void t.uiMessage.error("Error uploading data!");t.uiMessage.notifyConfirmed("User created!"),t.exit(!0,{id:u.data?.newUser,...n})}})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.qu),e.Y36(B.S),e.Y36(z.v),e.Y36(v.so))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-user-dialog"]],decls:27,vars:11,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","displayName",3,"maxLength"],["align","end"],[4,"ngIf"],["matInput","","formControlName","username",3,"maxLength"],["matInput","","formControlName","email"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Display Name"),e.qZA(),e._UZ(5,"input",2),e.TgZ(6,"mat-hint",3),e._uU(7),e.qZA(),e.YNc(8,H,2,0,"mat-error",4),e.qZA(),e.TgZ(9,"mat-form-field",1)(10,"mat-label"),e._uU(11,"Username"),e.qZA(),e._UZ(12,"input",5),e.TgZ(13,"mat-hint",3),e._uU(14),e.qZA(),e.YNc(15,j,2,0,"mat-error",4),e.YNc(16,W,2,0,"mat-error",4),e.qZA(),e.TgZ(17,"mat-form-field",1)(18,"mat-label"),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",6),e.YNc(21,V,2,0,"mat-error",4),e.qZA()()(),e.TgZ(22,"mat-dialog-actions")(23,"button",7),e.NdJ("click",function(){return n.exit()}),e._uU(24,"Exit "),e.qZA(),e.TgZ(25,"button",7),e.NdJ("click",function(){return n.save()}),e._uU(26,"Save "),e.qZA()()),2&t){let u,g,b,x,Z,_;e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("maxLength",50),e.xp6(2),e.hij("",(null==(u=n.form.get("displayName"))||null==u.value?null:u.value.length)||0,"/50"),e.xp6(1),e.Q6J("ngIf",null==(g=n.form.get("displayName"))?null:g.hasError("required")),e.xp6(4),e.Q6J("maxLength",20),e.xp6(2),e.hij("",(null==(b=n.form.get("username"))||null==b.value?null:b.value.length)||0,"/20"),e.xp6(1),e.Q6J("ngIf",null==(x=n.form.get("username"))?null:x.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(Z=n.form.get("username"))?null:Z.hasError("pattern")),e.xp6(5),e.Q6J("ngIf",null==(_=n.form.get("email"))?null:_.hasError("email")),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing)}},dependencies:[s.O5,S.v,Y.lW,f.TO,f.KE,f.bx,f.hX,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,c.Nt,v.xY,v.H8]}),r})();var K=a(1241),ee=a(3535),te=a(1379),re=a(5705);function ne(r,o){1&r&&e._UZ(0,"app-basic-profile",2),2&r&&e.Q6J("user",o.$implicit)}const se=["*"];let oe=(()=>{class r{constructor(){this.users=[]}ngOnInit(){}getUserLink(t){return t.username?`/members/${t.username}`:""}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-profile-grid"]],inputs:{users:"users"},ngContentSelectors:se,decls:3,vars:1,consts:[[1,"app-profile-grid","grid"],[3,"user",4,"ngFor","ngForOf"],[3,"user"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,ne,1,1,"app-basic-profile",1),e.Hsn(2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.users))},dependencies:[s.sg,re.u],styles:[".grid[_ngcontent-%COMP%]{display:grid;align-items:stretch;gap:2em;justify-content:center;width:100%}"]}),r})();function ae(r,o){1&r&&(e.TgZ(0,"div")(1,"div",10),e._UZ(2,"div",11),e.TgZ(3,"div",12),e._uU(4,"_ _ _ "),e.qZA(),e.TgZ(5,"div",12),e._uU(6,"_ _ _ "),e.qZA()()())}const ie=function(){return[]};function le(r,o){if(1&r&&(e.TgZ(0,"app-profile-grid"),e.YNc(1,ae,7,0,"div",9),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.DdM(1,ie).constructor(t.valuesPerPage))}}function ue(r,o){1&r&&(e.TgZ(0,"div")(1,"h2",13),e._uU(2,"No results found..."),e.qZA()())}let me=(()=>{class r extends E.N3{constructor(){var t;super(...arguments),t=this,this.valuesPerPage=18,this._filteredValuesQuery=function(){var n=(0,T.Z)(function*(u,g,b){const Z=t.filterHeader?.sortAscending?"asc":"desc",_=t.filterHeader?.sortingMode??"classYear",k=yield(0,A.z)(t.backend.withAuth().query({query:M.Ps`
          query DisplayUsers($filter: UserFilterInput, $limit: Int, $skip: Int, $sorts: [UserSortInput!]) {
            users(filter: $filter, limit: $limit, skip: $skip, sorts: $sorts) {
              avatarLink
              bannerLink
              netId
              classYear
              bio
              displayName
              username
            }
          }
        `,variables:{skip:g,limit:b,filter:u,sorts:[{..."name"===_&&{displayName:Z},..."username"===_&&{username:Z},..."classYear"===_&&{classYear:Z}}]},fetchPolicy:"no-cache"}));return k.error?[]:k.data.users});return function(u,g,b){return n.apply(this,arguments)}}()}get users(){return this.values}set users(t){this.values=t}get usersQuery(){return this.filteredValuesQuery}set usersQuery(t){this.filteredValuesQuery=t}getFilter(){return this.filterHeader?{...this.filterHeader.searchText&&{or_:[{username:{startsWith:this.filterHeader.searchText,mode:"INSENSITIVE"}},{displayName:{startsWith:this.filterHeader.searchText,mode:"INSENSITIVE"}}]}}:{}}}return r.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(r)))(n||r)}}(),r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users-display"]],inputs:{users:"users",usersQuery:"usersQuery"},features:[e.qOj],decls:13,vars:4,consts:[["searchBar","","filterOptions","","ascendingToggle","true","sortingMode","classYear",3,"sortAscending"],["value","classYear"],["value","username"],["value","name"],[1,"app-users-display","users-container"],["usersContainer",""],[3,"users"],[4,"ngIf"],[2,"display","flex"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","column","gap","0.5em"],[1,"loading",2,"height","8em","width","8em","border-radius","50%"],[1,"loading",2,"width","8em"],[1,"text-disabled"]],template:function(t,n){1&t&&(e.TgZ(0,"app-filter-header",0)(1,"mat-option",1),e._uU(2,"Class Year"),e.qZA(),e.TgZ(3,"mat-option",2),e._uU(4,"Username"),e.qZA(),e.TgZ(5,"mat-option",3),e._uU(6,"Name"),e.qZA()(),e.TgZ(7,"div",4,5),e._UZ(9,"app-profile-grid",6),e.YNc(10,le,2,2,"app-profile-grid",7),e._UZ(11,"div",8),e.YNc(12,ue,3,0,"div",7),e.qZA()),2&t&&(e.Q6J("sortAscending",!1),e.xp6(9),e.Q6J("users",n.users),e.xp6(1),e.Q6J("ngIf",!n.loaded),e.xp6(2),e.Q6J("ngIf",n.loaded&&0===n.users.length))},dependencies:[s.sg,s.O5,ee.B,te.ey,oe]}),r})();function de(r,o){if(1&r){const t=e.EpF();e.TgZ(0,"div",2)(1,"button",3),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.onCreateUser())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA(),e._uU(4," Create Member "),e.qZA()()}}const ce=[{path:"",component:F,children:[{path:"",component:(()=>{class r{constructor(t,n,u,g){this.security=t,this.uiMessage=n,this.router=u,this.dialog=g,this.canCreateUser=!1}ngOnInit(){var t=this;return(0,T.Z)(function*(){yield t.security.waitUntilReady(),t.canCreateUser=t.security.makePermCalc().hasPermission(N.y3.CreateUser)})()}onCreateUser(){var t=this;return(0,T.Z)(function*(){const n=yield(0,A.z)(t.dialog.open(X,{width:"25em",maxWidth:"90vw"}).afterClosed());!n.success||t.router.navigateByUrl(`/members/${n.user.username}`)})()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(K.I),e.Y36(B.S),e.Y36(i.F0),e.Y36(v.uw))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-users-tab"]],decls:3,vars:1,consts:[["full-width",""],["style","margin-bottom: 1em",4,"ngIf"],[2,"margin-bottom","1em"],["mat-stroked-button","","pill","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-section",0),e.YNc(1,de,5,0,"div",1),e._UZ(2,"app-users-display"),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.canCreateUser))},dependencies:[s.O5,S.v,Y.lW,O.e,me,C.Hw]}),r})(),data:{titleAll:"Members"}},{path:"eboard",component:Q,data:{titleAll:"E-Board"}}]}];let pe=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[i.Bz.forChild(ce),s.ez,P.I,y.z,C.Ps,m.Nh,h,f.lN,p.UX,c.c,v.Is,d.c,l.v]}),r})()},3512:(I,U,a)=>{a.d(U,{I:()=>C});var s=function(c){return parseFloat(c)},v=a(4537);const f=function p(c){return function(m,i,d,l){null==d&&(d=c),null==l&&(l=d);var e=String(m).match(/[\d.\-\+]*\s*(.*)/)[1]||"";if(e===i)return m;var h=s(m);if("px"!==e)if("em"===e)h=s(m)*s(d);else if("rem"===e)h=s(m)*s(c);else{if("ex"!==e)return m;h=s(m)*s(d)*2}var y=h;if("px"!==i)if("em"===i)y=h/s(l);else if("rem"===i)y=h/s(c);else{if("ex"!==i)return m;y=h/s(l)/2}return parseFloat(y.toFixed(5))+i}}("16px");let C=(()=>{class c{constructor(){}convert(i,d,l=""){return l?f(i,d,l):f(i,d)}toNumber(i){return parseInt(i.replace(/[^0-9.]/g,""))}convertToNumber(i,d,l=""){return this.toNumber(l?f(i,d,l):f(i,d))}}return c.\u0275fac=function(i){return new(i||c)},c.\u0275prov=v.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);