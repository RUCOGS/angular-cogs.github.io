"use strict";(self.webpackChunkrucogs_website=self.webpackChunkrucogs_website||[]).push([[642],{5499:(Q,B,a)=>{a.r(B),a.d(B,{UsersPageComponent:()=>F,UsersPageModule:()=>be});var i=a(8692),m=a(92),y=a(4536),g=a(8659),b=a(3331),u=a(7406),p=a(2516),l=a(3178),c=a(7950),d=a(6438),T=a(5491),v=a(6883),U=a(335),e=a(4537),I=a(3556),L=a(6440),D=a(398),S=a(3223),$=a(1090);const G=function(){return{}};let k=(()=>{class t{constructor(r){this.cdn=r,this.term={}}ngOnInit(){}getEBoardTermRoles(r){if(!r)return[];const n=r.roles?.map(s=>s?.roleCode);return n?1==n.length?n:n.filter(s=>s!==I.LO.Eboard):[]}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(L.U))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-eboard-term-profile"]],inputs:{term:"term"},decls:10,vars:8,consts:[["trigger","click",3,"user"],[1,"eboard-term-profile","container",2,"display","flex","flex-direction","column","align-items","center"],[2,"position","relative","width","min-content","margin-bottom","0.5em"],["size","large",3,"avatarSrc"],["size","small",2,"position","absolute","bottom","0em","right","0em",3,"avatarSrc"],[2,"margin-bottom","0"],[1,"text-faded",2,"text-overflow","ellipsis","overflow","hidden","margin-bottom","0.5em"],[3,"roles","center"]],template:function(r,n){if(1&r&&(e.TgZ(0,"app-profile-overlay",0)(1,"div",1)(2,"div",2),e._UZ(3,"app-avatar",3)(4,"app-avatar",4),e.qZA(),e.TgZ(5,"h2",5),e._uU(6),e.qZA(),e.TgZ(7,"p",6),e._uU(8),e.qZA(),e._UZ(9,"app-roles-display",7),e.qZA()()),2&r){let s;e.Q6J("user",null!==(s=null==n.term||null==n.term.eBoard?null:n.term.eBoard.user)&&void 0!==s?s:e.DdM(7,G)),e.xp6(3),e.Q6J("avatarSrc",n.cdn.getFileLink(null==n.term||null==n.term.eBoard?null:n.term.eBoard.avatarLink)),e.xp6(1),e.Q6J("avatarSrc",n.cdn.getFileLink(null==n.term||null==n.term.eBoard||null==n.term.eBoard.user?null:n.term.eBoard.user.avatarLink)),e.xp6(2),e.Oqu(null==n.term||null==n.term.eBoard||null==n.term.eBoard.user?null:n.term.eBoard.user.displayName),e.xp6(2),e.hij("@",null==n.term||null==n.term.eBoard||null==n.term.eBoard.user?null:n.term.eBoard.user.username,""),e.xp6(1),e.Q6J("roles",n.getEBoardTermRoles(n.term))("center",!0)}},dependencies:[D.l,S.A,$.q],styles:[".container[_ngcontent-%COMP%]{transition:transform .1s ease-out;transform:none;color:inherit;text-decoration:inherit}.container[_ngcontent-%COMP%]:hover{cursor:pointer;transform:scale(1.05)}.container[_ngcontent-%COMP%]:active{transform:scale(1.025)}"]}),t})();function q(t,o){if(1&t&&(e.TgZ(0,"div",4),e._UZ(1,"app-eboard-term-profile",5),e.qZA()),2&t){const r=o.$implicit;e.xp6(1),e.Q6J("term",r)}}let z=(()=>{class t{constructor(){this.group={year:0,terms:[]}}ngOnInit(){}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-eboard-term-group"]],inputs:{group:"group"},decls:6,vars:3,consts:[[1,"eboard-term-group","container",2,"margin-bottom","5em"],[2,"margin-bottom","1em"],[1,"eboard-term-group","profile-container",2,"width","100%","display","grid","align-items","stretch","gap","1em","justify-content","center","width","100%"],["style","\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n    ",4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","column","align-items","center"],[3,"term"]],template:function(r,n){1&r&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2),e.qZA(),e._UZ(3,"mat-divider",1),e.TgZ(4,"div",2),e.YNc(5,q,2,1,"div",3),e.qZA()()),2&r&&(e.xp6(2),e.AsE("",n.group.year," - ",n.group.year+1,""),e.xp6(3),e.Q6J("ngForOf",n.group.terms))},dependencies:[i.sg,d.d,k]}),t})(),j=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[i.ez,v.U,T.F,U.z,d.t]}),t})(),w=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[i.ez]}),t})();var H=a(7763),A=a(8239),_=a(3037),E=a(274),x=a(7445),P=a(8340);function X(t,o){1&t&&e._UZ(0,"app-eboard-term-group",2),2&t&&e.Q6J("group",o.$implicit)}let R=(()=>{class t extends _.Gh{constructor(){var r;super(...arguments),r=this,this.eBoardTermGroups=[],this.valuesPerPage=24,this._valuesQuery=function(){var n=(0,A.Z)(function*(s,f){const h=yield(0,x.z)(r.backend.withAuth().query({query:E.Ps`
          query DisplayEBoardTerms($limit: Int, $skip: Int, $sorts: [EBoardTermSortInput!]) {
            eBoardTerms(limit: $limit, skip: $skip, sorts: $sorts) {
              eBoard {
                id
                avatarLink
                bio
                user {
                  id
                  avatarLink
                  bannerLink
                  netId
                  classYear
                  bio
                  displayName
                  username
                }
              }
              id
              year
              roles {
                roleCode
              }
            }
          }
        `,variables:{skip:s,limit:f,sorts:[{year:"desc"}]}}));return h.error?[]:h.data.eBoardTerms});return function(s,f){return n.apply(this,arguments)}}()}get eBoardTerms(){return this.values}set eBoardTerms(r){this.values=r}get values(){return super.values}set values(r){super.values=r,this.updateEBoardTermGroups()}updateEBoardTermGroups(){this.eBoardTermGroups=[];let r={year:0,terms:[]};for(const n of this.eBoardTerms){if(n.year!==r.year){const s={year:n.year,terms:[]};this.eBoardTermGroups.push(s),r=s}r.terms.push(n)}}getEBoardTermRoles(r){if(!r)return[];const n=r.roles?.map(s=>s?.roleCode);return n?1==n.length?n:n.filter(s=>s!==I.LO.Eboard):[]}}return t.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(t)))(n||t)}}(),t.\u0275cmp=e.Xpm({type:t,selectors:[["app-eboard-tab"]],inputs:{eBoardTerms:"eBoardTerms"},features:[e.qOj],decls:2,vars:1,consts:[["full-width",""],[3,"group",4,"ngFor","ngForOf"],[3,"group"]],template:function(r,n){1&r&&(e.TgZ(0,"app-section",0),e.YNc(1,X,1,1,"app-eboard-term-group",1),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngForOf",n.eBoardTermGroups))},dependencies:[i.sg,P.e,z]}),t})();var V=a(6527),W=a(9424);let K=(()=>{class t{constructor(r,n){this.elementRef=r,this.contentWidth=null!=n,this.contentWidth&&(this.elementRef.nativeElement.style.width="min(100%, var(--content-width))")}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(e.SBq),e.$8M("mat-tab-content-width"))},t.\u0275dir=e.lG2({type:t,selectors:[["","mat-tab-content-width",""]]}),t})();const ee=function(){return{exact:!0}};function re(t,o){if(1&t&&(e.TgZ(0,"a",4,5)(2,"mat-icon"),e._uU(3),e.qZA(),e.TgZ(4,"div",6),e._uU(5),e.qZA()()),2&t){const r=o.$implicit,n=e.MAs(1);e.Q6J("routerLink",r.path)("routerLinkActiveOptions",e.DdM(5,ee))("active",n.isActive),e.xp6(3),e.Oqu(r.matIcon),e.xp6(2),e.Oqu(r.label)}}let F=(()=>{class t{constructor(r){this.breakpointManager=r,this.usersTabs=[{matIcon:"person",label:"Members",path:"./"},{matIcon:"assignment_ind",label:"E-Board",path:"./eboard"}]}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(V.I))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-page"]],decls:5,vars:1,consts:[["title","Members"],[1,"background-color-primary",2,"display","flex","flex-direction","row","justify-content","center"],["mat-tab-nav-bar","","color","primary","mat-align-tabs","center","backgroundColor","primary","mat-stretch-tabs","","mat-tab-content-width",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","routerLinkActiveOptions","active",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"routerLink","routerLinkActiveOptions","active"],["rla","routerLinkActive"],[2,"margin-left","0.5em"]],template:function(r,n){1&r&&(e._UZ(0,"app-page-header",0),e.TgZ(1,"div",1)(2,"nav",2),e.YNc(3,re,6,6,"a",3),e.qZA()(),e._UZ(4,"router-outlet")),2&r&&(e.xp6(3),e.Q6J("ngForOf",n.usersTabs))},dependencies:[l.lC,l.yS,l.Od,i.sg,W.q,b.Hw,p.BU,p.Nj,K],styles:[".users-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1em;margin-top:2em;margin-bottom:2em}.paginator[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}.no-results-text[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}"]}),t})();var te=a(4583),M=a(5208),ne=a(7894),O=a(2709),J=a(9638);function oe(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Display name is required "),e.qZA())}function ae(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Username is required "),e.qZA())}function se(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Username must contain only 0-9, a-z, A-Z, and '_' "),e.qZA())}function ie(t,o){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Email must be formatted like: example@mail.com "),e.qZA())}let le=(()=>{class t{constructor(r,n,s,f){this.uiMessage=n,this.backend=s,this.dialogRef=f,this.monitor=new te.y,this.form=r.group({username:[null,[m.kI.required,m.kI.pattern(/^[a-zA-Z0-9_]*$/)]],displayName:[null,m.kI.required],email:[null,[m.kI.email]]}),f.disableClose=!0}ngOnInit(){}exit(r=!1,n={}){this.monitor.isProcessing||this.dialogRef.close({success:r,user:n})}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing some info!");return!0}catch(r){return this.uiMessage.error(r),!1}}save(){var r=this;return(0,A.Z)(function*(){if(r.monitor.isProcessing||!r.validate())return;const n={username:r.form.get("username")?.value};if(r.form.get("displayName")?.value&&(n.displayName=r.form.get("displayName")?.value),r.form.get("email")?.value&&(n.email=r.form.get("email")?.value),Object.keys(n).length>1){r.monitor.addProcess();const s=yield(0,x.z)(r.backend.withAuth().mutate({mutation:E.Ps`
            mutation CreateUserDialog($input: NewUserInput!) {
              newUser(input: $input)
            }
          `,variables:{input:n}}));if(r.monitor.removeProcess(),s.errors)return void r.uiMessage.error("Error uploading data!");r.uiMessage.notifyConfirmed("User created!"),r.exit(!0,{id:s.data?.newUser,...n})}})()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(m.qu),e.Y36(M.S),e.Y36(ne.v),e.Y36(y.so))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-create-user-dialog"]],decls:27,vars:11,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","displayName",3,"maxLength"],["align","end"],[4,"ngIf"],["matInput","","formControlName","username",3,"maxLength"],["matInput","","formControlName","email"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(r,n){if(1&r&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Display Name"),e.qZA(),e._UZ(5,"input",2),e.TgZ(6,"mat-hint",3),e._uU(7),e.qZA(),e.YNc(8,oe,2,0,"mat-error",4),e.qZA(),e.TgZ(9,"mat-form-field",1)(10,"mat-label"),e._uU(11,"Username"),e.qZA(),e._UZ(12,"input",5),e.TgZ(13,"mat-hint",3),e._uU(14),e.qZA(),e.YNc(15,ae,2,0,"mat-error",4),e.YNc(16,se,2,0,"mat-error",4),e.qZA(),e.TgZ(17,"mat-form-field",1)(18,"mat-label"),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",6),e.YNc(21,ie,2,0,"mat-error",4),e.qZA()()(),e.TgZ(22,"mat-dialog-actions")(23,"button",7),e.NdJ("click",function(){return n.exit()}),e._uU(24,"Exit "),e.qZA(),e.TgZ(25,"button",7),e.NdJ("click",function(){return n.save()}),e._uU(26,"Save "),e.qZA()()),2&r){let s,f,h,N,Z,C;e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("maxLength",50),e.xp6(2),e.hij("",(null==(s=n.form.get("displayName"))||null==s.value?null:s.value.length)||0,"/50"),e.xp6(1),e.Q6J("ngIf",null==(f=n.form.get("displayName"))?null:f.hasError("required")),e.xp6(4),e.Q6J("maxLength",20),e.xp6(2),e.hij("",(null==(h=n.form.get("username"))||null==h.value?null:h.value.length)||0,"/20"),e.xp6(1),e.Q6J("ngIf",null==(N=n.form.get("username"))?null:N.hasError("required")),e.xp6(1),e.Q6J("ngIf",null==(Z=n.form.get("username"))?null:Z.hasError("pattern")),e.xp6(5),e.Q6J("ngIf",null==(C=n.form.get("email"))?null:C.hasError("email")),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing)}},dependencies:[i.O5,O.v,J.lW,g.TO,g.KE,g.bx,g.hX,m._Y,m.Fj,m.JJ,m.JL,m.sg,m.u,u.Nt,y.xY,y.H8]}),t})();var ue=a(1241),me=a(3535),pe=a(1379),ce=a(5705);function de(t,o){1&t&&e._UZ(0,"app-basic-profile",2),2&t&&e.Q6J("user",o.$implicit)}const fe=["*"];let ge=(()=>{class t{constructor(){this.users=[]}ngOnInit(){}getUserLink(r){return r.username?`/members/${r.username}`:""}}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile-grid"]],inputs:{users:"users"},ngContentSelectors:fe,decls:3,vars:1,consts:[[1,"app-profile-grid","grid"],[3,"user",4,"ngFor","ngForOf"],[3,"user"]],template:function(r,n){1&r&&(e.F$t(),e.TgZ(0,"div",0),e.YNc(1,de,1,1,"app-basic-profile",1),e.Hsn(2),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngForOf",n.users))},dependencies:[i.sg,ce.u],styles:[".grid[_ngcontent-%COMP%]{display:grid;align-items:stretch;gap:2em;justify-content:center;width:100%}"]}),t})();function ve(t,o){1&t&&(e.TgZ(0,"div")(1,"div",10),e._UZ(2,"div",11),e.TgZ(3,"div",12),e._uU(4,"_ _ _ "),e.qZA(),e.TgZ(5,"div",12),e._uU(6,"_ _ _ "),e.qZA()()())}const he=function(){return[]};function ye(t,o){if(1&t&&(e.TgZ(0,"app-profile-grid"),e.YNc(1,ve,7,0,"div",9),e.qZA()),2&t){const r=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.DdM(1,he).constructor(r.valuesPerPage))}}function Te(t,o){1&t&&(e.TgZ(0,"div")(1,"h2",13),e._uU(2,"No results found..."),e.qZA()())}let Ue=(()=>{class t extends _.N3{constructor(){var r;super(...arguments),r=this,this.valuesPerPage=18,this._filteredValuesQuery=function(){var n=(0,A.Z)(function*(s,f,h){const Z=r.filterHeader?.sortAscending?"asc":"desc",C=r.filterHeader?.sortingMode??"classYear",Y=yield(0,x.z)(r.backend.withAuth().query({query:E.Ps`
          query DisplayUsers($filter: UserFilterInput, $limit: Int, $skip: Int, $sorts: [UserSortInput!]) {
            users(filter: $filter, limit: $limit, skip: $skip, sorts: $sorts) {
              avatarLink
              bannerLink
              netId
              classYear
              bio
              displayName
              username
            }
          }
        `,variables:{skip:f,limit:h,filter:{...s,..."classYear"===C&&{classYear:{exists:!0}}},sorts:[{..."name"===C&&{displayName:Z},..."username"===C&&{username:Z},..."classYear"===C&&{classYear:Z}}]}}));return Y.error?[]:Y.data.users});return function(s,f,h){return n.apply(this,arguments)}}()}get users(){return this.values}set users(r){this.values=r}get usersQuery(){return this.filteredValuesQuery}set usersQuery(r){this.filteredValuesQuery=r}getFilter(){return this.filterHeader?{...this.filterHeader.searchText&&{or_:[{username:{startsWith:this.filterHeader.searchText,mode:"INSENSITIVE"}},{displayName:{startsWith:this.filterHeader.searchText,mode:"INSENSITIVE"}}]}}:{}}}return t.\u0275fac=function(){let o;return function(n){return(o||(o=e.n5z(t)))(n||t)}}(),t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-display"]],inputs:{users:"users",usersQuery:"usersQuery"},features:[e.qOj],decls:13,vars:4,consts:[["searchBar","","filterOptions","","ascendingToggle","true","sortingMode","classYear",3,"sortAscending"],["value","classYear"],["value","username"],["value","name"],[1,"app-users-display","users-container"],["usersContainer",""],[3,"users"],[4,"ngIf"],[2,"display","flex"],[4,"ngFor","ngForOf"],[2,"display","flex","flex-direction","column","gap","0.5em"],[1,"loading",2,"height","8em","width","8em","border-radius","50%"],[1,"loading",2,"width","8em"],[1,"text-disabled"]],template:function(r,n){1&r&&(e.TgZ(0,"app-filter-header",0)(1,"mat-option",1),e._uU(2,"Class Year"),e.qZA(),e.TgZ(3,"mat-option",2),e._uU(4,"Username"),e.qZA(),e.TgZ(5,"mat-option",3),e._uU(6,"Name"),e.qZA()(),e.TgZ(7,"div",4,5),e._UZ(9,"app-profile-grid",6),e.YNc(10,ye,2,2,"app-profile-grid",7),e._UZ(11,"div",8),e.YNc(12,Te,3,0,"div",7),e.qZA()),2&r&&(e.Q6J("sortAscending",!1),e.xp6(9),e.Q6J("users",n.users),e.xp6(1),e.Q6J("ngIf",!n.loaded),e.xp6(2),e.Q6J("ngIf",n.loaded&&0===n.users.length))},dependencies:[i.sg,i.O5,me.B,pe.ey,ge]}),t})();function Ce(t,o){if(1&t){const r=e.EpF();e.TgZ(0,"div",2)(1,"button",3),e.NdJ("click",function(){e.CHM(r);const s=e.oxw();return e.KtG(s.onCreateUser())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA(),e._uU(4," Create Member "),e.qZA()()}}const Ze=[{path:"",component:F,children:[{path:"",component:(()=>{class t{constructor(r,n,s,f){this.security=r,this.uiMessage=n,this.router=s,this.dialog=f,this.canCreateUser=!1}ngOnInit(){var r=this;return(0,A.Z)(function*(){yield r.security.waitUntilReady(),r.canCreateUser=r.security.makePermCalc().hasPermission(I.y3.CreateUser)})()}onCreateUser(){var r=this;return(0,A.Z)(function*(){const n=yield(0,x.z)(r.dialog.open(le,{width:"25em",maxWidth:"90vw"}).afterClosed());!n.success||r.router.navigateByUrl(`/members/${n.user.username}`)})()}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(ue.I),e.Y36(M.S),e.Y36(l.F0),e.Y36(y.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-tab"]],decls:3,vars:1,consts:[["full-width",""],["style","margin-bottom: 1em",4,"ngIf"],[2,"margin-bottom","1em"],["mat-stroked-button","","pill","",3,"click"]],template:function(r,n){1&r&&(e.TgZ(0,"app-section",0),e.YNc(1,Ce,5,0,"div",1),e._UZ(2,"app-users-display"),e.qZA()),2&r&&(e.xp6(1),e.Q6J("ngIf",n.canCreateUser))},dependencies:[i.O5,O.v,J.lW,P.e,Ue,b.Hw]}),t})()},{path:"eboard",component:R}]}];let be=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(Ze),i.ez,H.I,U.z,b.Ps,p.Nh,w,g.lN,m.UX,u.c,y.Is,c.c,j]}),t})()},3512:(Q,B,a)=>{a.d(B,{I:()=>b});var i=function(u){return parseFloat(u)},y=a(4537);const g=function m(u){return function(p,l,c,d){null==c&&(c=u),null==d&&(d=c);var T=String(p).match(/[\d.\-\+]*\s*(.*)/)[1]||"";if(T===l)return p;var v=i(p);if("px"!==T)if("em"===T)v=i(p)*i(c);else if("rem"===T)v=i(p)*i(u);else{if("ex"!==T)return p;v=i(p)*i(c)*2}var U=v;if("px"!==l)if("em"===l)U=v/i(d);else if("rem"===l)U=v/i(u);else{if("ex"!==l)return p;U=v/i(d)/2}return parseFloat(U.toFixed(5))+l}}("16px");let b=(()=>{class u{constructor(){}convert(l,c,d=""){return d?g(l,c,d):g(l,c)}toNumber(l){return parseInt(l.replace(/[^0-9.]/g,""))}convertToNumber(l,c,d=""){return this.toNumber(d?g(l,c,d):g(l,c))}}return u.\u0275fac=function(l){return new(l||u)},u.\u0275prov=y.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);