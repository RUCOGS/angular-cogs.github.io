"use strict";(self.webpackChunkrucogs_website=self.webpackChunkrucogs_website||[]).push([[408],{5408:(ri,R,s)=>{s.r(R),s.d(R,{UserPageModule:()=>oi});var g=s(8692),p=s(8239),J=s(9860),b=s(3556),v=s(274),q=s(8023),c=s(7445),y=s(3528),e=s(4537),A=s(7545),I=s(3178),C=s(7894),F=s(1241),T=s(5208);function oe(i,a){1&i&&(e.TgZ(0,"div",6),e._uU(1,"Overview"),e.qZA())}function re(i,a){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove_red_eye"),e.qZA(),e.YNc(2,oe,2,0,"div",5)),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE","key"))}}function ae(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-overview-tab",7),e.NdJ("edited",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.fetchData(!0))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("user",t.user)("userOptions",t.userOptions)}}function ne(i,a){1&i&&(e.TgZ(0,"div",6),e._uU(1,"Invites"),e.qZA())}function se(i,a){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"mail"),e.qZA(),e.YNc(2,ne,2,0,"div",5)),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function le(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-invites-tab",7),e.NdJ("edited",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.fetchData(!0))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("user",t.user)("userOptions",t.userOptions)}}function de(i,a){1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,se,3,1,"ng-template",2),e.YNc(2,le,1,2,"ng-template",3),e.qZA())}function ce(i,a){1&i&&(e.TgZ(0,"div",6),e._uU(1,"E-Board"),e.qZA())}function ue(i,a){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"assignment_ind"),e.qZA(),e.YNc(2,ce,2,0,"div",5)),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function me(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-eboard-tab",7),e.NdJ("edited",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.fetchData(!0))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("user",t.user)("userOptions",t.userOptions)}}function pe(i,a){1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,ue,3,1,"ng-template",2),e.YNc(2,me,1,2,"ng-template",3),e.qZA())}function ge(i,a){1&i&&(e.TgZ(0,"div",6),e._uU(1,"Settings"),e.qZA())}function _e(i,a){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"settings"),e.qZA(),e.YNc(2,ge,2,0,"div",5)),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function fe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"app-settings-tab",7),e.NdJ("edited",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.fetchData(!0))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("user",t.user)("userOptions",t.userOptions)}}function ve(i,a){1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,_e,3,1,"ng-template",2),e.YNc(2,fe,1,2,"ng-template",3),e.qZA())}let $=(()=>{class i{constructor(t,o,r,n,d){this.breakpointManager=t,this.activatedRoute=o,this.backend=r,this.security=n,this.uiMessageService=d,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,loaded:!1},this.username="",this.onDestroy$=new q.x}ngOnInit(){var t=this;this.activatedRoute.paramMap.pipe((0,y.R)(this.onDestroy$)).subscribe(function(){var o=(0,p.Z)(function*(r){t.username=r.get("username"),yield t.security.waitUntilReady(),yield t.fetchData(!0),t.setupSubscribers()});return function(r){return o.apply(this,arguments)}}())}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}fetchData(t=!1){var o=this;return(0,p.Z)(function*(){yield o.security.fetchData();const r=yield(0,c.z)(o.backend.withAuth().query({query:v.Ps`
          query FetchUserPageUser($filter: UserFilterInput) {
            users(filter: $filter) {
              id
              username
              displayName
              avatarLink
              bannerLink
              bio
              createdAt
              updatedAt
              classYear
              projectMembers {
                id
                projectId
              }
              socials {
                id
                link
                platform
                username
              }
              roles {
                roleCode
              }
              eBoard {
                id
                createdAt
                updatedAt
                bio
                avatarLink
                terms {
                  id
                  year
                  roles {
                    roleCode
                  }
                }
              }
            }
          }
        `,variables:{filter:{username:{eq:o.username}}},...t&&{fetchPolicy:"no-cache"}}));if(0==r.data.users.length)return o.userOptions.nonExistent=!0,void(o.userOptions.loaded=!0);let n=(0,J.I8)(r.data.users[0]);n.eBoard?.terms?.sort((h,S)=>S.year-h.year);const d={userId:[n.id]},m=o.security.makePermCalc().withDomain(d);if(o.userOptions.canUpdateUser=m.hasPermission(b.y3.UpdateUser),o.userOptions.canDeleteUser=m.hasPermission(b.y3.DeleteUser),o.userOptions.canManageUserRoles=m.hasPermission(b.y3.ManageUserRoles),o.userOptions.canManageEBoardRoles=m.hasPermission(b.y3.ManageEboardRoles),o.userOptions.canManageEBoard=m.hasPermission(b.y3.ManageEboard),o.userOptions.canDeleteUser||(o.userOptions.deleteUserTooltip="Please ask an e-board officer if you'd like to delete your profile."),(n.projectMembers?.length??0)>0&&(o.userOptions.canDeleteUser=!1,o.userOptions.deleteUserTooltip="Cannot delete user that is still in a project!"),o.userOptions.hasProjects=(n.projectMembers?.length??0)>0,o.security.makePermCalc().withDomain({userId:[n.id]}).hasPermission(b.y3.ReadUserPrivate)){const h=yield(0,c.z)(o.backend.withAuth().withOpDomain({userId:[n.id]}).query({query:v.Ps`
              query FetchUserPagePrivateUser {
                users {
                  email
                  loginIdentities {
                    id
                    name
                    identityId
                    data
                  }
                }
              }
            `,...t&&{fetchPolicy:"no-cache"}}));if(h.error||0===h.data.users.length)return;n={...n,...h.data.users[0]}}if(o.security.securityContext?.userId){const h=o.security.getOpDomainFromPermission(b.y3.ManageProjectInvites,["projectInviteId"]),S=o.security.securityContext&&o.userOptions.canUpdateUser?yield(0,c.z)(o.backend.withAuth().withOpDomain(h).query({query:v.Ps`
                    query FetchUserPageInvites($filter: ProjectInviteFilterInput) {
                      projectInvites(filter: $filter) {
                        id
                        type
                        project {
                          id
                          name
                          cardImageLink
                        }
                      }
                    }
                  `,variables:{filter:{userId:{eq:n.id}}},...t&&{fetchPolicy:"no-cache"}})):void 0;S&&!S.error&&(n.projectInvites=S.data.projectInvites)}o.userOptions.loaded=!0,o.user=n})()}setupSubscribers(){if(!this.security.securityContext?.userId||!this.userOptions.canUpdateUser)return;const t={userId:this.security.securityContext.userId};this.backend.subscribe({query:v.Ps`
          subscription ($filter: ProjectInviteSubscriptionFilter!) {
            projectInviteCreated(filter: $filter)
          }
        `,variables:{filter:t}}).pipe((0,y.R)(this.onDestroy$)).subscribe({next:o=>{t.projectId&&this.uiMessageService.notifyInfo("New invite!"),this.fetchData(!0)}}),this.backend.subscribe({query:v.Ps`
          subscription ($filter: ProjectInviteSubscriptionFilter!) {
            projectInviteDeleted(filter: $filter)
          }
        `,variables:{filter:t}}).pipe((0,y.R)(this.onDestroy$)).subscribe({next:o=>{t.projectId&&this.uiMessageService.notifyInfo("Invite deleted!"),this.fetchData(!0)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(A.IW),e.Y36(I.gz),e.Y36(C.v),e.Y36(F.I),e.Y36(T.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-page"]],decls:8,vars:4,consts:[[1,"app-user-page","main-bg"],["mat-align-tabs","center","backgroundColor","primary",3,"selectedIndex"],["mat-tab-label",""],["matTabContent",""],[4,"ngIf"],["style","margin-left: 0.5em;",4,"ngIf"],[2,"margin-left","0.5em"],[3,"user","userOptions","edited"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab"),e.YNc(3,re,3,1,"ng-template",2),e.YNc(4,ae,1,2,"ng-template",3),e.qZA(),e.YNc(5,de,3,0,"mat-tab",4),e.YNc(6,pe,3,0,"mat-tab",4),e.YNc(7,ve,3,0,"mat-tab",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("selectedIndex",0),e.xp6(4),e.Q6J("ngIf",o.userOptions.canUpdateUser),e.xp6(1),e.Q6J("ngIf",o.userOptions.canManageEBoard),e.xp6(1),e.Q6J("ngIf",o.userOptions.canUpdateUser))},styles:["[_nghost-%COMP%]{--banner-height: calc(50vh - var(--site-header-height));--avatar-border-width: .5em;--avatar-size: 8em}.banner-container[_ngcontent-%COMP%]{box-sizing:content-box;height:var(--banner-height);width:100%;display:flex;justify-content:center;align-items:center;position:relative}.banner[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover}.edit-banner-tint[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#000;opacity:.5}.avatar-container[_ngcontent-%COMP%]{width:calc(var(--avatar-size) + var(--avatar-border-width));height:calc(var(--avatar-size) + var(--avatar-border-width));position:absolute;box-sizing:content-box;top:calc(var(--banner-height) - .5 * var(--avatar-size));display:flex;justify-content:center;align-items:center;border-radius:50%}.avatar[_ngcontent-%COMP%]{position:absolute;border:solid var(--avatar-border-width);border-radius:50%;object-fit:cover;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width))}.edit-avatar-tint[_ngcontent-%COMP%]{position:absolute;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width));border-radius:50%;background-color:#000;opacity:.5}.display-name[_ngcontent-%COMP%]{margin:0}.username-tag[_ngcontent-%COMP%]{margin-bottom:1em}.main-bg[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.content-width-padding[_ngcontent-%COMP%]{padding:var(--content-padding);padding-top:0}.socials-button-container[_ngcontent-%COMP%]{box-sizing:border-box;display:grid;align-items:stretch;margin-left:auto;margin-right:auto;gap:8px;grid-template-columns:repeat(auto-fit,minmax(18.75,1fr))}.content[_ngcontent-%COMP%]{display:block;margin:auto;padding-top:0;max-width:var(--content-width)}.core-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:32px}"]}),i})();var he=s(7763),B=s(9910),be=s(6004),z=s(6438),xe=s(6883),Te=s(335),Z=s(3331),l=s(92),f=s(8659),Y=s(7406),Ze=s(4022),P=s(1769),H=s(3451),ye=s(5561),_=s(4536),w=s(4583),L=s(8399),k=s(1379),E=s(8033),x=s(9638);function Ce(i,a){if(1&i&&(e.TgZ(0,"mat-select-trigger",11),e._UZ(1,"ic-icon",12),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.getSocialPlatformData(t.platform.value).icon),e.xp6(1),e.hij("",t.getSocialPlatformData(t.platform.value).name," ")}}function we(i,a){if(1&i&&(e.TgZ(0,"mat-option",13)(1,"div",14),e._UZ(2,"ic-icon",15),e._uU(3),e.qZA()()),2&i){const t=a.$implicit;e.Q6J("value",t.key),e.xp6(2),e.Q6J("icon",t.value.icon),e.xp6(1),e.hij(" ",t.value.name," ")}}function Ue(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Platform is required "),e.qZA())}function Ae(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Username is required "),e.qZA())}function Ee(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Link is required "),e.qZA())}class N{constructor(a={link:"",platform:"",username:""},t){this.userSocial=a,this.editableSocialButton=t}validate(){return this.editableSocialButton?.validate()}compositeValue(){return this.userSocial}}let Ie=(()=>{class i{constructor(t){this.delete=new e.vpe,this.edit=new e.vpe,this.userSocialEdit=new N,this.onDestroy$=new q.x,this.form=t.group({platform:[null,[l.kI.required]],username:[null,[l.kI.required]],link:[null,[l.kI.required]]})}get platform(){return this.form.get("platform")}ngOnInit(){this.userSocialEdit.editableSocialButton=this,this.form.get("platform")?.setValue(this.userSocialEdit.userSocial.platform),this.form.get("username")?.setValue(this.userSocialEdit.userSocial.username),this.form.get("link")?.setValue(this.userSocialEdit.userSocial.link),this.form.get("platform")?.valueChanges.pipe((0,y.R)(this.onDestroy$)).subscribe({next:t=>{this.userSocialEdit.userSocial.platform=t,this.edit.emit()}}),this.form.get("username")?.valueChanges.pipe((0,y.R)(this.onDestroy$)).subscribe({next:t=>{this.userSocialEdit.userSocial.username=t,this.edit.emit()}}),this.form.get("link")?.valueChanges.pipe((0,y.R)(this.onDestroy$)).subscribe({next:t=>{this.userSocialEdit.userSocial.link=t,this.edit.emit()}})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}validate(){return this.form.markAllAsTouched(),this.form.updateValueAndValidity(),this.form.valid}onDelete(){this.edit.emit(),this.delete.emit()}getSocialPlatforms(){return P.VB}getSocialPlatformData(t){return P.VB[t]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.QS))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-editable-social-button"]],inputs:{userSocialEdit:"userSocialEdit"},outputs:{delete:"delete",edit:"edit"},decls:23,vars:8,consts:[[1,"app-editable-social-button","card"],["type","button","mat-icon-button","",2,"position","absolute","right","0.5em","top","0.5em",3,"click"],[2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["appearance","outline"],["formControlName","platform",2,"min-height","27px"],["style","display:flex; align-items: center; gap: 0.5em;",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","username"],["appearance","outline",2,"padding-top","4px"],["matInput","","formControlName","link"],[2,"display","flex","align-items","center","gap","0.5em"],["size","1.5em",3,"icon"],[3,"value"],[2,"display","flex","align-items","center","flex-direction","row","gap","0.5em"],["size","1.25em",3,"icon"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return o.onDelete()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),e._uU(7,"Platform"),e.qZA(),e.TgZ(8,"mat-select",4),e.YNc(9,Ce,3,2,"mat-select-trigger",5),e.YNc(10,we,4,3,"mat-option",6),e.ALo(11,"keyvalue"),e.qZA(),e.YNc(12,Ue,2,0,"mat-error",7),e.qZA(),e.TgZ(13,"mat-form-field",3)(14,"mat-label"),e._uU(15,"Username"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,Ae,2,0,"mat-error",7),e.qZA(),e.TgZ(18,"mat-form-field",9)(19,"mat-label"),e._uU(20,"Link"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,Ee,2,0,"mat-error",7),e.qZA()()()),2&t){let r,n,d;e.xp6(4),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngIf",o.platform&&o.platform.value),e.xp6(1),e.Q6J("ngForOf",e.lcZ(11,6,o.getSocialPlatforms())),e.xp6(2),e.Q6J("ngIf",null==(r=o.form.get("platform"))?null:r.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(n=o.form.get("username"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(d=o.form.get("link"))?null:d.hasError("required"))}},dependencies:[g.sg,g.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,f.TO,f.KE,f.hX,L.ar,Z.Hw,k.ey,E.gD,E.$L,Y.Nt,x.lW,g.Nd],styles:[".card[_ngcontent-%COMP%]{border:2px solid;border-radius:8px;align-content:center;align-items:center;padding:3em 1em 1em;position:relative}"]}),i})();var G=s(4028),M=s(6440),qe=s(9883),U=s(2709),K=s(2842),V=s(7025),X=s(2272);const Be=["avatarUpload"],Ne=["bannerUpload"];function Me(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Display name is required "),e.qZA())}function Qe(i,a){if(1&i&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function je(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Bio is required "),e.qZA())}function Re(i,a){1&i&&(e.TgZ(0,"div",30),e._uU(1,"Empty..."),e.qZA())}function Fe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"app-editable-social-button",31),e.NdJ("delete",function(){const n=e.CHM(t).index,d=e.oxw();return e.KtG(d.onDeleteSocial(n))})("edit",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onEditSocial())}),e.qZA()()}if(2&i){const t=a.$implicit;e.xp6(1),e.Q6J("userSocialEdit",t)}}let $e=(()=>{class i{constructor(t,o,r,n,d,m,h){this.cdn=o,this.backend=r,this.rolesService=n,this.uiMessageService=d,this.dialogRef=m,this.data=h,this.userSocialEdits=[],this.socialsEdited=!1,this.roles=[],this.disabledRoles=[],this.acceptedRoles=[],this.rolesEdited=!1,this.monitor=new w.y,this.form=t.group({displayName:[h.user.displayName,[l.kI.required]],bio:[h.user.bio,[]],classYear:[h.user.classYear,[]]}),m.disableClose=!0}ngAfterViewInit(){var t=this;return(0,p.Z)(function*(){setTimeout((0,p.Z)(function*(){!t.avatarUpload||!t.bannerUpload||!t.data.user.roles||!t.data.user.id||(t.avatarUpload.init(t.cdn.getFileLink(t.data.user.avatarLink)),t.bannerUpload.init(t.cdn.getFileLink(t.data.user.bannerLink)),t.socialsEdited=!1,t.data.user.socials&&(t.userSocialEdits=t.data.user.socials.map(o=>new N({link:o?.link??"",platform:o?.platform??"",username:o?.username??""}))),t.rolesEdited=!1,t.roles=t.data.user.roles.map(o=>o?.roleCode),t.acceptedRoles=yield t.rolesService.getAddableUserRoles(),t.disabledRoles=yield t.rolesService.getDisabledUserRoles())}),0)})()}onEditSocial(){this.socialsEdited=!0}onEditRoles(){this.rolesEdited=!0}onAddSocial(){this.userSocialEdits.push(new N)}onDeleteSocial(t){this.userSocialEdits.splice(t,1)}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{for(const t of this.userSocialEdits)if(!t.validate())throw new Error("A user social is incomplete!");return function Ye(i,a,t){if((0,G.bs)(i,a))throw new G.oo(400,t)}(this.userSocialEdits.map(t=>t.userSocial),(t,o)=>t.username===o.username&&t.platform===o.platform,"Cannot have duplicate user socials with identical usernames and platforms!"),!0}catch(t){return this.uiMessageService.error(t),!1}}save(){var t=this;return(0,p.Z)(function*(){if(t.monitor.isProcessing||!t.avatarUpload||!t.bannerUpload||!t.validate())return;const o={id:t.data.user.id};if(t.rolesEdited&&(o.roles=t.roles),t.socialsEdited&&(o.socials=t.userSocialEdits.map(r=>r.userSocial)),t.form.get("displayName")?.value!==t.data.user.displayName&&(o.displayName=t.form.get("displayName")?.value),t.form.get("bio")?.value!==t.data.user.bio&&(o.bio=t.form.get("bio")?.value),t.form.get("classYear")?.value!==t.data.user.classYear&&(o.classYear=t.form.get("classYear")?.value),t.avatarUpload.edited&&(o.avatar=t.avatarUpload.value?{upload:t.avatarUpload.value,operation:b.f0.Insert}:{operation:b.f0.Delete}),t.bannerUpload.edited&&(o.banner=t.bannerUpload.value?{upload:t.bannerUpload.value,operation:b.f0.Insert}:{operation:b.f0.Delete}),Object.keys(o).length>1){t.monitor.addProcess();const r=yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
            mutation ($input: UpdateUserInput!) {
              updateUser(input: $input)
            }
          `,variables:{input:o}}));if(t.monitor.removeProcess(),r.errors)return void t.uiMessageService.error("Error uploading data!");t.exit(!0)}})()}getAvailableYears(){const o=[];for(let r=(new Date).getFullYear()+8;r>=2012;r--)o.push(r);return o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(M.U),e.Y36(C.v),e.Y36(qe.f),e.Y36(T.S),e.Y36(_.so),e.Y36(_.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-user-dialog"]],viewQuery:function(t,o){if(1&t&&(e.Gf(Be,5),e.Gf(Ne,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.avatarUpload=r.first),e.iGM(r=e.CRH())&&(o.bannerUpload=r.first)}},decls:49,vars:16,consts:[[2,"position","relative",3,"formGroup"],[2,"width","100%","height","12.5em","border-radius","0.25em","overflow","hidden"],["fileSizeLimit","10 MB"],["bannerUpload",""],[2,"--size","8em","--offset","calc(var(--size) / 2)","--offset-left-over","calc(var(--size) - var(--offset))","position","relative","height","var(--offset-left-over)","margin-bottom","1em"],[1,"outline-color-card",2,"left","2em","top","calc(-1 * var(--offset))","position","absolute","height","var(--size)","width","var(--size)","border-radius","8em","overflow","hidden","outline-style","solid","outline-width","0.25em"],[1,"background-color-card",2,"width","100%","height","100%"],["fileSizeLimit","5 MB",1,"app-edit-user-dialog","avatar"],["avatarUpload",""],[2,"display","flex","flex-direction","row","flex-wrap","wrap-reverse","justify-content","left","align-items","flex-end","margin-bottom","16px","gap","24px"],[2,"flex","1","display","flex","flex-direction","row","flex-wrap","wrap","gap","12px"],["appearance","outline",2,"flex","1"],["matInput","","formControlName","displayName",3,"maxLength"],["align","end"],[4,"ngIf"],["appearance","outline",2,"width","100%"],["formControlName","classYear"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"no-padding",2,"width","100%","line-height","1.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","bio",3,"maxLength"],[2,"margin","0 0 2em 0"],[2,"display","flex","align-items","center","margin-bottom","0.5em"],[2,"margin-bottom","0","flex-grow","1"],["type","button","mat-stroked-button","","pill","",1,"app-edit-user-dialog","add-socials-button",3,"click"],[2,"display","flex","flex-direction","column","gap","0.5em"],["class","text-disabled",4,"ngIf"],[4,"ngFor","ngForOf"],["label","Roles",3,"roles","allRoles","disabledRoles","disabled","rolesEdited"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[3,"value"],[1,"text-disabled"],[3,"userSocialEdit","delete","edit"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"div",1),e._UZ(3,"app-image-upload",2,3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"app-image-upload",7,8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),e._uU(14,"Display Name"),e.qZA(),e._UZ(15,"input",12),e.TgZ(16,"mat-hint",13),e._uU(17),e.qZA(),e.YNc(18,Me,2,0,"mat-error",14),e.qZA()()(),e.TgZ(19,"mat-form-field",15)(20,"mat-label"),e._uU(21,"Class Year"),e.qZA(),e.TgZ(22,"mat-select",16),e.YNc(23,Qe,2,2,"mat-option",17),e.qZA()(),e.TgZ(24,"mat-form-field",18)(25,"mat-label"),e._uU(26,"Bio"),e.qZA(),e._UZ(27,"textarea",19),e.TgZ(28,"mat-hint",13),e._uU(29),e.qZA(),e.YNc(30,je,2,0,"mat-error",14),e.qZA(),e.TgZ(31,"div",20)(32,"div",21)(33,"div",22),e._uU(34,"Socials"),e.qZA(),e.TgZ(35,"button",23),e.NdJ("click",function(){return o.onAddSocial()}),e.TgZ(36,"mat-icon"),e._uU(37,"add"),e.qZA(),e._uU(38," Add Social "),e.qZA()(),e.TgZ(39,"div",24),e.YNc(40,Re,2,0,"div",25),e.YNc(41,Fe,2,1,"div",26),e.qZA()(),e.TgZ(42,"div")(43,"app-role-codes-editor",27),e.NdJ("rolesEdited",function(){return o.onEditRoles()}),e.qZA()()()(),e.TgZ(44,"mat-dialog-actions")(45,"button",28),e.NdJ("click",function(){return o.exit()}),e._uU(46,"Exit "),e.qZA(),e.TgZ(47,"button",28),e.NdJ("click",function(){return o.save()}),e._uU(48,"Save "),e.qZA()()),2&t){let r,n,d,m;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(14),e.Q6J("maxLength",50),e.xp6(2),e.hij("",(null==(r=o.form.get("displayName"))||null==r.value?null:r.value.length)||0,"/50"),e.xp6(1),e.Q6J("ngIf",null==(n=o.form.get("displayName"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngForOf",o.getAvailableYears()),e.xp6(4),e.Q6J("maxLength",600),e.xp6(2),e.hij("",(null==(d=o.form.get("bio"))||null==d.value?null:d.value.length)||0,"/600"),e.xp6(1),e.Q6J("ngIf",null==(m=o.form.get("bio"))?null:m.hasError("required")),e.xp6(10),e.Q6J("ngIf",0==o.userSocialEdits.length),e.xp6(1),e.Q6J("ngForOf",o.userSocialEdits),e.xp6(2),e.Q6J("roles",o.roles)("allRoles",o.acceptedRoles)("disabledRoles",o.disabledRoles)("disabled",!o.data.userOptions.canManageUserRoles),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing)}},dependencies:[g.sg,g.O5,U.v,x.lW,f.TO,f.KE,f.bx,f.hX,E.gD,k.ey,K.K,Ie,Z.Hw,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,V.IC,Y.Nt,X.J,_.xY,_.H8]}),i})();var ze=s(1656),He=s(5539),Q=s(398);let Le=(()=>{class i{constructor(){this.icon="",this.username="",this.link=""}ngOnInit(){this.userSocial&&this.userSocial.link&&this.userSocial.username&&this.userSocial.platform&&(this.icon=P.VB[this.userSocial.platform].icon,this.link=this.userSocial.link,this.username=this.userSocial.username)}onClick(){window.open(this.link,"_blank")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-social-button"]],inputs:{userSocial:"userSocial",icon:"icon",username:"username",link:"link"},decls:8,vars:2,consts:[[1,"app-social-button","card"],["size","24px",1,"icon",3,"icon"],[1,"app-social-button","social-button-name"],[2,"flex","1 1 auto"],["mat-icon-button","","color","basic",3,"click"],[2,"margin-bottom","2px"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"ic-icon",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"span",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return o.onClick()}),e.TgZ(6,"mat-icon",5),e._uU(7,"launch"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("icon",o.icon),e.xp6(2),e.Oqu(o.username))},dependencies:[L.ar,Z.Hw,x.lW],styles:[".card[_ngcontent-%COMP%]{border:2px solid;border-radius:.5em;display:flex;align-content:center;align-items:center;gap:.75em;padding:.75em .75em .75em 1.25em}"]}),i})();var Ge=s(3223),W=s(6387);function Ke(i,a){1&i&&(e.TgZ(0,"p",7),e._uU(1,"Empty for now..."),e.qZA())}function Ve(i,a){if(1&i&&e._UZ(0,"app-roles-display",8),2&i){const t=e.oxw();e.Q6J("roles",t.getRoles())}}function Xe(i,a){if(1&i&&(e.TgZ(0,"div",9)(1,"app-tag",10),e._uU(2,"\u{1f4ab} EBoard Alumni"),e.qZA(),e.TgZ(3,"app-tag",10),e._uU(4),e.qZA()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.getEBoardReign())}}let ee=(()=>{class i{constructor(t){this.cdn=t,this.eBoard={}}ngOnInit(){}hasRoles(){const t=(new Date).getFullYear();return void 0!==this.eBoard.terms?.find(o=>o?.year===t)}getRoles(){const t=(new Date).getFullYear();return this.eBoard.terms&&this.eBoard.terms.length>0?this.eBoard.terms.find(o=>o?.year===t)?.roles?.map(o=>o?.roleCode)??[]:[]}getEBoardReign(){if((new Date).getFullYear(),this.eBoard.terms&&this.eBoard.terms.length>0){if(!this.eBoard.terms[0]?.year)return"";let o=this.eBoard.terms[0].year,r=this.eBoard.terms[0].year;for(const n of this.eBoard.terms)!n?.year||(n.year<o&&(o=n.year),n.year>r&&(r=n.year));return`${o} - ${r}`}return""}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-eboard-profile"]],inputs:{eBoard:"eBoard"},decls:10,vars:5,consts:[[2,"display","flex","flex-direction","row","gap","24px"],["size","large",3,"avatarSrc"],[2,"display","flex","flex-direction","column","max-height","100%"],["class","app-eboard-profile text-disabled",4,"ngIf"],[2,"flex","1"],[3,"roles",4,"ngIf"],["style","\n      display: flex;\n      flex-direction: row;\n      gap: 0.5em;\n    ",4,"ngIf"],[1,"app-eboard-profile","text-disabled"],[3,"roles"],[2,"display","flex","flex-direction","row","gap","0.5em"],["color","blank"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-avatar",1),e.TgZ(2,"div",2)(3,"h2"),e._uU(4,"Bio"),e.qZA(),e.YNc(5,Ke,2,0,"p",3),e.TgZ(6,"p",4),e._uU(7),e.qZA(),e.YNc(8,Ve,1,1,"app-roles-display",5),e.YNc(9,Xe,5,1,"div",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("avatarSrc",o.cdn.getFileLink(o.eBoard.avatarLink)),e.xp6(4),e.Q6J("ngIf",!o.eBoard.bio),e.xp6(2),e.Oqu(o.eBoard.bio),e.xp6(1),e.Q6J("ngIf",o.hasRoles()),e.xp6(1),e.Q6J("ngIf",!o.hasRoles()))},dependencies:[g.O5,Ge.A,Q.l,W.Z]}),i})();function We(i,a){1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",19),e.qZA())}const et=function(){return[]};function tt(i,a){if(1&i&&(e.TgZ(0,"div",1),e._UZ(1,"div",2),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5),e._UZ(5,"div",6),e.qZA(),e.TgZ(6,"div",7)(7,"div")(8,"h1",8),e._uU(9,"_ _ _"),e.qZA(),e.TgZ(10,"div",9),e._uU(11,"_ _ _ _ _ _ _ _ _"),e.qZA()(),e._UZ(12,"div",10),e.TgZ(13,"div",11),e._UZ(14,"div",12),e.qZA()(),e.TgZ(15,"div",13)(16,"p",14),e._uU(17," _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ "),e.qZA(),e.TgZ(18,"div",15)(19,"div",16),e.YNc(20,We,2,0,"div",17),e.qZA()(),e.TgZ(21,"div"),e._UZ(22,"app-roles-display",18),e.qZA()()()()()),2&i){const t=e.oxw();e.xp6(20),e.Q6J("ngForOf",e.DdM(2,et).constructor(3)),e.xp6(2),e.Q6J("roles",t.roles)}}function it(i,a){if(1&i&&e._UZ(0,"img",30),2&i){const t=e.oxw(2);e.Q6J("src",t.bannerSrc,e.LSH)}}function ot(i,a){if(1&i&&e._UZ(0,"img",31),2&i){const t=e.oxw(2);e.Q6J("src",t.avatarSrc,e.LSH)}}function rt(i,a){if(1&i&&(e.TgZ(0,"div",10)(1,"h1",32),e._uU(2),e.qZA(),e.TgZ(3,"div",33),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.user.displayName),e.xp6(2),e.hij("@",t.user.username,"")}}function at(i,a){if(1&i&&(e.TgZ(0,"div",34)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"app-tag",35),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("Class of ",t.user.classYear,""),e.xp6(2),e.Oqu(t.getClassYearString(t.user.classYear))}}function nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.edit())}),e._uU(1,"Edit Profile "),e.qZA()}}function st(i,a){1&i&&(e.TgZ(0,"div",37)(1,"h1"),e._uU(2,"This account doesn't exist"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Try searching for another"),e.qZA()())}function lt(i,a){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"app-social-button",41),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("userSocial",t)}}function dt(i,a){if(1&i&&(e.TgZ(0,"div",43),e._UZ(1,"mat-divider",43),e.TgZ(2,"h2"),e._uU(3,"E-Board"),e.qZA(),e._UZ(4,"app-eboard-profile",48),e.qZA()),2&i){const t=e.oxw(4);e.xp6(4),e.Q6J("eBoard",t.user.eBoard)}}function ct(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4);return e.KtG(r.onNewProjectClick())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3," New Project "),e.qZA()}}function ut(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,dt,5,1,"div",42),e._UZ(2,"mat-divider",43),e.TgZ(3,"div",44)(4,"h2",45),e._uU(5,"Projects"),e.qZA(),e.YNc(6,ct,4,0,"button",46),e.qZA(),e._UZ(7,"app-projects-display",47),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.user.eBoard),e.xp6(5),e.Q6J("ngIf",t.userOptions.canUpdateUser),e.xp6(1),e.Q6J("projectsQuery",t.projectsQuery.bind(t))}}function mt(i,a){if(1&i&&(e.TgZ(0,"div",13)(1,"p",38),e._uU(2),e.qZA(),e.TgZ(3,"div",15)(4,"div",16),e.YNc(5,lt,2,1,"div",17),e.qZA()(),e.TgZ(6,"div"),e._UZ(7,"app-roles-display",18),e.qZA(),e.TgZ(8,"div",39)(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.qZA()(),e.YNc(13,ut,8,3,"div",40),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.user.bio," "),e.xp6(3),e.Q6J("ngForOf",t.user.socials),e.xp6(2),e.Q6J("roles",t.roles),e.xp6(3),e.hij("Created at ",t.getDateString(t.user.createdAt),""),e.xp6(2),e.hij("Updated at ",t.getDateString(t.user.updatedAt),""),e.xp6(1),e.Q6J("ngIf",!t.userOptions.nonExistent)}}function pt(i,a){if(1&i&&(e.TgZ(0,"div",1)(1,"div",20),e.YNc(2,it,1,1,"img",21),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,ot,1,1,"img",22),e.qZA(),e.TgZ(7,"div",23),e.YNc(8,rt,5,2,"div",24),e.TgZ(9,"div",25),e.YNc(10,at,5,2,"div",26),e.YNc(11,nt,2,0,"button",27),e.qZA()(),e.YNc(12,st,5,0,"div",28),e.YNc(13,mt,14,6,"div",29),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",t.getBannerContainerStyle()),e.xp6(1),e.Q6J("ngIf",t.bannerSrc),e.xp6(4),e.Q6J("ngIf",t.avatarSrc),e.xp6(2),e.Q6J("ngIf",!t.userOptions.nonExistent),e.xp6(2),e.Q6J("ngIf",t.user.classYear),e.xp6(1),e.Q6J("ngIf",t.userOptions.canUpdateUser),e.xp6(1),e.Q6J("ngIf",t.userOptions.nonExistent),e.xp6(1),e.Q6J("ngIf",!t.userOptions.nonExistent)}}let gt=(()=>{class i{constructor(t,o,r,n,d,m,h){this.cdnService=t,this.settings=o,this.dialog=r,this.backend=n,this.security=d,this.router=m,this.uiMessageService=h,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,loaded:!1},this.avatarSrc="https://c.tenor.com/Tu0MCmJ4TJUAAAAC/load-loading.gif",this.bannerSrc="https://c.tenor.com/Tu0MCmJ4TJUAAAAC/load-loading.gif",this.projects=[],this.roles=[],this.monitor=new H.yv,this.setupBannerColorListener=!1}ngAfterViewChecked(){this.trySetupBannerColorListeners()}ngOnChanges(t){t.user&&(this.bannerSrc=this.user.bannerLink?this.cdnService.getFileLink(this.user.bannerLink):"",this.avatarSrc=this.user.avatarLink?this.cdnService.getFileLink(this.user.avatarLink):this.settings.General.defaultAvatarSrc,this.user.roles&&(this.roles=this.user.roles.map(o=>o?.roleCode)),this.projectsDisplay?.queryUntilFillPage())}getDateString(t){return new Date(t).toLocaleString()}trySetupBannerColorListeners(){if(this.setupBannerColorListener)return;const t=document.querySelector("img.user-page.overview-tab.avatar");if(t){t.setAttribute("crossOrigin","");const o=new ye.Z;t.addEventListener("load",()=>{const[r,n,d]=o.getColor(t);this.bannerColor=new H.Il(r,n,d)}),this.setupBannerColorListener=!0}}getBannerContainerStyle(){return{...this.bannerColor&&{"background-color":this.bannerColor.hexString()}}}projectsQuery(t,o,r){var n=this;return(0,p.Z)(function*(){if(!n.userOptions.hasProjects||!n.user.id||!n.user.projectMembers)return[];const d=yield(0,c.z)(n.backend.query({query:v.Ps`
          query ($filter: ProjectFilterInput, $skip: Int, $limit: Int) {
            projects(filter: $filter, skip: $skip, limit: $limit) {
              id
              access
              cardImageLink
              completedAt
              createdAt
              updatedAt
              name
              pitch
              description
              downloadLinks
              members {
                user {
                  avatarLink
                }
              }
            }
          }
        `,variables:{skip:o,limit:r,filter:{...t,id:{in:n.user.projectMembers.map(m=>m?.projectId)}}}}));return d.error?[]:d.data.projects})()}edit(){var t=this;return(0,p.Z)(function*(){(yield(0,c.z)(t.dialog.open($e,{data:{user:t.user,userOptions:t.userOptions},width:"37.5em",maxWidth:"90vw"}).afterClosed()))&&t.edited.emit()})()}onNewProjectClick(){this.router.navigateByUrl("/projects/new")}getClassYearString(t){const r=t-(new Date).getFullYear();return r>4?"\u{1f4e8} Incoming":1===r?"\u{1f386} Senior":2===r?"\u{1f307} Junior":3===r?"\u{1f99c} Sophmore":4===r?"\u{1f530} Freshman":"\u{1f393} Alumni"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(A.Ub),e.Y36(ze.g),e.Y36(_.uw),e.Y36(A.v$),e.Y36(A.Il),e.Y36(I.F0),e.Y36(T.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-overview-tab"]],viewQuery:function(t,o){if(1&t&&e.Gf(B.YA,5),2&t){let r;e.iGM(r=e.CRH())&&(o.projectsDisplay=r.first)}},inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:2,vars:2,consts:[["class","user-page overview-tab main-bg",4,"ngIf"],[1,"user-page","overview-tab","main-bg"],[1,"user-page","overview-tab","banner-container","loading"],[1,"user-page","overview-tab","content-width-padding"],[1,"user-page","overview-tab","content"],[1,"user-page","overview-tab","avatar-container"],[1,"user-page","overview-tab","avatar","loading"],[2,"position","relative","display","flex","flex-direction","row","align-items","flex-start","margin-top","5em","flex-wrap","wrap","gap","4px"],[1,"user-page","overview-tab","display-name","loading",2,"margin-bottom","0.2em"],[1,"user-page","overview-tab","username-tag","loading"],[2,"flex-grow","1"],[2,"right","0","display","flex","flex-direction","row"],[1,"loading",2,"width","5em","height","2em","border-radius","5em"],[1,"user-page","overview-tab","core-content"],[1,"loading",2,"margin-top","0","margin-bottom","0","word-wrap","break-word","display","inline"],[1,"user-page","overview-tab","socials-container"],[1,"user-page","overview-tab","socials-button-container"],[4,"ngFor","ngForOf"],[3,"roles"],[1,"loading",2,"height","4em","width","100%","border-radius","0.5em"],[1,"user-page","overview-tab","banner-container",3,"ngStyle"],["class","user-page overview-tab banner",3,"src",4,"ngIf"],["class","user-page overview-tab avatar",3,"src",4,"ngIf"],[2,"position","relative","display","flex","flex-direction","row","align-items","flex-start","margin-top","5em","flex-wrap","wrap","gap","4px","margin-bottom","1em"],["style","flex-grow: 1;",4,"ngIf"],[2,"right","0","display","flex","flex-direction","row","gap","0.5em","align-items","center"],["style","\n            display: flex; \n            flex-direction: row;\n            align-items: center;\n            gap: 0.5em;\n            margin-right: 1em;\n            flex-wrap: wrap;\n          ",4,"ngIf"],["class","user-page overview-tab edit-button","mat-stroked-button","","color","basic","pill","",3,"click",4,"ngIf"],["class","text-disabled","style","margin-top: 2em;",4,"ngIf"],["class","user-page overview-tab core-content",4,"ngIf"],[1,"user-page","overview-tab","banner",3,"src"],[1,"user-page","overview-tab","avatar",3,"src"],[1,"user-page","overview-tab","display-name"],[1,"user-page","overview-tab","username-tag"],[2,"display","flex","flex-direction","row","align-items","center","gap","0.5em","margin-right","1em","flex-wrap","wrap"],["color","blank"],["mat-stroked-button","","color","basic","pill","",1,"user-page","overview-tab","edit-button",3,"click"],[1,"text-disabled",2,"margin-top","2em"],[2,"margin-top","0","margin-bottom","0","word-wrap","break-word"],[1,"text-disabled",2,"display","flex","flex-direction","row","gap","2em"],[4,"ngIf"],[3,"userSocial"],["style","margin-bottom: 2em;",4,"ngIf"],[2,"margin-bottom","2em"],[2,"display","flex","flex-direction","row","margin-bottom","1em"],[2,"flex","1","margin-bottom","0"],["mat-stroked-button","","pill","",3,"click",4,"ngIf"],[3,"projectsQuery"],[3,"eBoard"],["mat-stroked-button","","pill","",3,"click"]],template:function(t,o){1&t&&(e.YNc(0,tt,23,3,"div",0),e.YNc(1,pt,14,8,"div",0)),2&t&&(e.Q6J("ngIf",!o.userOptions.loaded),e.xp6(1),e.Q6J("ngIf",o.userOptions.loaded))},dependencies:[g.sg,g.O5,g.PC,U.v,x.lW,He.Y,z.d,Q.l,Le,ee,Z.Hw,W.Z],styles:["[_nghost-%COMP%]{--banner-height: calc(50vh - var(--site-header-height));--avatar-border-width: .5em;--avatar-size: 8em}.banner-container[_ngcontent-%COMP%]{box-sizing:content-box;height:var(--banner-height);width:100%;display:flex;justify-content:center;align-items:center;position:relative}.banner[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover}.edit-banner-tint[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#000;opacity:.5}.avatar-container[_ngcontent-%COMP%]{width:calc(var(--avatar-size) + var(--avatar-border-width));height:calc(var(--avatar-size) + var(--avatar-border-width));position:absolute;box-sizing:content-box;top:calc(var(--banner-height) - .5 * var(--avatar-size));display:flex;justify-content:center;align-items:center;border-radius:50%}.avatar[_ngcontent-%COMP%]{position:absolute;border:solid var(--avatar-border-width);border-radius:50%;object-fit:cover;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width))}.edit-avatar-tint[_ngcontent-%COMP%]{position:absolute;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width));border-radius:50%;background-color:#000;opacity:.5}.display-name[_ngcontent-%COMP%]{margin:0}.main-bg[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;max-width:100vw}.content-width-padding[_ngcontent-%COMP%]{padding:var(--content-padding);padding-top:0}.socials-button-container[_ngcontent-%COMP%]{box-sizing:border-box;display:grid;align-items:stretch;margin-left:auto;margin-right:auto;gap:.5em;grid-template-columns:repeat(auto-fit,minmax(18.75em,1fr))}.content[_ngcontent-%COMP%]{display:block;margin:auto;padding-top:0;max-width:var(--content-width)}.core-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:32px}"]}),i})();var te=s(3535),_t=s(6527),j=s(6410),ft=s(9740),u=s(317);function vt(i,a){1&i&&(e.TgZ(0,"th",15),e._uU(1," Project "),e.qZA())}function ht(i,a){if(1&i&&(e.TgZ(0,"td",16),e._UZ(1,"app-inline-project-item",17),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("project",t.project)}}function bt(i,a){1&i&&(e.TgZ(0,"th",18),e._uU(1," Type "),e.qZA())}function xt(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u{1f4e9} Incoming"),e.qZA())}function Tt(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u{1f4e4} Outgoing"),e.qZA())}function Zt(i,a){if(1&i&&(e.TgZ(0,"td",19),e.YNc(1,xt,2,0,"div",20),e.YNc(2,Tt,2,0,"div",20),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","INCOMING"===t.type),e.xp6(1),e.Q6J("ngIf","OUTGOING"===t.type)}}function yt(i,a){1&i&&e._UZ(0,"th",21)}function Ct(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,n=e.oxw();return e.KtG(n.onAcceptInvite(r))}),e.TgZ(1,"mat-icon"),e._uU(2,"check_circle"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",t.monitor.isProcessing)}}function wt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",19)(1,"div",22),e.YNc(2,Ct,3,1,"button",23),e.TgZ(3,"button",24),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onRejectInvite(n))}),e.TgZ(4,"mat-icon"),e._uU(5,"cancel"),e.qZA()()()()}if(2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngIf","OUTGOING"===t.type),e.xp6(1),e.Q6J("disabled",o.monitor.isProcessing)}}function Ut(i,a){1&i&&e._UZ(0,"tr",26)}function At(i,a){1&i&&e._UZ(0,"tr",27)}let Et=(()=>{class i{constructor(t,o){this.backend=t,this.breakpointManager=o,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,loaded:!1},this.monitor=new w.y,this.displayedColumns=["project","type","buttons"],this.filteredInvites=[],this.onDestroy$=new q.x}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){t.user&&(this.monitor.removeProcess(),this.user.projectInvites&&(this.filteredInvites=(0,J.I8)(this.user.projectInvites)))}ngAfterViewInit(){!this.filterHeader||this.filterHeader.newSearchRequest$.pipe((0,y.R)(this.onDestroy$)).subscribe(this.onNewSearchRequest.bind(this))}onNewSearchRequest(t){""===t?this.filteredInvites=(0,J.I8)(this.user.projectInvites):(this.filteredInvites=this.user.projectInvites.filter(o=>o.project.name.indexOf(t)>-1),this.filteredInvites=this.filteredInvites.sort((o,r)=>r.project.name.indexOf(t)-o.project.name.indexOf(t)))}onAcceptInvite(t){var o=this;return(0,p.Z)(function*(){o.monitor.isProcessing||(o.monitor.addProcess(),yield(0,c.z)(o.backend.withAuth().mutate({mutation:v.Ps`
          mutation AcceptProjectInvite($inviteId: ID!) {
            acceptProjectInvite(inviteId: $inviteId)
          }
        `,variables:{inviteId:t.id}})))})()}onRejectInvite(t){var o=this;return(0,p.Z)(function*(){o.monitor.isProcessing||(o.monitor.addProcess(),yield(0,c.z)(o.backend.withAuth().mutate({mutation:v.Ps`
          mutation RejectProjectInvite($inviteId: ID!) {
            deleteProjectInvite(inviteId: $inviteId)
          }
        `,variables:{inviteId:t.id}})))})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.v),e.Y36(_t.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invites-tab"]],viewQuery:function(t,o){if(1&t&&e.Gf(te.B,5),2&t){let r;e.iGM(r=e.CRH())&&(o.filterHeader=r.first)}},inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:16,vars:3,consts:[["full-page",""],["searchBar","",2,"flex","1"],["membersFilter",""],[2,"display","flex","flex-direction","column","gap","0.25em"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","100%",3,"dataSource"],["matColumnDef","project"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by project",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden;",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","buttons"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by project"],["mat-cell","",2,"max-width","100px","overflow","hidden"],[3,"project"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type"],["mat-cell",""],[4,"ngIf"],["mat-header-cell",""],[2,"display","flex","justify-content","right"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","",2,"margin-left","0.5em",3,"disabled","click"],["mat-icon-button","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"app-bg-container",0),e._UZ(1,"app-filter-header",1,2)(3,"div",3),e.TgZ(4,"table",4),e.ynx(5,5),e.YNc(6,vt,2,0,"th",6),e.YNc(7,ht,2,1,"td",7),e.BQk(),e.ynx(8,8),e.YNc(9,bt,2,0,"th",9),e.YNc(10,Zt,3,2,"td",10),e.BQk(),e.ynx(11,11),e.YNc(12,yt,1,0,"th",12),e.YNc(13,wt,6,2,"td",10),e.BQk(),e.YNc(14,Ut,1,0,"tr",13),e.YNc(15,At,1,0,"tr",14),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("dataSource",o.filteredInvites),e.xp6(10),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[g.O5,x.lW,j.h,ft.b,Z.Hw,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk,te.B]}),i})();var O=s(2516),It=s(4276),Dt=s(9942),Ot=s(8009),St=s(4614),ie=s(2940);function Yt(i,a){if(1&i&&(e.TgZ(0,"div")(1,"h2"),e._uU(2),e.qZA(),e.TgZ(3,"h4",9),e._uU(4,"ID"),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"h4",9),e._uU(8,"Data"),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA()()),2&i){const t=a.ngIf,o=e.oxw().$implicit,r=e.oxw();e.xp6(2),e.Oqu(null==t?null:t.name),e.xp6(4),e.Oqu(null==o?null:o.identityId),e.xp6(4),e.Oqu(r.getIdentityData(o))}}function Pt(i,a){if(1&i&&(e.TgZ(0,"div",7)(1,"app-card"),e.YNc(2,Yt,11,3,"div",8),e.qZA()()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngIf",o.getIdentityStaticData(t))}}let kt=(()=>{class i{constructor(t,o,r,n,d){this.securityService=t,this.authService=o,this.router=r,this.backend=n,this.uiMessageService=d,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,loaded:!1},this.monitor=new w.y,this.identityData={discord:{name:"Discord"}}}getIdentityData(t){return JSON.stringify(t?.data)}getIdentityStaticData(t){if(t&&t.name)return this.identityData[t.name]}deleteUser(){var t=this;return(0,p.Z)(function*(){let o=`Are you sure you want to delete "${t.user.username}"? There's no going back!`;if(t.securityService.securityContext?.userId===t.user.id&&(o="Are you sure you want to delete your profile? There's no going back!"),!(yield(0,c.z)(t.uiMessageService.confirmDialog(o))))return;t.monitor.addProcess();const n=yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
          mutation DeleteUser($id: ID!) {
            deleteUser(id: $id)
          }
        `,variables:{id:t.user.id}}));t.monitor.removeProcess(),!n.errors&&(t.securityService.securityContext?.userId===t.user.id?t.authService.logout():t.router.navigateByUrl("/users"))})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(F.I),e.Y36(Dt.e),e.Y36(I.F0),e.Y36(C.v),e.Y36(T.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings-tab"]],inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},decls:21,vars:4,consts:[["full-page",""],[2,"display","flex","flex-direction","column","gap","2em"],[2,"display","flex","flex-direction","column","gap","1em"],["column-width","200px",2,"width","100%"],["style","width: 100%;",4,"ngFor","ngForOf"],[2,"width","min-content",3,"matTooltip"],["mat-flat-button","","pill","","tall-button","","color","primary",2,"max-width","20em",3,"disabled","click"],[2,"width","100%"],[4,"ngIf"],[2,"margin-bottom","0.1em"]],template:function(t,o){1&t&&(e.TgZ(0,"app-bg-container",0)(1,"div",1)(2,"div")(3,"h2"),e._uU(4,"Email:"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"h2"),e._uU(9,"Login Identities:"),e.qZA(),e.TgZ(10,"div",2)(11,"app-card-grid",3),e.YNc(12,Pt,3,1,"div",4),e.qZA()()(),e.TgZ(13,"div")(14,"h2"),e._uU(15,"Danger Zone"),e.qZA(),e.TgZ(16,"div",5)(17,"button",6),e.NdJ("click",function(){return o.deleteUser()}),e.TgZ(18,"mat-icon"),e._uU(19,"delete"),e.qZA(),e._uU(20," Delete User "),e.qZA()()()()()),2&t&&(e.xp6(6),e.Oqu(o.user.email),e.xp6(6),e.Q6J("ngForOf",o.user.loginIdentities),e.xp6(4),e.Q6J("matTooltip",o.userOptions.deleteUserTooltip),e.xp6(1),e.Q6J("disabled",!o.userOptions.canDeleteUser||o.monitor.isProcessing))},dependencies:[g.sg,g.O5,U.v,x.lW,j.h,Ot.Y,St.A,Z.Hw,ie.gM]}),i})();function Jt(i,a){if(1&i&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function qt(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Year is required "),e.qZA())}let Bt=(()=>{class i{constructor(t,o,r,n,d){this.backend=o,this.uiMessageService=r,this.dialogRef=n,this.data=d,this.monitor=new w.y,this.form=t.group({year:[null,[l.kI.required]]}),n.disableClose=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return this.uiMessageService.error(t),!1}}save(){var t=this;return(0,p.Z)(function*(){!t.validate()||(yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
          mutation NewEBoardTerm($input: NewEBoardTermInput!) {
            newEBoardTerm(input: $input)
          }
        `,variables:{input:{eBoardId:t.data.eBoardId,year:t.form.get("year")?.value}}}))).errors||(t.uiMessageService.notifyConfirmed("Term created!"),t.exit(!0))})()}getAvailableYears(){const o=[];for(let r=(new Date).getFullYear()+3;r>=2012;r--)this.data.takenYears.includes(r)||o.push(r);return o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(C.v),e.Y36(T.S),e.Y36(_.so),e.Y36(_.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-add-eboard-term-dialog"]],decls:13,vars:5,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"flex","1"],["formControlName","year"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Year"),e.qZA(),e.TgZ(5,"mat-select",2),e.YNc(6,Jt,2,2,"mat-option",3),e.qZA(),e.YNc(7,qt,2,0,"mat-error",4),e.qZA()()(),e.TgZ(8,"mat-dialog-actions")(9,"button",5),e.NdJ("click",function(){return o.exit()}),e._uU(10,"Exit "),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return o.save()}),e._uU(12,"Add "),e.qZA()()),2&t){let r;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngForOf",o.getAvailableYears()),e.xp6(1),e.Q6J("ngIf",null==(r=o.form.get("year"))?null:r.hasError("required")),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing)}},dependencies:[g.sg,g.O5,U.v,x.lW,f.TO,f.KE,f.hX,E.gD,k.ey,l._Y,l.JJ,l.JL,l.sg,l.u,_.xY,_.H8]}),i})();const Nt=["avatarUpload"];let Mt=(()=>{class i{constructor(t,o,r,n,d,m){this.cdn=o,this.backend=r,this.uiMessage=n,this.dialogRef=d,this.data=m,this.monitor=new w.y,this.form=t.group({bio:[m.eBoard.bio,[]]}),this.dialogRef.disableClose=!0}ngAfterViewInit(){setTimeout(()=>{!this.avatarUpload||this.avatarUpload.init(this.cdn.getFileLink(this.data.eBoard.avatarLink))},0)}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return t instanceof Error&&this.uiMessage.error(t.message),!1}}save(){var t=this;return(0,p.Z)(function*(){if(!t.validate()||!t.avatarUpload)return;t.monitor.addProcess();const o={id:t.data.eBoard.id};if(t.form.get("bio")!==t.data.eBoard.bio&&(o.bio=t.form.get("bio")?.value),t.avatarUpload.edited&&(o.avatar=t.avatarUpload.value?{upload:t.avatarUpload.value,operation:b.f0.Insert}:{operation:b.f0.Delete}),Object.keys(o).length>1){const r=yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
            mutation UpdateEBoard($input: UpdateEBoardInput!) {
              updateEBoard(input: $input)
            }
          `,variables:{input:o}}));if(t.monitor.removeProcess(),r.errors)return void t.uiMessage.error("Error uploading data!");t.exit(!0)}})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(M.U),e.Y36(C.v),e.Y36(T.S),e.Y36(_.so),e.Y36(_.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-eboard-dialog"]],viewQuery:function(t,o){if(1&t&&e.Gf(Nt,5),2&t){let r;e.iGM(r=e.CRH())&&(o.avatarUpload=r.first)}},decls:19,vars:5,consts:[[2,"position","relative",3,"formGroup"],[1,"background-color-divider",2,"width","100%","height","12.5em","border-radius","0.25em","overflow","hidden"],[2,"--size","8em","--offset","calc(var(--size) / 2)","--offset-left-over","calc(var(--size) - var(--offset))","position","relative","height","var(--offset-left-over)","margin-bottom","1em"],[1,"outline-color-card",2,"left","2em","top","calc(-1 * var(--offset))","position","absolute","height","var(--size)","width","var(--size)","border-radius","8em","overflow","hidden","outline-style","solid","outline-width","0.25em"],[1,"background-color-card",2,"width","100%","height","100%"],["fileSizeLimit","5 MB"],["avatarUpload",""],["appearance","outline",1,"no-padding",2,"width","100%","line-height","1.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","bio",3,"maxLength"],["align","end"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0),e._UZ(2,"div",1),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"app-image-upload",5,6),e.qZA()()(),e.TgZ(8,"mat-form-field",7)(9,"mat-label"),e._uU(10,"Bio"),e.qZA(),e._UZ(11,"textarea",8),e.TgZ(12,"mat-hint",9),e._uU(13),e.qZA()()()(),e.TgZ(14,"mat-dialog-actions")(15,"button",10),e.NdJ("click",function(){return o.exit()}),e._uU(16,"Exit "),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return o.save()}),e._uU(18,"Save "),e.qZA()()),2&t){let r;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(10),e.Q6J("maxLength",600),e.xp6(2),e.hij("",(null==(r=o.form.get("bio"))||null==r.value?null:r.value.length)||0,"/600"),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing)}},dependencies:[U.v,x.lW,f.KE,f.bx,f.hX,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,V.IC,Y.Nt,X.J,_.xY,_.H8]}),i})();function Qt(i,a){if(1&i&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function jt(i,a){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Year is required "),e.qZA())}let Rt=(()=>{class i{constructor(t,o,r,n,d,m){this.backend=o,this.uiMessage=r,this.rolesService=n,this.dialogRef=d,this.data=m,this.monitor=new w.y,this.rolesEdited=!1,this.roles=[],this.acceptedRoles=[],this.disabledRoles=[],this.form=t.group({year:[m.term.year,[l.kI.required]]}),this.dialogRef.disableClose=!0}ngOnInit(){var t=this;return(0,p.Z)(function*(){t.rolesEdited=!1,t.roles=t.data.term.roles?.map(o=>o?.roleCode)??[],t.acceptedRoles=yield t.rolesService.getAddableEBoardTermRoles(),t.disabledRoles=yield t.rolesService.getDisabledEBoardTermRoles()})()}onEditRoles(){this.rolesEdited=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return this.uiMessage.error(t),!1}}save(){var t=this;return(0,p.Z)(function*(){if(!t.validate())return;const o={id:t.data.term.id};t.form.get("year")?.value!==t.data.term.year&&(o.year=t.form.get("year")?.value),t.rolesEdited&&(o.roles=t.roles),(yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
          mutation UpdateEBoardTerm($input: UpdateEBoardTermInput!) {
            updateEBoardTerm(input: $input)
          }
        `,variables:{input:o}}))).errors?t.uiMessage.error("Error uploading data!"):t.exit(!0)})()}getAvailableYears(){const t=(new Date).getFullYear(),o=[this.data.term.year];for(let r=t+3;r>=2012;r--)this.data.takenYears.includes(r)||o.push(r);return o}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.qu),e.Y36(A.v$),e.Y36(T.S),e.Y36(A.fu),e.Y36(_.so),e.Y36(_.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-eboard-term-dialog"]],decls:15,vars:9,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"flex","1"],["formControlName","year"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["label","Roles",3,"roles","allRoles","disabledRoles","disabled","rolesEdited"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[3,"value"]],template:function(t,o){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Year"),e.qZA(),e.TgZ(5,"mat-select",2),e.YNc(6,Qt,2,2,"mat-option",3),e.qZA(),e.YNc(7,jt,2,0,"mat-error",4),e.qZA(),e.TgZ(8,"div")(9,"app-role-codes-editor",5),e.NdJ("rolesEdited",function(){return o.onEditRoles()}),e.qZA()()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",6),e.NdJ("click",function(){return o.exit()}),e._uU(12,"Exit "),e.qZA(),e.TgZ(13,"button",6),e.NdJ("click",function(){return o.save()}),e._uU(14,"Save "),e.qZA()()),2&t){let r;e.xp6(1),e.Q6J("formGroup",o.form),e.xp6(5),e.Q6J("ngForOf",o.getAvailableYears()),e.xp6(1),e.Q6J("ngIf",null==(r=o.form.get("year"))?null:r.hasError("required")),e.xp6(2),e.Q6J("roles",o.roles)("allRoles",o.acceptedRoles)("disabledRoles",o.disabledRoles)("disabled",!o.data.userOptions.canManageEBoardRoles),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",o.monitor.isProcessing)}},dependencies:[g.sg,g.O5,U.v,x.lW,f.TO,f.KE,f.hX,E.gD,k.ey,K.K,l._Y,l.JJ,l.JL,l.sg,l.u,_.xY,_.H8]}),i})();function Ft(i,a){1&i&&(e.TgZ(0,"th",20),e._uU(1," Year "),e.qZA())}function $t(i,a){if(1&i&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.year," ")}}function zt(i,a){1&i&&(e.TgZ(0,"th",22),e._uU(1," Roles "),e.qZA())}function Ht(i,a){if(1&i&&(e.TgZ(0,"td",23),e._UZ(1,"app-roles-display",24),e.qZA()),2&i){const t=a.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("roles",o.getTermRoles(t))}}function Lt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"th",25)(1,"div",26)(2,"button",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onAddTerm())}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA(),e._uU(5," Add Term "),e.qZA()()()}}function Gt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",28)(1,"div",26)(2,"button",29),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.onEditTerm(n))}),e.TgZ(3,"mat-icon"),e._uU(4,"edit"),e.qZA()(),e.TgZ(5,"button",30),e.NdJ("click",function(){const n=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.onDeleteTerm(n))}),e.TgZ(6,"mat-icon"),e._uU(7,"cancel"),e.qZA()()()()}if(2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",t.monitor.isProcessing),e.xp6(3),e.Q6J("disabled",t.monitor.isProcessing)}}function Kt(i,a){1&i&&e._UZ(0,"tr",31)}function Vt(i,a){1&i&&e._UZ(0,"tr",32)}function Xt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"h2"),e._uU(3,"E-Board"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-eboard-profile",4),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onEditEBoard())}),e.TgZ(8,"mat-icon"),e._uU(9,"edit"),e.qZA()()()()(),e.TgZ(10,"h2"),e._uU(11,"Terms"),e.qZA(),e.TgZ(12,"table",7),e.ynx(13,8),e.YNc(14,Ft,2,0,"th",9),e.YNc(15,$t,2,1,"td",10),e.BQk(),e.ynx(16,11),e.YNc(17,zt,2,0,"th",12),e.YNc(18,Ht,2,1,"td",13),e.BQk(),e.ynx(19,14),e.YNc(20,Lt,6,0,"th",15),e.YNc(21,Gt,8,2,"td",16),e.BQk(),e.YNc(22,Kt,1,0,"tr",17),e.YNc(23,Vt,1,0,"tr",18),e.qZA(),e.TgZ(24,"h2"),e._uU(25,"Danger Zone"),e.qZA(),e.TgZ(26,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onDeleteEBoard())}),e.TgZ(27,"mat-icon"),e._uU(28,"delete"),e.qZA(),e._uU(29," Delete E-Board "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(5),e.Q6J("eBoard",t.user.eBoard),e.xp6(7),e.Q6J("dataSource",t.getEBoardTerms()),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(3),e.Q6J("disabled",!t.userOptions.canManageEBoard||t.monitor.isProcessing)}}function Wt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Actions"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onCreateEBoard())}),e.TgZ(4,"mat-icon"),e._uU(5,"add"),e.qZA(),e._uU(6," Create E-Board "),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.userOptions.canManageEBoard||t.monitor.isProcessing)}}let ei=(()=>{class i{constructor(t,o,r){this.uiMessage=t,this.backend=o,this.dialog=r,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,loaded:!1},this.displayedColumns=["year","roles","buttons"],this.monitor=new w.y}getEBoardTerms(){return this.user.eBoard?.terms??[]}getTermRoles(t){return t.roles?.map(o=>o?.roleCode)??[]}onAddTerm(){var t=this;return(0,p.Z)(function*(){!(yield(0,c.z)(t.dialog.open(Bt,{data:{eBoardId:t.user.eBoard?.id,takenYears:t.user.eBoard?.terms?.map(r=>r?.year)??[]},width:"37.5em",maxWidth:"90vw"}).afterClosed()))||t.edited.emit()})()}onEditTerm(t){var o=this;return(0,p.Z)(function*(){!(yield(0,c.z)(o.dialog.open(Rt,{data:{term:t,takenYears:o.user.eBoard?.terms?.map(n=>n?.year)??[],userOptions:o.userOptions},width:"37.5em",maxWidth:"90vw"}).afterClosed()))||o.edited.emit()})()}onDeleteTerm(t){var o=this;return(0,p.Z)(function*(){!(yield(0,c.z)(o.uiMessage.confirmDialog("Are you sure you want to delete this term?")))||(yield(0,c.z)(o.backend.withAuth().mutate({mutation:v.Ps`
          mutation DeleteEBoardTerm($id: ID!) {
            deleteEBoardTerm(id: $id)
          }
        `,variables:{id:t.id}}))).errors||(o.uiMessage.notifyInfo("Term deleted!"),o.edited.emit())})()}onCreateEBoard(){var t=this;return(0,p.Z)(function*(){!(yield(0,c.z)(t.uiMessage.confirmDialog("Are you sure you want to create an e-board profile?")))||(yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
          mutation NewEBoard($input: NewEBoardInput!) {
            newEBoard(input: $input)
          }
        `,variables:{input:{userId:t.user.id}}}))).errors||(t.uiMessage.notifyConfirmed("EBoard profile created!"),t.edited.emit())})()}onEditEBoard(){var t=this;return(0,p.Z)(function*(){!(yield(0,c.z)(t.dialog.open(Mt,{data:{eBoard:t.user.eBoard},width:"37.5em",maxWidth:"90vw"}).afterClosed()))||t.edited.emit()})()}onDeleteEBoard(){var t=this;return(0,p.Z)(function*(){if(!(yield(0,c.z)(t.uiMessage.confirmDialog("Are you sure you want to delete the e-board profile?"))))return;const r=yield(0,c.z)(t.backend.withAuth().mutate({mutation:v.Ps`
          mutation DeleteEBoard($id: ID!) {
            deleteEBoard(id: $id)
          }
        `,variables:{id:t.user.eBoard?.id}}));console.log("finish"),console.log(r.errors),!r.errors&&(t.uiMessage.notifyConfirmed("EBoard profile created!"),t.edited.emit())})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.S),e.Y36(C.v),e.Y36(_.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-eboard-tab"]],inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},decls:3,vars:2,consts:[["full-page",""],[4,"ngIf"],[2,"margin-bottom","2em"],[2,"display","flex","flex-direction","row","gap","1em"],[2,"flex","1",3,"eBoard"],[2,"display","flex","flex-direction","column","justify-content","center","gap","0.5em"],["mat-icon-button","",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","100%","margin-bottom","2em",3,"dataSource"],["matColumnDef","year"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden;",4,"matCellDef"],["matColumnDef","roles"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden; padding: 1em",4,"matCellDef"],["matColumnDef","buttons"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-flat-button","","pill","","tall-button","","color","primary",2,"max-width","20em",3,"disabled","click"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year"],["mat-cell","",2,"max-width","100px","overflow","hidden"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"max-width","100px","overflow","hidden","padding","1em"],[3,"roles"],["mat-header-cell",""],[2,"display","flex","justify-content","right"],["mat-stroked-button","","pill","",1,"text-foreground",3,"click"],["mat-cell",""],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","",2,"margin-left","0.5em",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"app-bg-container",0),e.YNc(1,Xt,30,5,"div",1),e.YNc(2,Wt,7,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",o.user.eBoard),e.xp6(1),e.Q6J("ngIf",!o.user.eBoard))},dependencies:[g.O5,U.v,x.lW,j.h,Q.l,ee,Z.Hw,u.BZ,u.fO,u.as,u.w1,u.Dz,u.nj,u.ge,u.ev,u.XQ,u.Gk]}),i})();var ti=s(9518);const ii=[{path:"",component:$}];let oi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[I.Bz.forChild(ii),g.ez,he.I,B.Qd,be.m,z.t,E.LD,xe.U,Te.z,Z.Ps,f.lN,l.UX,Y.c,T.o,Ze.l,P.Mc,I.Bz,O.Nh,u.p0,It.J,_.Is,B.Qd,ti.I,ie.AV]}),i})();e.B6R($,function(){return[g.O5,Z.Hw,O.SP,O.uD,O.uX,O.Vc,gt,Et,kt,ei]},[])}}]);