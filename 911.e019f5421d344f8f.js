"use strict";(self.webpackChunkrucogs_website=self.webpackChunkrucogs_website||[]).push([[911],{4614:(de,N,l)=>{l.d(N,{A:()=>s});var u=l(4537),T=l(8692);const E=function(c){return{outlined:c}},D=["*"];let s=(()=>{class c{constructor(b){this.color="blank",this.hover="",this.outlined=null!=b}ngOnInit(){}}return c.\u0275fac=function(b){return new(b||c)(u.$8M("outlined"))},c.\u0275cmp=u.Xpm({type:c,selectors:[["app-card"]],inputs:{color:"color",hover:"hover"},ngContentSelectors:D,decls:2,vars:7,consts:[[3,"ngClass"]],template:function(b,Z){1&b&&(u.F$t(),u.TgZ(0,"div",0),u.Hsn(1),u.qZA()),2&b&&(u.MT6("app-card card ",Z.color," ",Z.hover,""),u.Q6J("ngClass",u.VKq(5,E,Z.outlined)))},dependencies:[T.mk],styles:["[_nghost-%COMP%]{display:flex}.card[_ngcontent-%COMP%]{display:block;position:relative;width:auto;height:100%;width:100%;border-style:solid;border-width:2px;border-radius:8px;padding:2.25em;box-sizing:border-box}.outlined[_ngcontent-%COMP%]{border-width:2px}"]}),c})()},8911:(de,N,l)=>{l.r(N),l.d(N,{UserPageModule:()=>Ti});var u=l(8692),T=l(3331),E=l(2516),D=l(3178),s=l(92),c=l(4536),m=l(8659),b=l(7406),Z=l(8033),v=l(317),G=l(3756),H=l(4022),V=l(6883),Y=l(7763),e=l(4537);let ce=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Y.I,s.UX,m.lN,v.p0,V.U,T.Ps,c.Is,Z.LD,H.l,b.c,G.v]}),o})();var K=l(4276),q=l(9910);let ue=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Y.I,K.J,q.Qd,T.Ps,K.J,v.p0]}),o})();var x=l(9638),O=l(1379),S=l(3704),X=l(6438),W=l(7950),me=l(9518),pe=l(335);let ge=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,c.Is,m.lN,S.FA,O.XK,me.I,pe.z,X.t,V.U,q.Qd,T.Ps,Z.LD,H.l,s.UX,x.ot,W.c,b.c,G.v]}),o})();var ee=l(2940),fe=l(6004);let _e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.ez,Y.I,fe.m,ee.AV,T.Ps,c.Is,m.lN,b.c,s.UX,Z.LD,W.c]}),o})();var g=l(8239),M=l(9860),h=l(3556),_=l(274),Q=l(8023),p=l(7445),A=l(3528),k=l(7545),w=l(831),te=l(1241),C=l(5208),I=l(4583),U=l(2709);function ve(o,r){if(1&o&&(e.TgZ(0,"mat-option",6),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function he(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Year is required "),e.qZA())}let be=(()=>{class o{constructor(t,i,n,a,d){this.backend=i,this.uiMessageService=n,this.dialogRef=a,this.data=d,this.monitor=new I.y,this.form=t.group({year:[null,[s.kI.required]]}),a.disableClose=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return this.uiMessageService.error(t),!1}}save(){var t=this;return(0,g.Z)(function*(){!t.validate()||(yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation NewEBoardTerm($input: NewEBoardTermInput!) {
            newEBoardTerm(input: $input)
          }
        `,variables:{input:{eBoardId:t.data.eBoardId,year:t.form.get("year")?.value}}}))).errors||(t.uiMessageService.notifyConfirmed("Term created!"),t.exit(!0))})()}getAvailableYears(){const i=[];for(let n=(new Date).getFullYear()+3;n>=2012;n--)this.data.takenYears.includes(n)||i.push(n);return i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(w.v),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-eboard-term-dialog"]],decls:13,vars:5,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"flex","1"],["formControlName","year"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Year"),e.qZA(),e.TgZ(5,"mat-select",2),e.YNc(6,ve,2,2,"mat-option",3),e.qZA(),e.YNc(7,he,2,0,"mat-error",4),e.qZA()()(),e.TgZ(8,"mat-dialog-actions")(9,"button",5),e.NdJ("click",function(){return i.exit()}),e._uU(10,"Exit "),e.qZA(),e.TgZ(11,"button",5),e.NdJ("click",function(){return i.save()}),e._uU(12,"Add "),e.qZA()()),2&t){let n;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngForOf",i.getAvailableYears()),e.xp6(1),e.Q6J("ngIf",null==(n=i.form.get("year"))?null:n.hasError("required")),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.sg,u.O5,U.v,x.lW,s._Y,s.JJ,s.JL,s.sg,s.u,m.TO,m.KE,m.hX,c.xY,c.H8,Z.gD,O.ey]}),o})();var B=l(6440),ie=l(2272),j=l(7025);const ye=["avatarUpload"];let Te=(()=>{class o{constructor(t,i,n,a,d,f){this.cdn=i,this.backend=n,this.uiMessage=a,this.dialogRef=d,this.data=f,this.monitor=new I.y,this.form=t.group({bio:[f.eBoard.bio,[]]}),this.dialogRef.disableClose=!0}ngAfterViewInit(){setTimeout(()=>{!this.avatarUpload||this.avatarUpload.init(this.cdn.getFileLink(this.data.eBoard.avatarLink))},0)}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return t instanceof Error&&this.uiMessage.error(t.message),!1}}save(){var t=this;return(0,g.Z)(function*(){if(!t.validate()||!t.avatarUpload)return;t.monitor.addProcess();const i={id:t.data.eBoard.id};if(t.form.get("bio")!==t.data.eBoard.bio&&(i.bio=t.form.get("bio")?.value),t.avatarUpload.edited&&(i.avatar=t.avatarUpload.value?{upload:t.avatarUpload.value,operation:h.f0.Insert}:{operation:h.f0.Delete}),Object.keys(i).length>1){const n=yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
            mutation UpdateEBoard($input: UpdateEBoardInput!) {
              updateEBoard(input: $input)
            }
          `,variables:{input:i}}));if(t.monitor.removeProcess(),n.errors)return void t.uiMessage.error("Error uploading data!");t.exit(!0)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(B.U),e.Y36(w.v),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-eboard-dialog"]],viewQuery:function(t,i){if(1&t&&e.Gf(ye,5),2&t){let n;e.iGM(n=e.CRH())&&(i.avatarUpload=n.first)}},decls:19,vars:5,consts:[[2,"position","relative",3,"formGroup"],[1,"background-color-divider",2,"width","100%","height","12.5em","border-radius","0.25em","overflow","hidden"],[2,"--size","8em","--offset","calc(var(--size) / 2)","--offset-left-over","calc(var(--size) - var(--offset))","position","relative","height","var(--offset-left-over)","margin-bottom","1em"],[1,"outline-color-card",2,"left","2em","top","calc(-1 * var(--offset))","position","absolute","height","var(--size)","width","var(--size)","border-radius","8em","overflow","hidden","outline-style","solid","outline-width","0.25em"],[1,"background-color-card",2,"width","100%","height","100%"],["fileSizeLimit","5 MB"],["avatarUpload",""],["appearance","outline",1,"no-padding",2,"width","100%","line-height","1.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","bio",3,"maxLength"],["align","end"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0),e._UZ(2,"div",1),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4),e._UZ(6,"app-image-upload",5,6),e.qZA()()(),e.TgZ(8,"mat-form-field",7)(9,"mat-label"),e._uU(10,"Bio"),e.qZA(),e._UZ(11,"textarea",8),e.TgZ(12,"mat-hint",9),e._uU(13),e.qZA()()()(),e.TgZ(14,"mat-dialog-actions")(15,"button",10),e.NdJ("click",function(){return i.exit()}),e._uU(16,"Exit "),e.qZA(),e.TgZ(17,"button",10),e.NdJ("click",function(){return i.save()}),e._uU(18,"Save "),e.qZA()()),2&t){let n;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(10),e.Q6J("maxLength",600),e.xp6(2),e.hij("",(null==(n=i.form.get("bio"))||null==n.value?null:n.value.length)||0,"/600"),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[U.v,x.lW,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,m.KE,m.bx,m.hX,c.xY,c.H8,ie.J,j.IC,b.Nt]}),o})();var oe=l(2842);function xe(o,r){if(1&o&&(e.TgZ(0,"mat-option",7),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ze(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Year is required "),e.qZA())}let Ce=(()=>{class o{constructor(t,i,n,a,d,f){this.backend=i,this.uiMessage=n,this.rolesService=a,this.dialogRef=d,this.data=f,this.monitor=new I.y,this.rolesEdited=!1,this.roles=[],this.acceptedRoles=[],this.disabledRoles=[],this.form=t.group({year:[f.term.year,[s.kI.required]]}),this.dialogRef.disableClose=!0}ngOnInit(){var t=this;return(0,g.Z)(function*(){t.rolesEdited=!1,t.roles=t.data.term.roles?.map(i=>i?.roleCode)??[],t.acceptedRoles=yield t.rolesService.getAddableEBoardTermRoles(),t.disabledRoles=yield t.rolesService.getDisabledEBoardTermRoles()})()}onEditRoles(){this.rolesEdited=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return this.uiMessage.error(t),!1}}save(){var t=this;return(0,g.Z)(function*(){if(!t.validate())return;const i={id:t.data.term.id};t.form.get("year")?.value!==t.data.term.year&&(i.year=t.form.get("year")?.value),t.rolesEdited&&(i.roles=t.roles),(yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation UpdateEBoardTerm($input: UpdateEBoardTermInput!) {
            updateEBoardTerm(input: $input)
          }
        `,variables:{input:i}}))).errors?t.uiMessage.error("Error uploading data!"):t.exit(!0)})()}getAvailableYears(){const t=(new Date).getFullYear(),i=[this.data.term.year];for(let n=t+3;n>=2012;n--)this.data.takenYears.includes(n)||i.push(n);return i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(k.v$),e.Y36(C.S),e.Y36(k.fu),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-eboard-term-dialog"]],decls:15,vars:9,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"flex","1"],["formControlName","year"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["label","Roles",3,"roles","allRoles","disabledRoles","disabled","rolesEdited"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[3,"value"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Year"),e.qZA(),e.TgZ(5,"mat-select",2),e.YNc(6,xe,2,2,"mat-option",3),e.qZA(),e.YNc(7,Ze,2,0,"mat-error",4),e.qZA(),e.TgZ(8,"div")(9,"app-role-codes-editor",5),e.NdJ("rolesEdited",function(){return i.onEditRoles()}),e.qZA()()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",6),e.NdJ("click",function(){return i.exit()}),e._uU(12,"Exit "),e.qZA(),e.TgZ(13,"button",6),e.NdJ("click",function(){return i.save()}),e._uU(14,"Save "),e.qZA()()),2&t){let n;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngForOf",i.getAvailableYears()),e.xp6(1),e.Q6J("ngIf",null==(n=i.form.get("year"))?null:n.hasError("required")),e.xp6(2),e.Q6J("roles",i.roles)("allRoles",i.acceptedRoles)("disabledRoles",i.disabledRoles)("disabled",!i.data.userOptions.canManageEBoardRoles),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.sg,u.O5,U.v,x.lW,s._Y,s.JJ,s.JL,s.sg,s.u,m.TO,m.KE,m.hX,oe.K,c.xY,c.H8,Z.gD,O.ey]}),o})();var R=l(6410),L=l(398),F=l(1063),Ie=l(9439),Ue=l(3223),ne=l(6387);function we(o,r){1&o&&(e.TgZ(0,"p",7),e._uU(1,"Empty for now..."),e.qZA())}function Ae(o,r){if(1&o&&e._UZ(0,"app-roles-display",8),2&o){const t=e.oxw();e.Q6J("roles",t.getRoles())}}function Ee(o,r){if(1&o&&(e.TgZ(0,"app-tag",10),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.getEBoardReign())}}function ke(o,r){if(1&o&&(e.TgZ(0,"div",9)(1,"app-tag",10),e._uU(2,"\u{1f4ab} EBoard Alumni"),e.qZA(),e.YNc(3,Ee,2,1,"app-tag",11),e.qZA()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngIf",t.getEBoardReign())}}let re=(()=>{class o{constructor(t){this.cdn=t,this.eBoard={}}ngOnInit(){}hasRoles(){const t=(0,F.N)();return void 0!==this.eBoard.terms?.find(i=>i?.year===t)}getRoles(){const t=(0,F.N)();return this.eBoard.terms&&this.eBoard.terms.length>0?this.eBoard.terms.find(i=>i?.year===t)?.roles?.map(i=>i?.roleCode)??[]:[]}getEBoardReign(){if((new Date).getFullYear(),this.eBoard.terms&&this.eBoard.terms.length>0){if(!this.eBoard.terms[0]?.year)return"";let i=this.eBoard.terms[0].year,n=this.eBoard.terms[0].year;for(const a of this.eBoard.terms)!a?.year||(a.year<i&&(i=a.year),a.year>n&&(n=a.year));return`${i} - ${n}`}return""}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(B.U))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-eboard-profile"]],inputs:{eBoard:"eBoard"},decls:10,vars:5,consts:[["breakable-styles","","prebreak-style","\n    flex-direction: row; \n  ","break-style","\n    flex-direction: column;\n  ","break-on","width < 840",2,"display","flex","gap","0.5em 1.5em"],["size","large",3,"avatarSrc"],[2,"display","flex","flex-direction","column","max-height","100%"],["class","app-eboard-profile text-disabled",4,"ngIf"],[2,"flex","1"],[3,"roles",4,"ngIf"],["style","\n      display: flex;\n      flex-direction: row;\n      gap: 0.5em;\n      flex-wrap: wrap;\n    ",4,"ngIf"],[1,"app-eboard-profile","text-disabled"],[3,"roles"],[2,"display","flex","flex-direction","row","gap","0.5em","flex-wrap","wrap"],["color","blank"],["color","blank",4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-avatar",1),e.TgZ(2,"div",2)(3,"h2"),e._uU(4,"Bio"),e.qZA(),e.YNc(5,we,2,0,"p",3),e.TgZ(6,"p",4),e._uU(7),e.qZA(),e.YNc(8,Ae,1,1,"app-roles-display",5),e.YNc(9,ke,4,1,"div",6),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("avatarSrc",i.cdn.getFileLink(i.eBoard.avatarLink)),e.xp6(4),e.Q6J("ngIf",!i.eBoard.bio),e.xp6(2),e.Oqu(i.eBoard.bio),e.xp6(1),e.Q6J("ngIf",i.hasRoles()),e.xp6(1),e.Q6J("ngIf",!i.hasRoles()))},dependencies:[u.O5,Ie.l,L.l,Ue.A,ne.Z]}),o})();function De(o,r){1&o&&(e.TgZ(0,"th",20),e._uU(1," Year "),e.qZA())}function Oe(o,r){if(1&o&&(e.TgZ(0,"td",21),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.hij(" ",t.year," ")}}function Pe(o,r){1&o&&(e.TgZ(0,"th",22),e._uU(1," Roles "),e.qZA())}function Je(o,r){if(1&o&&(e.TgZ(0,"td",23),e._UZ(1,"app-roles-display",24),e.qZA()),2&o){const t=r.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("roles",i.getTermRoles(t))}}function Ne(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"th",25)(1,"div",26)(2,"button",27),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onAddTerm())}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA(),e._uU(5," Add Term "),e.qZA()()()}}function Se(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td",28)(1,"div",26)(2,"button",29),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.onEditTerm(a))}),e.TgZ(3,"mat-icon"),e._uU(4,"edit"),e.qZA()(),e.TgZ(5,"button",30),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.onDeleteTerm(a))}),e.TgZ(6,"mat-icon"),e._uU(7,"cancel"),e.qZA()()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",t.monitor.isProcessing),e.xp6(3),e.Q6J("disabled",t.monitor.isProcessing)}}function Ye(o,r){1&o&&e._UZ(0,"tr",31)}function qe(o,r){1&o&&e._UZ(0,"tr",32)}function Me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",2)(2,"h2"),e._uU(3,"E-Board"),e.qZA(),e.TgZ(4,"div",3),e._UZ(5,"app-eboard-profile",4),e.TgZ(6,"div",5)(7,"button",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onEditEBoard())}),e.TgZ(8,"mat-icon"),e._uU(9,"edit"),e.qZA()()()()(),e.TgZ(10,"h2"),e._uU(11,"Terms"),e.qZA(),e.TgZ(12,"table",7),e.ynx(13,8),e.YNc(14,De,2,0,"th",9),e.YNc(15,Oe,2,1,"td",10),e.BQk(),e.ynx(16,11),e.YNc(17,Pe,2,0,"th",12),e.YNc(18,Je,2,1,"td",13),e.BQk(),e.ynx(19,14),e.YNc(20,Ne,6,0,"th",15),e.YNc(21,Se,8,2,"td",16),e.BQk(),e.YNc(22,Ye,1,0,"tr",17),e.YNc(23,qe,1,0,"tr",18),e.qZA(),e.TgZ(24,"h2"),e._uU(25,"Danger Zone"),e.qZA(),e.TgZ(26,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onDeleteEBoard())}),e.TgZ(27,"mat-icon"),e._uU(28,"delete"),e.qZA(),e._uU(29," Delete E-Board "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("eBoard",t.user.eBoard),e.xp6(7),e.Q6J("dataSource",t.getEBoardTerms()),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(3),e.Q6J("disabled",!t.userOptions.canManageEBoard||t.monitor.isProcessing)}}function Qe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"h2"),e._uU(2,"Actions"),e.qZA(),e.TgZ(3,"button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onCreateEBoard())}),e.TgZ(4,"mat-icon"),e._uU(5,"add"),e.qZA(),e._uU(6," Create E-Board "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.userOptions.canManageEBoard||t.monitor.isProcessing)}}let Be=(()=>{class o{constructor(t,i,n){this.uiMessage=t,this.backend=i,this.dialog=n,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,canManageMetadata:!1,canManageProjectInvites:!1,canUpdateUserPrivate:!1,canCreateProject:!1,loaded:!1},this.displayedColumns=["year","roles","buttons"],this.monitor=new I.y}getEBoardTerms(){return this.user.eBoard?.terms??[]}getTermRoles(t){return t.roles?.map(i=>i?.roleCode)??[]}onAddTerm(){var t=this;return(0,g.Z)(function*(){!(yield(0,p.z)(t.dialog.open(be,{data:{eBoardId:t.user.eBoard?.id,takenYears:t.user.eBoard?.terms?.map(n=>n?.year)??[]},width:"37.5em",maxWidth:"90vw"}).afterClosed()))||t.edited.emit()})()}onEditTerm(t){var i=this;return(0,g.Z)(function*(){!(yield(0,p.z)(i.dialog.open(Ce,{data:{term:t,takenYears:i.user.eBoard?.terms?.map(a=>a?.year)??[],userOptions:i.userOptions},width:"37.5em",maxWidth:"90vw"}).afterClosed()))||i.edited.emit()})()}onDeleteTerm(t){var i=this;return(0,g.Z)(function*(){!(yield(0,p.z)(i.uiMessage.confirmDialog("Are you sure you want to delete this term?")))||(yield(0,p.z)(i.backend.withAuth().mutate({mutation:_.Ps`
          mutation DeleteEBoardTerm($id: ID!) {
            deleteEBoardTerm(id: $id)
          }
        `,variables:{id:t.id}}))).errors||(i.uiMessage.notifyInfo("Term deleted!"),i.edited.emit())})()}onCreateEBoard(){var t=this;return(0,g.Z)(function*(){!(yield(0,p.z)(t.uiMessage.confirmDialog("Are you sure you want to create an e-board profile?")))||(yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation NewEBoard($input: NewEBoardInput!) {
            newEBoard(input: $input)
          }
        `,variables:{input:{userId:t.user.id}}}))).errors||(t.uiMessage.notifyConfirmed("EBoard profile created!"),t.edited.emit())})()}onEditEBoard(){var t=this;return(0,g.Z)(function*(){!(yield(0,p.z)(t.dialog.open(Te,{data:{eBoard:t.user.eBoard},width:"37.5em",maxWidth:"90vw"}).afterClosed()))||t.edited.emit()})()}onDeleteEBoard(){var t=this;return(0,g.Z)(function*(){!(yield(0,p.z)(t.uiMessage.confirmDialog("Are you sure you want to delete the e-board profile?")))||(yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation DeleteEBoard($id: ID!) {
            deleteEBoard(id: $id)
          }
        `,variables:{id:t.user.eBoard?.id}}))).errors||(t.uiMessage.notifyConfirmed("EBoard profile created!"),t.edited.emit())})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.S),e.Y36(w.v),e.Y36(c.uw))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-eboard-tab"]],inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},decls:3,vars:2,consts:[["full-page",""],[4,"ngIf"],[2,"margin-bottom","2em"],[2,"display","flex","flex-direction","row","gap","1em"],[2,"flex","1",3,"eBoard"],[2,"display","flex","flex-direction","column","justify-content","center","gap","0.5em"],["mat-icon-button","",3,"click"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","100%","margin-bottom","2em",3,"dataSource"],["matColumnDef","year"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden;",4,"matCellDef"],["matColumnDef","roles"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden; padding: 1em",4,"matCellDef"],["matColumnDef","buttons"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-flat-button","","pill","","tall-button","","color","primary",2,"max-width","20em",3,"disabled","click"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by year"],["mat-cell","",2,"max-width","100px","overflow","hidden"],["mat-header-cell","","mat-sort-header",""],["mat-cell","",2,"max-width","100px","overflow","hidden","padding","1em"],[3,"roles"],["mat-header-cell",""],[2,"display","flex","justify-content","right"],["mat-stroked-button","","pill","",1,"text-foreground",3,"click"],["mat-cell",""],["mat-icon-button","",3,"disabled","click"],["mat-icon-button","",2,"margin-left","0.5em",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"app-bg-container",0),e.YNc(1,Me,30,5,"div",1),e.YNc(2,Qe,7,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",i.user.eBoard),e.xp6(1),e.Q6J("ngIf",!i.user.eBoard))},dependencies:[u.O5,U.v,x.lW,R.h,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,L.l,T.Hw,re]}),o})();function je(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Name is required "),e.qZA())}function Re(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Identity ID is required "),e.qZA())}let Le=(()=>{class o{constructor(t,i,n,a,d){this.backend=i,this.uiMessageService=n,this.dialogRef=a,this.data=d,this.monitor=new I.y,this.form=t.group({name:[null,[s.kI.required]],identityId:[null,[s.kI.required]]}),a.disableClose=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return this.uiMessageService.error(t),!1}}save(){var t=this;return(0,g.Z)(function*(){!t.validate()||(yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation NewUserLoginIdentity($input: NewUserLoginIdentityInput!) {
            newUserLoginIdentity(input: $input)
          }
        `,variables:{input:{userId:t.data.userId,name:t.form.get("name")?.value,identityId:t.form.get("identityId")?.value}}}))).errors||(t.uiMessageService.notifyConfirmed("Login identity created!"),t.exit(!0))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(w.v),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-login-identity-dialog"]],decls:17,vars:5,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","identityId"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",2),e.YNc(6,je,2,0,"mat-error",3),e.qZA(),e.TgZ(7,"mat-form-field",1)(8,"mat-label"),e._uU(9,"Identity ID"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,Re,2,0,"mat-error",3),e.qZA()()(),e.TgZ(12,"mat-dialog-actions")(13,"button",5),e.NdJ("click",function(){return i.exit()}),e._uU(14,"Exit "),e.qZA(),e.TgZ(15,"button",5),e.NdJ("click",function(){return i.save()}),e._uU(16,"Add "),e.qZA()()),2&t){let n,a;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngIf",null==(n=i.form.get("name"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(a=i.form.get("identityId"))?null:a.hasError("required")),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.O5,U.v,x.lW,c.xY,c.H8,m.TO,m.KE,m.hX,b.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),o})();function Fe(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Name is required "),e.qZA())}function $e(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Identity ID is required "),e.qZA())}let ze=(()=>{class o{constructor(t,i,n,a,d){this.backend=i,this.uiMessage=n,this.dialogRef=a,this.data=d,this.monitor=new I.y,this.form=t.group({name:[d.loginIdentity.name,[s.kI.required]],identityId:[d.loginIdentity.identityId,[s.kI.required]],data:[JSON.stringify(d.loginIdentity.data)]}),this.dialogRef.disableClose=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");if(this.form.get("name")?.value!==this.data.loginIdentity.name&&this.data.takenNames.includes(this.form.get("name")?.value))throw new Error("Identity with same name already exists!");if(this.form.get("data")?.value!==this.data.loginIdentity.id)try{JSON.parse(this.form.get("data")?.value)}catch{throw new Error("Could not parse data as JSON!")}return!0}catch(t){return this.uiMessage.error(t),!1}}save(){var t=this;return(0,g.Z)(function*(){if(!t.validate())return;const i={id:t.data.loginIdentity.id};t.form.get("name")?.value!==t.data.loginIdentity.name&&(i.name=t.form.get("name")?.value),t.form.get("identityId")?.value!==t.data.loginIdentity.id&&(i.identityId=t.form.get("identityId")?.value),t.form.get("data")?.value!==t.data.loginIdentity.id&&(i.data=JSON.parse(t.form.get("data")?.value)),(yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation UpdateUserLoginIdentity($input: UpdateUserLoginIdentityInput!) {
            updateUserLoginIdentity(input: $input)
          }
        `,variables:{input:i}}))).errors?t.uiMessage.error("Error uploading data!"):t.exit(!0)})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(k.v$),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-login-identity-dialog"]],decls:21,vars:5,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","name"],[4,"ngIf"],["matInput","","formControlName","identityId"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","data"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",2),e.YNc(6,Fe,2,0,"mat-error",3),e.qZA(),e.TgZ(7,"mat-form-field",1)(8,"mat-label"),e._uU(9,"Identity ID"),e.qZA(),e._UZ(10,"input",4),e.YNc(11,$e,2,0,"mat-error",3),e.qZA(),e.TgZ(12,"mat-form-field",1)(13,"mat-label"),e._uU(14,"Data"),e.qZA(),e._UZ(15,"textarea",5),e.qZA()()(),e.TgZ(16,"mat-dialog-actions")(17,"button",6),e.NdJ("click",function(){return i.exit()}),e._uU(18,"Exit "),e.qZA(),e.TgZ(19,"button",6),e.NdJ("click",function(){return i.save()}),e._uU(20,"Save "),e.qZA()()),2&t){let n,a;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngIf",null==(n=i.form.get("name"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(a=i.form.get("identityId"))?null:a.hasError("required")),e.xp6(6),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.O5,U.v,x.lW,c.xY,c.H8,m.TO,m.KE,m.hX,j.IC,b.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),o})();function Ge(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Expected a valid email."),e.qZA())}let He=(()=>{class o{constructor(t,i,n,a,d){this.backend=i,this.uiMessageService=n,this.dialogRef=a,this.data=d,this.monitor=new I.y,this.form=t.group({email:[d.user.email,[s.kI.email]]}),a.disableClose=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");return!0}catch(t){return this.uiMessageService.error(t),!1}}save(){var t=this;return(0,g.Z)(function*(){if(t.monitor.isProcessing||!t.validate())return;const i={id:t.data.user.id};if(t.form.get("email")?.value!==t.data.user.email&&(i.email=t.form.get("email")?.value??null),Object.keys(i).length>1){t.monitor.addProcess();const n=yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
            mutation EditUserPrivateDialog($input: UpdateUserInput!) {
              updateUser(input: $input)
            }
          `,variables:{input:i}}));if(t.monitor.removeProcess(),n.errors)return void t.uiMessageService.error("Error uploading data!");t.exit(!0)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(w.v),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-user-private-dialog"]],decls:12,vars:5,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","email",3,"maxLength"],[4,"ngIf"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Email"),e.qZA(),e._UZ(5,"input",2),e.YNc(6,Ge,2,0,"mat-error",3),e.qZA()()(),e.TgZ(7,"mat-dialog-actions")(8,"button",4),e.NdJ("click",function(){return i.exit()}),e._uU(9,"Exit "),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){return i.save()}),e._uU(11,"Save "),e.qZA()()),2&t){let n;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("maxLength",50),e.xp6(1),e.Q6J("ngIf",null==(n=i.form.get("email"))?null:n.hasError("email")),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.O5,U.v,x.lW,c.xY,c.H8,m.TO,m.KE,m.hX,b.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),o})();var Ve=l(3288);function Ke(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Expected a valid Rutgers NetID."),e.qZA())}let Xe=(()=>{class o{constructor(t,i,n,a,d){this.backend=i,this.uiMessageService=n,this.dialogRef=a,this.data=d,this.monitor=new I.y,this.form=t.group({netId:[d.user.netId,[Ve.d.netId]]}),a.disableClose=!0}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){var t=this;return(0,g.Z)(function*(){try{if(t.form.updateValueAndValidity(),!t.form.valid)throw new Error("Missing info!");const i=t.form.get("netId")?.value;if(i!==t.data.user.netId&&(yield(0,p.z)(t.backend.withAuth().query({query:_.Ps`
              query CheckDuplicateNetId($filter: UserFilterInput!) {
                users(filter: $filter) {
                  id
                }
              }
            `,variables:{filter:{netId:{eq:i}}}}))).data.users.length>0)throw new Error(`NetID "${i}" is already linked to an account!`);return!0}catch(i){return t.uiMessageService.error(i),!1}})()}save(){var t=this;return(0,g.Z)(function*(){if(t.monitor.isProcessing||!(yield t.validate()))return;const i={userId:t.data.user.id};if(t.form.get("netId")?.value!==t.data.user.netId&&(i.netId=t.form.get("netId")?.value??null),Object.keys(i).length>1){t.monitor.addProcess();const n=yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
            mutation LinkNetIdDialog($input: VerifyNetIdInput!) {
              verifyNetId(input: $input)
            }
          `,variables:{input:i}}));if(t.monitor.removeProcess(),n.errors)return void t.uiMessageService.error("Error uploading data!");t.uiMessageService.notifyInfo("Verification email has been sent to your Rutgers email! Please follow the instructions in the email to finish linking your NetID."),t.exit(!0)}})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(w.v),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-link-netid-dialog"]],decls:12,vars:5,consts:[[2,"position","relative",3,"formGroup"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","netId",3,"maxLength"],[4,"ngIf"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"mat-form-field",1)(3,"mat-label"),e._uU(4,"Rutgers NetID"),e.qZA(),e._UZ(5,"input",2),e.YNc(6,Ke,2,0,"mat-error",3),e.qZA()()(),e.TgZ(7,"mat-dialog-actions")(8,"button",4),e.NdJ("click",function(){return i.exit()}),e._uU(9,"Exit "),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){return i.save()}),e._uU(11,"Save "),e.qZA()()),2&t){let n;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(4),e.Q6J("maxLength",50),e.xp6(1),e.Q6J("ngIf",null==(n=i.form.get("netId"))?null:n.hasError("netId")),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.O5,U.v,x.lW,c.xY,c.H8,m.TO,m.KE,m.hX,b.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),o})();var We=l(9942),et=l(8009),tt=l(4614);function it(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"button",12),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onEditUserPrivate())}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA(),e._uU(4," Edit Private Information "),e.qZA()()}}function ot(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onCreateLoginIdentity())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3," Add Login Identity "),e.qZA()}}function nt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onEditLoginIdentity(n))}),e.TgZ(2,"mat-icon"),e._uU(3,"edit"),e.qZA()(),e.TgZ(4,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onDeleteLoginIdentity(n))}),e.TgZ(5,"mat-icon"),e._uU(6,"close"),e.qZA()()()}}function rt(o,r){if(1&o&&(e.TgZ(0,"div",14)(1,"app-card"),e.YNc(2,nt,7,0,"div",15),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e.TgZ(5,"h4",16),e._uU(6,"ID"),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"h4",16),e._uU(10,"Data"),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA()()()),2&o){const t=r.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngIf",i.userOptions.canManageMetadata),e.xp6(2),e.Oqu(i.getIdentityName(t)),e.xp6(4),e.Oqu(null==t?null:t.identityId),e.xp6(4),e.Oqu(i.getIdentityData(t))}}let at=(()=>{class o{constructor(t,i,n,a,d,f){this.securityService=t,this.authService=i,this.router=n,this.backend=a,this.dialog=d,this.uiMessageService=f,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,canManageMetadata:!1,canManageProjectInvites:!1,canUpdateUserPrivate:!1,canCreateProject:!1,loaded:!1},this.monitor=new I.y,this.takenLoginIdentityNames=[]}ngOnChanges(t){t.user&&(this.takenLoginIdentityNames=this.user.loginIdentities?.map(i=>i?.name??"")??[])}getIdentityData(t){return JSON.stringify(t?.data)}getIdentityName(t){return(t?.name?.charAt(0).toUpperCase()??"")+t?.name?.slice(1)}onLinkNetId(){this.dialog.open(Xe,{data:{user:this.user,userOptions:this.userOptions},width:"35em",maxWidth:"90vw"})}onEditUserPrivate(){var t=this;return(0,g.Z)(function*(){(yield(0,p.z)(t.dialog.open(He,{data:{user:t.user,userOptions:t.userOptions},width:"35em",maxWidth:"90vw"}).afterClosed()))&&t.edited.emit()})()}onDeleteUser(){var t=this;return(0,g.Z)(function*(){let i=`Are you sure you want to delete "${t.user.username}"? There's no going back!`;if(t.securityService.securityContext?.userId===t.user.id&&(i="Are you sure you want to delete your profile? There's no going back!"),!(yield(0,p.z)(t.uiMessageService.confirmDialog(i))))return;t.monitor.addProcess();const a=yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
          mutation DeleteUser($id: ID!) {
            deleteUser(id: $id)
          }
        `,variables:{id:t.user.id}}));t.monitor.removeProcess(),!a.errors&&(t.securityService.securityContext?.userId===t.user.id?t.authService.logout():t.router.navigateByUrl("/users"))})()}onCreateLoginIdentity(){var t=this;return(0,g.Z)(function*(){(yield(0,p.z)(t.dialog.open(Le,{data:{userId:t.user.id,takenNames:t.takenLoginIdentityNames}}).afterClosed()))&&t.edited.emit()})()}onEditLoginIdentity(t){var i=this;return(0,g.Z)(function*(){t&&(yield(0,p.z)(i.dialog.open(ze,{data:{loginIdentity:t,takenNames:i.takenLoginIdentityNames}}).afterClosed()))&&i.edited.emit()})()}onDeleteLoginIdentity(t){var i=this;return(0,g.Z)(function*(){t&&(yield(0,p.z)(i.uiMessageService.confirmDialog("Are you sure you want to delete this login identity?")))&&(yield(0,p.z)(i.backend.withAuth().mutate({mutation:_.Ps`
          mutation DeleteUserLoginIdentity($id: ID!) {
            deleteUserLoginIdentity(id: $id)
          }
        `,variables:{id:t.id}})))&&i.edited.emit()})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(te.I),e.Y36(We.e),e.Y36(D.F0),e.Y36(w.v),e.Y36(c.uw),e.Y36(C.S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings-tab"]],inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:32,vars:9,consts:[["full-page",""],[2,"display","flex","flex-direction","column","gap","2em"],[4,"ngIf"],["mat-flat-button","","pill","","color","primary",2,"max-width","20em",3,"disabled","click"],[2,"display","flex","flex-direction","row","margin-bottom","0.5em","align-items","center"],[2,"flex","1","margin-bottom","0"],["pill","","mat-stroked-button","",3,"click",4,"ngIf"],[2,"display","flex","flex-direction","column","gap","1em"],["column-width","20em",2,"width","100%"],["style","width: 100%;",4,"ngFor","ngForOf"],[2,"width","min-content",3,"matTooltip"],["mat-flat-button","","pill","","tall-button","","color","primary",2,"max-width","20em",3,"disabled","click"],["mat-stroked-button","","pill","",3,"click"],["pill","","mat-stroked-button","",3,"click"],[2,"width","100%"],["style","\n                position: absolute;\n                top: 0.5em;\n                right: 0.5em;\n                display: flex;\n                flex-direction: row;\n                gap: 0.5em;\n                justify-content: end;\n              ",4,"ngIf"],[2,"margin-bottom","0.1em"],[2,"position","absolute","top","0.5em","right","0.5em","display","flex","flex-direction","row","gap","0.5em","justify-content","end"],["mat-icon-button","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"app-bg-container",0)(1,"div",1),e.YNc(2,it,5,0,"div",2),e.TgZ(3,"div")(4,"h2"),e._uU(5,"Email:"),e.qZA(),e.TgZ(6,"p"),e._uU(7),e.qZA(),e.TgZ(8,"h2"),e._uU(9,"Rutgers NetID:"),e.qZA(),e.TgZ(10,"p"),e._uU(11),e.qZA(),e.TgZ(12,"button",3),e.NdJ("click",function(){return i.onLinkNetId()}),e.TgZ(13,"mat-icon"),e._uU(14,"add"),e.qZA(),e._uU(15),e.qZA()(),e.TgZ(16,"div")(17,"div",4)(18,"h2",5),e._uU(19,"Login Identities:"),e.qZA(),e.YNc(20,ot,4,0,"button",6),e.qZA(),e.TgZ(21,"div",7)(22,"app-card-grid",8),e.YNc(23,rt,13,4,"div",9),e.qZA()()(),e.TgZ(24,"div")(25,"h2"),e._uU(26,"Danger Zone"),e.qZA(),e.TgZ(27,"div",10)(28,"button",11),e.NdJ("click",function(){return i.onDeleteUser()}),e.TgZ(29,"mat-icon"),e._uU(30,"delete"),e.qZA(),e._uU(31," Delete User "),e.qZA()()()()()),2&t){let n,a;e.xp6(2),e.Q6J("ngIf",i.userOptions.canUpdateUserPrivate),e.xp6(5),e.Oqu(null!==(n=i.user.email)&&void 0!==n?n:"None"),e.xp6(4),e.Oqu(null!==(a=i.user.netId)&&void 0!==a?a:"None"),e.xp6(1),e.Q6J("disabled",!i.userOptions.canUpdateUser||i.monitor.isProcessing),e.xp6(3),e.hij(" ",i.user.netId?"Relink":"Link"," NetID "),e.xp6(5),e.Q6J("ngIf",i.userOptions.canManageMetadata),e.xp6(3),e.Q6J("ngForOf",i.user.loginIdentities),e.xp6(4),e.Q6J("matTooltip",i.userOptions.deleteUserTooltip),e.xp6(1),e.Q6J("disabled",!i.userOptions.canDeleteUser||i.monitor.isProcessing)}},dependencies:[u.sg,u.O5,U.v,x.lW,R.h,et.Y,tt.A,ee.gM,T.Hw]}),o})();var ae=l(3451),st=l(5561),$=l(1769),se=l(8399);function lt(o,r){if(1&o&&(e.TgZ(0,"mat-select-trigger",11),e._UZ(1,"ic-icon",12),e._uU(2),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("icon",t.getSocialPlatformData(t.platform.value).icon),e.xp6(1),e.hij("",t.getSocialPlatformData(t.platform.value).name," ")}}function dt(o,r){if(1&o&&(e.TgZ(0,"mat-option",13)(1,"div",14),e._UZ(2,"ic-icon",15),e._uU(3),e.qZA()()),2&o){const t=r.$implicit;e.Q6J("value",t.key),e.xp6(2),e.Q6J("icon",t.value.icon),e.xp6(1),e.hij(" ",t.value.name," ")}}function ct(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Platform is required "),e.qZA())}function ut(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Username is required "),e.qZA())}function mt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Link is required "),e.qZA())}class z{constructor(r={link:"",platform:"",username:""},t){this.userSocial=r,this.editableSocialButton=t}validate(){return this.editableSocialButton?.validate()}compositeValue(){return this.userSocial}}let pt=(()=>{class o{constructor(t){this.delete=new e.vpe,this.edit=new e.vpe,this.userSocialEdit=new z,this.onDestroy$=new Q.x,this.form=t.group({platform:[null,[s.kI.required]],username:[null,[s.kI.required]],link:[null,[s.kI.required]]})}get platform(){return this.form.get("platform")}ngOnInit(){this.userSocialEdit.editableSocialButton=this,this.form.get("platform")?.setValue(this.userSocialEdit.userSocial.platform),this.form.get("username")?.setValue(this.userSocialEdit.userSocial.username),this.form.get("link")?.setValue(this.userSocialEdit.userSocial.link),this.form.get("platform")?.valueChanges.pipe((0,A.R)(this.onDestroy$)).subscribe({next:t=>{this.userSocialEdit.userSocial.platform=t,this.edit.emit()}}),this.form.get("username")?.valueChanges.pipe((0,A.R)(this.onDestroy$)).subscribe({next:t=>{this.userSocialEdit.userSocial.username=t,this.edit.emit()}}),this.form.get("link")?.valueChanges.pipe((0,A.R)(this.onDestroy$)).subscribe({next:t=>{this.userSocialEdit.userSocial.link=t,this.edit.emit()}})}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}validate(){return this.form.markAllAsTouched(),this.form.updateValueAndValidity(),this.form.valid}onDelete(){this.edit.emit(),this.delete.emit()}getSocialPlatforms(){return $.VB}getSocialPlatformData(t){return $.VB[t]}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-editable-social-button"]],inputs:{userSocialEdit:"userSocialEdit"},outputs:{delete:"delete",edit:"edit"},decls:23,vars:8,consts:[[1,"app-editable-social-button","card"],["type","button","mat-icon-button","",2,"position","absolute","right","0.5em","top","0.5em",3,"click"],[2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],["appearance","outline"],["formControlName","platform",2,"min-height","27px"],["style","display:flex; align-items: center; gap: 0.5em;",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["matInput","","formControlName","username"],["appearance","outline",2,"padding-top","4px"],["matInput","","formControlName","link"],[2,"display","flex","align-items","center","gap","0.5em"],["size","1.5em",3,"icon"],[3,"value"],[2,"display","flex","align-items","center","flex-direction","row","gap","0.5em"],["size","1.25em",3,"icon"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.onDelete()}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"form",2)(5,"mat-form-field",3)(6,"mat-label"),e._uU(7,"Platform"),e.qZA(),e.TgZ(8,"mat-select",4),e.YNc(9,lt,3,2,"mat-select-trigger",5),e.YNc(10,dt,4,3,"mat-option",6),e.ALo(11,"keyvalue"),e.qZA(),e.YNc(12,ct,2,0,"mat-error",7),e.qZA(),e.TgZ(13,"mat-form-field",3)(14,"mat-label"),e._uU(15,"Username"),e.qZA(),e._UZ(16,"input",8),e.YNc(17,ut,2,0,"mat-error",7),e.qZA(),e.TgZ(18,"mat-form-field",9)(19,"mat-label"),e._uU(20,"Link"),e.qZA(),e._UZ(21,"input",10),e.YNc(22,mt,2,0,"mat-error",7),e.qZA()()()),2&t){let n,a,d;e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(5),e.Q6J("ngIf",i.platform&&i.platform.value),e.xp6(1),e.Q6J("ngForOf",e.lcZ(11,6,i.getSocialPlatforms())),e.xp6(2),e.Q6J("ngIf",null==(n=i.form.get("platform"))?null:n.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(a=i.form.get("username"))?null:a.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(d=i.form.get("link"))?null:d.hasError("required"))}},dependencies:[u.sg,u.O5,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,m.TO,m.KE,m.hX,se.ar,T.Hw,O.ey,Z.gD,Z.$L,b.Nt,x.lW,u.Nd],styles:[".card[_ngcontent-%COMP%]{border:2px solid;border-radius:8px;align-content:center;align-items:center;padding:3em 1em 1em;position:relative}"]}),o})();var gt=l(592),ft=l(9883);const _t=["avatarUpload"],vt=["bannerUpload"];function ht(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Display name is required "),e.qZA())}function bt(o,r){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function yt(o,r){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," Bio is required "),e.qZA())}function Tt(o,r){1&o&&(e.TgZ(0,"div",30),e._uU(1,"Empty..."),e.qZA())}function xt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"app-editable-social-button",31),e.NdJ("delete",function(){const a=e.CHM(t).index,d=e.oxw();return e.KtG(d.onDeleteSocial(a))})("edit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onEditSocial())}),e.qZA()()}if(2&o){const t=r.$implicit;e.xp6(1),e.Q6J("userSocialEdit",t)}}function Zt(o,r){if(1&o&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Metadata"),e.qZA(),e.TgZ(3,"mat-form-field",15)(4,"mat-label"),e._uU(5,"Created At"),e.qZA(),e._UZ(6,"input",32),e.TgZ(7,"mat-hint"),e._uU(8,"MM/DD/YYYY"),e.qZA(),e._UZ(9,"mat-datepicker-toggle",33)(10,"mat-datepicker",null,34),e.qZA()()),2&o){const t=e.MAs(11);e.xp6(6),e.Q6J("matDatepicker",t),e.xp6(3),e.Q6J("for",t)}}let Ct=(()=>{class o{constructor(t,i,n,a,d,f,y){this.cdn=i,this.backend=n,this.rolesService=a,this.uiMessageService=d,this.dialogRef=f,this.data=y,this.userSocialEdits=[],this.socialsEdited=!1,this.roles=[],this.disabledRoles=[],this.acceptedRoles=[],this.rolesEdited=!1,this.monitor=new I.y,this.form=t.group({displayName:[y.user.displayName,[s.kI.required]],bio:[y.user.bio,[]],classYear:[y.user.classYear,[]],createdAt:[new Date(this.data.user.createdAt)]}),f.disableClose=!0}ngAfterViewInit(){var t=this;return(0,g.Z)(function*(){setTimeout((0,g.Z)(function*(){!t.avatarUpload||!t.bannerUpload||!t.data.user.roles||!t.data.user.id||(t.avatarUpload.init(t.cdn.getFileLink(t.data.user.avatarLink)),t.bannerUpload.init(t.cdn.getFileLink(t.data.user.bannerLink)),t.socialsEdited=!1,t.data.user.socials&&(t.userSocialEdits=t.data.user.socials.map(i=>new z({link:i?.link??"",platform:i?.platform??"",username:i?.username??""}))),t.rolesEdited=!1,t.roles=t.data.user.roles.map(i=>i?.roleCode),t.acceptedRoles=yield t.rolesService.getAddableUserRoles(),t.disabledRoles=yield t.rolesService.getDisabledUserRoles())}),0)})()}onEditSocial(){this.socialsEdited=!0}onEditRoles(){this.rolesEdited=!0}onAddSocial(){this.userSocialEdits.push(new z)}onDeleteSocial(t){this.userSocialEdits.splice(t,1)}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");for(const t of this.userSocialEdits)if(!t.validate())throw new Error("A user social is incomplete!");return(0,gt.v)(this.userSocialEdits.map(t=>t.userSocial),(t,i)=>t.username===i.username&&t.platform===i.platform,"Cannot have duplicate user socials with identical usernames and platforms!"),!0}catch(t){return this.uiMessageService.error(t),!1}}save(){var t=this;return(0,g.Z)(function*(){if(t.monitor.isProcessing||!t.avatarUpload||!t.bannerUpload||!t.validate())return;const i={id:t.data.user.id};if(t.rolesEdited&&(i.roles=t.roles),t.socialsEdited&&(i.socials=t.userSocialEdits.map(n=>n.userSocial)),t.form.get("displayName")?.value!==t.data.user.displayName&&(i.displayName=t.form.get("displayName")?.value),t.form.get("bio")?.value!==t.data.user.bio&&(i.bio=t.form.get("bio")?.value),t.form.get("classYear")?.value!==t.data.user.classYear&&(i.classYear=t.form.get("classYear")?.value),t.avatarUpload.edited&&(i.avatar=t.avatarUpload.value?{upload:t.avatarUpload.value,operation:h.f0.Insert}:{operation:h.f0.Delete}),t.bannerUpload.edited&&(i.banner=t.bannerUpload.value?{upload:t.bannerUpload.value,operation:h.f0.Insert}:{operation:h.f0.Delete}),t.data.userOptions.canManageMetadata){const n=t.form.get("createdAt")?.value?.getTime();n!==t.data.user.createdAt&&(i.createdAt=n)}if(Object.keys(i).length>1){t.monitor.addProcess();const n=yield(0,p.z)(t.backend.withAuth().mutate({mutation:_.Ps`
            mutation EditUserDialog($input: UpdateUserInput!) {
              updateUser(input: $input)
            }
          `,variables:{input:i}}));if(t.monitor.removeProcess(),n.errors)return void t.uiMessageService.error("Error uploading data!");t.exit(!0)}})()}getAvailableYears(){const i=[];for(let n=(new Date).getFullYear()+8;n>=2012;n--)i.push(n);return i}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(B.U),e.Y36(w.v),e.Y36(ft.f),e.Y36(C.S),e.Y36(c.so),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-edit-user-dialog"]],viewQuery:function(t,i){if(1&t&&(e.Gf(_t,5),e.Gf(vt,5)),2&t){let n;e.iGM(n=e.CRH())&&(i.avatarUpload=n.first),e.iGM(n=e.CRH())&&(i.bannerUpload=n.first)}},decls:50,vars:17,consts:[[2,"position","relative",3,"formGroup"],[2,"width","100%","height","12.5em","border-radius","0.25em","overflow","hidden"],["fileSizeLimit","10 MB"],["bannerUpload",""],[2,"--size","8em","--offset","calc(var(--size) / 2)","--offset-left-over","calc(var(--size) - var(--offset))","position","relative","height","var(--offset-left-over)","margin-bottom","1em"],[1,"outline-color-card",2,"left","2em","top","calc(-1 * var(--offset))","position","absolute","height","var(--size)","width","var(--size)","border-radius","8em","overflow","hidden","outline-style","solid","outline-width","0.25em"],[1,"background-color-card",2,"width","100%","height","100%"],["fileSizeLimit","5 MB",1,"app-edit-user-private-dialog","avatar"],["avatarUpload",""],[2,"display","flex","flex-direction","row","flex-wrap","wrap-reverse","justify-content","left","align-items","flex-end","margin-bottom","16px","gap","24px"],[2,"flex","1","display","flex","flex-direction","row","flex-wrap","wrap"],["appearance","outline",2,"flex","1"],["matInput","","formControlName","displayName",3,"maxLength"],["align","end"],[4,"ngIf"],["appearance","outline",2,"width","100%"],["formControlName","classYear"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline",1,"no-padding",2,"width","100%","line-height","1.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","bio",3,"maxLength"],[2,"margin","0 0 2em 0"],[2,"display","flex","align-items","center","margin-bottom","0.5em"],[2,"margin-bottom","0","flex-grow","1"],["type","button","mat-stroked-button","","pill","",1,"app-edit-user-private-dialog","add-socials-button",3,"click"],[2,"display","flex","flex-direction","column","gap","0.5em"],["class","text-disabled",4,"ngIf"],[4,"ngFor","ngForOf"],["label","Roles",3,"roles","allRoles","disabledRoles","disabled","rolesEdited"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[3,"value"],[1,"text-disabled"],[3,"userSocialEdit","delete","edit"],["matInput","","formControlName","createdAt",3,"matDatepicker"],["matSuffix","",3,"for"],["createdAt",""]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"div",1),e._UZ(3,"app-image-upload",2,3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"app-image-upload",7,8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),e._uU(14,"Display Name"),e.qZA(),e._UZ(15,"input",12),e.TgZ(16,"mat-hint",13),e._uU(17),e.qZA(),e.YNc(18,ht,2,0,"mat-error",14),e.qZA()()(),e.TgZ(19,"mat-form-field",15)(20,"mat-label"),e._uU(21,"Class Year"),e.qZA(),e.TgZ(22,"mat-select",16),e.YNc(23,bt,2,2,"mat-option",17),e.qZA()(),e.TgZ(24,"mat-form-field",18)(25,"mat-label"),e._uU(26,"Bio"),e.qZA(),e._UZ(27,"textarea",19),e.TgZ(28,"mat-hint",13),e._uU(29),e.qZA(),e.YNc(30,yt,2,0,"mat-error",14),e.qZA(),e.TgZ(31,"div",20)(32,"div",21)(33,"div",22),e._uU(34,"Socials"),e.qZA(),e.TgZ(35,"button",23),e.NdJ("click",function(){return i.onAddSocial()}),e.TgZ(36,"mat-icon"),e._uU(37,"add"),e.qZA(),e._uU(38," Add Social "),e.qZA()(),e.TgZ(39,"div",24),e.YNc(40,Tt,2,0,"div",25),e.YNc(41,xt,2,1,"div",26),e.qZA()(),e.TgZ(42,"div")(43,"app-role-codes-editor",27),e.NdJ("rolesEdited",function(){return i.onEditRoles()}),e.qZA()(),e.YNc(44,Zt,12,2,"div",14),e.qZA()(),e.TgZ(45,"mat-dialog-actions")(46,"button",28),e.NdJ("click",function(){return i.exit()}),e._uU(47,"Exit "),e.qZA(),e.TgZ(48,"button",28),e.NdJ("click",function(){return i.save()}),e._uU(49,"Save "),e.qZA()()),2&t){let n,a,d,f;e.xp6(1),e.Q6J("formGroup",i.form),e.xp6(14),e.Q6J("maxLength",50),e.xp6(2),e.hij("",(null==(n=i.form.get("displayName"))||null==n.value?null:n.value.length)||0,"/50"),e.xp6(1),e.Q6J("ngIf",null==(a=i.form.get("displayName"))?null:a.hasError("required")),e.xp6(5),e.Q6J("ngForOf",i.getAvailableYears()),e.xp6(4),e.Q6J("maxLength",600),e.xp6(2),e.hij("",(null==(d=i.form.get("bio"))||null==d.value?null:d.value.length)||0,"/600"),e.xp6(1),e.Q6J("ngIf",null==(f=i.form.get("bio"))?null:f.hasError("required")),e.xp6(10),e.Q6J("ngIf",0==i.userSocialEdits.length),e.xp6(1),e.Q6J("ngForOf",i.userSocialEdits),e.xp6(2),e.Q6J("roles",i.roles)("allRoles",i.acceptedRoles)("disabledRoles",i.disabledRoles)("disabled",!i.data.userOptions.canManageUserRoles),e.xp6(1),e.Q6J("ngIf",i.data.userOptions.canManageMetadata),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",i.monitor.isProcessing)}},dependencies:[u.sg,u.O5,c.xY,c.H8,m.TO,m.KE,m.bx,m.hX,m.R9,S.Mq,S.hl,S.nW,pt,oe.K,T.Hw,Z.gD,O.ey,ie.J,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,x.lW,U.v,j.IC,b.Nt]}),o})();var It=l(1656);let Ut=(()=>{class o{constructor(){this.icon="",this.username="",this.link=""}ngOnInit(){this.userSocial&&this.userSocial.link&&this.userSocial.username&&this.userSocial.platform&&(this.icon=$.VB[this.userSocial.platform].icon,this.link=this.userSocial.link,this.username=this.userSocial.username)}onClick(){window.open(this.link,"_blank")}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-social-button"]],inputs:{userSocial:"userSocial",icon:"icon",username:"username",link:"link"},decls:8,vars:2,consts:[[1,"app-social-button","card"],["size","24px",1,"icon",3,"icon"],[1,"app-social-button","social-button-name"],[2,"flex","1 1 auto"],["mat-icon-button","","color","basic",3,"click"],[2,"margin-bottom","2px"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"ic-icon",1),e.TgZ(2,"span",2),e._uU(3),e.qZA(),e._UZ(4,"span",3),e.TgZ(5,"button",4),e.NdJ("click",function(){return i.onClick()}),e.TgZ(6,"mat-icon",5),e._uU(7,"launch"),e.qZA()()()),2&t&&(e.xp6(1),e.Q6J("icon",i.icon),e.xp6(2),e.Oqu(i.username))},dependencies:[se.ar,T.Hw,x.lW],styles:[".card[_ngcontent-%COMP%]{border:2px solid;border-radius:.5em;display:flex;align-content:center;align-items:center;gap:.75em;padding:.75em .75em .75em 1.25em}"]}),o})();var wt=l(5539);function At(o,r){1&o&&(e.TgZ(0,"div"),e._UZ(1,"div",19),e.qZA())}const Et=function(){return[]};function kt(o,r){if(1&o&&(e.TgZ(0,"div",1),e._UZ(1,"div",2),e.TgZ(2,"div",3)(3,"div",4)(4,"div",5),e._UZ(5,"div",6),e.qZA(),e.TgZ(6,"div",7)(7,"div")(8,"h1",8),e._uU(9,"_ _ _"),e.qZA(),e.TgZ(10,"div",9),e._uU(11,"_ _ _ _ _ _ _ _ _"),e.qZA()(),e._UZ(12,"div",10),e.TgZ(13,"div",11),e._UZ(14,"div",12),e.qZA()(),e.TgZ(15,"div",13)(16,"p",14),e._uU(17," _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ "),e.qZA(),e.TgZ(18,"div",15)(19,"div",16),e.YNc(20,At,2,0,"div",17),e.qZA()(),e.TgZ(21,"div"),e._UZ(22,"app-roles-display",18),e.qZA()()()()()),2&o){const t=e.oxw();e.xp6(20),e.Q6J("ngForOf",e.DdM(2,Et).constructor(3)),e.xp6(2),e.Q6J("roles",t.roles)}}function Dt(o,r){if(1&o&&e._UZ(0,"img",32),2&o){const t=e.oxw(2);e.Q6J("src",t.bannerSrc,e.LSH)}}function Ot(o,r){if(1&o&&e._UZ(0,"img",33),2&o){const t=e.oxw(2);e.Q6J("src",t.avatarSrc,e.LSH)}}function Pt(o,r){if(1&o&&(e.TgZ(0,"div",10)(1,"h1",34),e._uU(2),e.qZA(),e.TgZ(3,"div",35),e._uU(4),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.Oqu(t.user.displayName),e.xp6(2),e.hij("@",t.user.username,"")}}function Jt(o,r){if(1&o&&(e.TgZ(0,"div",36)(1,"app-tag",37),e._uU(2),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" \u2705 Verified @",t.user.netId," ")}}function Nt(o,r){if(1&o&&(e.TgZ(0,"div",38)(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"app-tag",37),e._uU(4),e.qZA()()),2&o){const t=e.oxw(2);e.xp6(2),e.hij("Class of ",t.user.classYear,""),e.xp6(2),e.Oqu(t.getClassYearString(t.user.classYear))}}function St(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",39),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.edit())}),e._uU(1,"Edit Profile "),e.qZA()}}function Yt(o,r){1&o&&(e.TgZ(0,"div",40)(1,"h1"),e._uU(2,"This account doesn't exist"),e.qZA(),e.TgZ(3,"p"),e._uU(4,"Try searching for another"),e.qZA()())}function qt(o,r){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-social-button",44),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("userSocial",t)}}function Mt(o,r){if(1&o&&(e.TgZ(0,"div",46),e._UZ(1,"mat-divider",46),e.TgZ(2,"h2"),e._uU(3,"E-Board"),e.qZA(),e._UZ(4,"app-eboard-profile",51),e.qZA()),2&o){const t=e.oxw(4);e.xp6(4),e.Q6J("eBoard",t.user.eBoard)}}function Qt(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",52),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(4);return e.KtG(n.onNewProjectClick())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3," New Project "),e.qZA()}}function Bt(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Mt,5,1,"div",45),e._UZ(2,"mat-divider",46),e.TgZ(3,"div",47)(4,"h2",48),e._uU(5,"Projects"),e.qZA(),e.YNc(6,Qt,4,0,"button",49),e.qZA(),e._UZ(7,"app-projects-display",50),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.user.eBoard),e.xp6(5),e.Q6J("ngIf",t.userOptions.canUpdateUser&&t.userOptions.canCreateProject),e.xp6(1),e.Q6J("projectsQuery",t.projectsQuery.bind(t))}}function jt(o,r){if(1&o&&(e.TgZ(0,"div",13)(1,"p",41),e._uU(2),e.qZA(),e.TgZ(3,"div",15)(4,"div",16),e.YNc(5,qt,2,1,"div",17),e.qZA()(),e.TgZ(6,"div"),e._UZ(7,"app-roles-display",18),e.qZA(),e.TgZ(8,"div",42)(9,"div"),e._uU(10),e.qZA(),e.TgZ(11,"div"),e._uU(12),e.qZA()(),e.YNc(13,Bt,8,3,"div",43),e.qZA()),2&o){const t=e.oxw(2);e.xp6(2),e.hij(" ",t.user.bio," "),e.xp6(3),e.Q6J("ngForOf",t.user.socials),e.xp6(2),e.Q6J("roles",t.roles),e.xp6(3),e.hij("Created at ",t.getDateString(t.user.createdAt),""),e.xp6(2),e.hij("Updated at ",t.getDateString(t.user.updatedAt),""),e.xp6(1),e.Q6J("ngIf",!t.userOptions.nonExistent)}}function Rt(o,r){if(1&o&&(e.TgZ(0,"div",1)(1,"div",20),e.YNc(2,Dt,1,1,"img",21),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5),e.YNc(6,Ot,1,1,"img",22),e.qZA(),e.TgZ(7,"div",23),e.YNc(8,Pt,5,2,"div",24),e.TgZ(9,"div",25)(10,"div",26),e.YNc(11,Jt,3,1,"div",27),e.YNc(12,Nt,5,2,"div",28),e.qZA(),e.YNc(13,St,2,0,"button",29),e.qZA()(),e.YNc(14,Yt,5,0,"div",30),e.YNc(15,jt,14,6,"div",31),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",t.getBannerContainerStyle()),e.xp6(1),e.Q6J("ngIf",t.bannerSrc),e.xp6(4),e.Q6J("ngIf",t.avatarSrc),e.xp6(2),e.Q6J("ngIf",!t.userOptions.nonExistent),e.xp6(3),e.Q6J("ngIf",t.user.netId),e.xp6(1),e.Q6J("ngIf",t.user.classYear),e.xp6(1),e.Q6J("ngIf",t.userOptions.canUpdateUser),e.xp6(1),e.Q6J("ngIf",t.userOptions.nonExistent),e.xp6(1),e.Q6J("ngIf",!t.userOptions.nonExistent)}}let Lt=(()=>{class o{constructor(t,i,n,a,d,f,y){this.cdnService=t,this.settings=i,this.dialog=n,this.backend=a,this.security=d,this.router=f,this.uiMessageService=y,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,canManageMetadata:!1,canManageProjectInvites:!1,canUpdateUserPrivate:!1,canCreateProject:!1,loaded:!1},this.avatarSrc="https://c.tenor.com/Tu0MCmJ4TJUAAAAC/load-loading.gif",this.bannerSrc="https://c.tenor.com/Tu0MCmJ4TJUAAAAC/load-loading.gif",this.projects=[],this.roles=[],this.monitor=new ae.yv,this.setupBannerColorListener=!1,this.getClassYearString=F.R}ngAfterViewChecked(){this.trySetupBannerColorListeners()}ngOnChanges(t){t.user&&(this.bannerSrc=this.user.bannerLink?this.cdnService.getFileLink(this.user.bannerLink):"",this.avatarSrc=this.user.avatarLink?this.cdnService.getFileLink(this.user.avatarLink):this.settings.General.defaultAvatarSrc,this.user.roles&&(this.roles=this.user.roles.map(i=>i?.roleCode)),this.projectsDisplay?.queryUntilFillPage())}getDateString(t){return new Date(t).toLocaleString()}trySetupBannerColorListeners(){if(this.setupBannerColorListener)return;const t=document.querySelector("img.user-page.overview-tab.avatar");if(t){t.setAttribute("crossOrigin","");const i=new st.Z;t.addEventListener("load",()=>{const[n,a,d]=i.getColor(t);this.bannerColor=new ae.Il(n,a,d)}),this.setupBannerColorListener=!0}}getBannerContainerStyle(){return{...this.bannerColor&&{"background-color":this.bannerColor.hexString()}}}projectsQuery(t,i,n){var a=this;return(0,g.Z)(function*(){if(!a.userOptions.hasProjects||!a.user.id||!a.user.projectMembers)return[];const d=yield(0,p.z)(a.backend.query({query:_.Ps`
          query ($filter: ProjectFilterInput, $skip: Int, $limit: Int) {
            projects(filter: $filter, skip: $skip, limit: $limit) {
              id
              access
              cardImageLink
              completedAt
              createdAt
              updatedAt
              name
              pitch
              description
              downloadLinks
              members {
                user {
                  avatarLink
                }
              }
            }
          }
        `,variables:{skip:i,limit:n,filter:{...t,id:{in:a.user.projectMembers.map(f=>f?.projectId)}}}}));return d.error?[]:d.data.projects})()}edit(){var t=this;return(0,g.Z)(function*(){yield(0,p.z)(t.dialog.open(Ct,{data:{user:t.user,userOptions:t.userOptions},width:"37.5em",maxWidth:"90vw"}).afterClosed())})()}onNewProjectClick(){this.router.navigateByUrl("/projects/new")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.Ub),e.Y36(It.g),e.Y36(c.uw),e.Y36(k.v$),e.Y36(k.Il),e.Y36(D.F0),e.Y36(C.S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-overview-tab"]],viewQuery:function(t,i){if(1&t&&e.Gf(q.YA,5),2&t){let n;e.iGM(n=e.CRH())&&(i.projectsDisplay=n.first)}},inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:2,vars:2,consts:[["class","user-page overview-tab main-bg",4,"ngIf"],[1,"user-page","overview-tab","main-bg"],[1,"user-page","overview-tab","banner-container","loading"],[1,"user-page","overview-tab","content-width-padding"],[1,"user-page","overview-tab","content"],[1,"user-page","overview-tab","avatar-container"],[1,"user-page","overview-tab","avatar","loading"],[2,"position","relative","display","flex","flex-direction","row","align-items","flex-start","margin-top","5em","flex-wrap","wrap","gap","4px"],[1,"user-page","overview-tab","display-name","loading",2,"margin-bottom","0.2em"],[1,"user-page","overview-tab","username-tag","loading"],[2,"flex-grow","1"],[2,"right","0","display","flex","flex-direction","row"],[1,"loading",2,"width","5em","height","2em","border-radius","5em"],[1,"user-page","overview-tab","core-content"],[1,"loading",2,"margin-top","0","margin-bottom","0","word-wrap","break-word","display","inline"],[1,"user-page","overview-tab","socials-container"],[1,"user-page","overview-tab","socials-button-container"],[4,"ngFor","ngForOf"],[3,"roles"],[1,"loading",2,"height","4em","width","100%","border-radius","0.5em"],[1,"user-page","overview-tab","banner-container",3,"ngStyle"],["class","user-page overview-tab banner",3,"src",4,"ngIf"],["class","user-page overview-tab avatar",3,"src",4,"ngIf"],[2,"position","relative","display","flex","flex-direction","row","align-items","flex-start","margin-top","5em","flex-wrap","wrap","gap","2em 0.25em","margin-bottom","1em"],["style","flex-grow: 1;",4,"ngIf"],[2,"display","flex","flex-direction","row","gap","1.25em","align-items","start"],[2,"display","flex","flex-wrap","wrap","min-height","2.125em","gap","0.5em 1.25em"],["style","\n              display: flex; \n              flex-direction: row;\n              align-items: center;\n              gap: 0.5em;\n              flex-wrap: wrap;\n            ",4,"ngIf"],["style","\n              display: flex; \n              flex-direction: row;\n              align-items: center;\n              gap: 0.25em 0.5em;\n              flex-wrap: wrap;\n            ",4,"ngIf"],["style","flex-shrink: 0;","class","user-page overview-tab edit-button","mat-stroked-button","","color","basic","pill","",3,"click",4,"ngIf"],["class","text-disabled","style","margin-top: 2em;",4,"ngIf"],["class","user-page overview-tab core-content",4,"ngIf"],[1,"user-page","overview-tab","banner",3,"src"],[1,"user-page","overview-tab","avatar",3,"src"],[1,"user-page","overview-tab","display-name"],[1,"user-page","overview-tab","username-tag"],[2,"display","flex","flex-direction","row","align-items","center","gap","0.5em","flex-wrap","wrap"],["color","blank"],[2,"display","flex","flex-direction","row","align-items","center","gap","0.25em 0.5em","flex-wrap","wrap"],["mat-stroked-button","","color","basic","pill","",1,"user-page","overview-tab","edit-button",2,"flex-shrink","0",3,"click"],[1,"text-disabled",2,"margin-top","2em"],[2,"margin-top","0","margin-bottom","0","word-wrap","break-word"],[1,"text-disabled",2,"display","flex","flex-direction","row","gap","2em"],[4,"ngIf"],[3,"userSocial"],["style","margin-bottom: 2em;",4,"ngIf"],[2,"margin-bottom","2em"],[2,"display","flex","flex-direction","row","margin-bottom","1em"],[2,"flex","1","margin-bottom","0"],["mat-stroked-button","","pill","",3,"click",4,"ngIf"],[3,"projectsQuery"],[3,"eBoard"],["mat-stroked-button","","pill","",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,kt,23,3,"div",0),e.YNc(1,Rt,16,9,"div",0)),2&t&&(e.Q6J("ngIf",!i.userOptions.loaded),e.xp6(1),e.Q6J("ngIf",i.userOptions.loaded))},dependencies:[u.sg,u.O5,u.PC,ne.Z,Ut,X.d,L.l,wt.Y,T.Hw,x.lW,U.v,re],styles:["[_nghost-%COMP%]{--banner-height: calc(50vh - var(--site-header-height));--avatar-border-width: .5em;--avatar-size: 8em}.banner-container[_ngcontent-%COMP%]{box-sizing:content-box;height:var(--banner-height);width:100%;display:flex;justify-content:center;align-items:center;position:relative}.banner[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover}.edit-banner-tint[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#000;opacity:.5}.avatar-container[_ngcontent-%COMP%]{width:calc(var(--avatar-size) + var(--avatar-border-width));height:calc(var(--avatar-size) + var(--avatar-border-width));position:absolute;box-sizing:content-box;top:calc(var(--banner-height) - .5 * var(--avatar-size));display:flex;justify-content:center;align-items:center;border-radius:50%}.avatar[_ngcontent-%COMP%]{position:absolute;border:solid var(--avatar-border-width);border-radius:50%;object-fit:cover;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width))}.edit-avatar-tint[_ngcontent-%COMP%]{position:absolute;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width));border-radius:50%;background-color:#000;opacity:.5}.display-name[_ngcontent-%COMP%]{margin:0}.main-bg[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;max-width:100vw}.content-width-padding[_ngcontent-%COMP%]{padding:var(--content-padding);padding-top:0}.socials-button-container[_ngcontent-%COMP%]{box-sizing:border-box;display:grid;align-items:stretch;margin-left:auto;margin-right:auto;gap:.5em;grid-template-columns:repeat(auto-fit,minmax(18.75em,1fr))}.content[_ngcontent-%COMP%]{display:block;margin:auto;padding-top:0;max-width:var(--content-width)}.core-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:2em}"]}),o})();var le=l(3535),Ft=l(6527),$t=l(9740);function zt(o,r){1&o&&(e.TgZ(0,"th",15),e._uU(1," Project "),e.qZA())}function Gt(o,r){if(1&o&&(e.TgZ(0,"td",16),e._UZ(1,"app-inline-project-item",17),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("project",t.project)}}function Ht(o,r){1&o&&(e.TgZ(0,"th",18),e._uU(1," Type "),e.qZA())}function Vt(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1,"\u{1f4e9} Incoming"),e.qZA())}function Kt(o,r){1&o&&(e.TgZ(0,"div"),e._uU(1,"\u{1f4e4} Outgoing"),e.qZA())}function Xt(o,r){if(1&o&&(e.TgZ(0,"td",19),e.YNc(1,Vt,2,0,"div",20),e.YNc(2,Kt,2,0,"div",20),e.qZA()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","INCOMING"===t.type),e.xp6(1),e.Q6J("ngIf","OUTGOING"===t.type)}}function Wt(o,r){1&o&&e._UZ(0,"th",21)}function ei(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onAcceptInvite(n))}),e.TgZ(1,"mat-icon"),e._uU(2,"check_circle"),e.qZA()()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.monitor.isProcessing)}}function ti(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"td",19)(1,"div",22),e.YNc(2,ei,3,1,"button",23),e.TgZ(3,"button",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onRejectInvite(a))}),e.TgZ(4,"mat-icon"),e._uU(5,"cancel"),e.qZA()()()()}if(2&o){const t=r.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngIf","OUTGOING"===t.type),e.xp6(1),e.Q6J("disabled",i.monitor.isProcessing)}}function ii(o,r){1&o&&e._UZ(0,"tr",26)}function oi(o,r){1&o&&e._UZ(0,"tr",27)}let ni=(()=>{class o{constructor(t,i){this.backend=t,this.breakpointManager=i,this.edited=new e.vpe,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,canManageMetadata:!1,canManageProjectInvites:!1,canUpdateUserPrivate:!1,canCreateProject:!1,loaded:!1},this.monitor=new I.y,this.displayedColumns=["project","type","buttons"],this.filteredInvites=[],this.onDestroy$=new Q.x}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){t.user&&(this.monitor.removeProcess(),this.user.projectInvites&&(this.filteredInvites=(0,M.I8)(this.user.projectInvites)))}ngAfterViewInit(){!this.filterHeader||this.filterHeader.newSearchRequest.pipe((0,A.R)(this.onDestroy$)).subscribe(this.onNewSearchRequest.bind(this))}onNewSearchRequest(t){""===t?this.filteredInvites=(0,M.I8)(this.user.projectInvites):(this.filteredInvites=this.user.projectInvites.filter(i=>i.project.name.indexOf(t)>-1),this.filteredInvites=this.filteredInvites.sort((i,n)=>n.project.name.indexOf(t)-i.project.name.indexOf(t)))}onAcceptInvite(t){var i=this;return(0,g.Z)(function*(){i.monitor.isProcessing||(i.monitor.addProcess(),yield(0,p.z)(i.backend.withAuth().mutate({mutation:_.Ps`
          mutation AcceptProjectInvite($inviteId: ID!) {
            acceptProjectInvite(inviteId: $inviteId)
          }
        `,variables:{inviteId:t.id}})))})()}onRejectInvite(t){var i=this;return(0,g.Z)(function*(){i.monitor.isProcessing||(i.monitor.addProcess(),yield(0,p.z)(i.backend.withAuth().mutate({mutation:_.Ps`
          mutation RejectProjectInvite($inviteId: ID!) {
            deleteProjectInvite(inviteId: $inviteId)
          }
        `,variables:{inviteId:t.id}})))})()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w.v),e.Y36(Ft.I))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-invites-tab"]],viewQuery:function(t,i){if(1&t&&e.Gf(le.B,5),2&t){let n;e.iGM(n=e.CRH())&&(i.filterHeader=n.first)}},inputs:{user:"user",userOptions:"userOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:16,vars:3,consts:[["full-page",""],["searchBar","",2,"flex","1"],["membersFilter",""],[2,"display","flex","flex-direction","column","gap","0.25em"],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","100%",3,"dataSource"],["matColumnDef","project"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by project",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden;",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","buttons"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by project"],["mat-cell","",2,"max-width","100px","overflow","hidden"],[3,"project"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type"],["mat-cell",""],[4,"ngIf"],["mat-header-cell",""],[2,"display","flex","justify-content","right"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","",2,"margin-left","0.5em",3,"disabled","click"],["mat-icon-button","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){1&t&&(e.TgZ(0,"app-bg-container",0),e._UZ(1,"app-filter-header",1,2)(3,"div",3),e.TgZ(4,"table",4),e.ynx(5,5),e.YNc(6,zt,2,0,"th",6),e.YNc(7,Gt,2,1,"td",7),e.BQk(),e.ynx(8,8),e.YNc(9,Ht,2,0,"th",9),e.YNc(10,Xt,3,2,"td",10),e.BQk(),e.ynx(11,11),e.YNc(12,Wt,1,0,"th",12),e.YNc(13,ti,6,2,"td",10),e.BQk(),e.YNc(14,ii,1,0,"tr",13),e.YNc(15,oi,1,0,"tr",14),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("dataSource",i.filteredInvites),e.xp6(10),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns))},dependencies:[u.O5,x.lW,R.h,le.B,$t.b,T.Hw,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk]}),o})();function ri(o,r){1&o&&(e.TgZ(0,"div",6),e._uU(1,"Overview"),e.qZA())}function ai(o,r){if(1&o&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove_red_eye"),e.qZA(),e.YNc(2,ri,2,0,"div",5)),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE","key"))}}function si(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-overview-tab",7),e.NdJ("edited",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.fetchData(!0))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("user",t.user)("userOptions",t.userOptions)}}function li(o,r){1&o&&(e.TgZ(0,"div",6),e._uU(1,"Invites"),e.qZA())}function di(o,r){if(1&o&&(e.TgZ(0,"mat-icon"),e._uU(1,"mail"),e.qZA(),e.YNc(2,li,2,0,"div",5)),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function ci(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-invites-tab",7),e.NdJ("edited",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.fetchData(!0))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("user",t.user)("userOptions",t.userOptions)}}function ui(o,r){1&o&&(e.TgZ(0,"mat-tab"),e.YNc(1,di,3,1,"ng-template",2),e.YNc(2,ci,1,2,"ng-template",3),e.qZA())}function mi(o,r){1&o&&(e.TgZ(0,"div",6),e._uU(1,"E-Board"),e.qZA())}function pi(o,r){if(1&o&&(e.TgZ(0,"mat-icon"),e._uU(1,"assignment_ind"),e.qZA(),e.YNc(2,mi,2,0,"div",5)),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function gi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-eboard-tab",7),e.NdJ("edited",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.fetchData(!0))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("user",t.user)("userOptions",t.userOptions)}}function fi(o,r){1&o&&(e.TgZ(0,"mat-tab"),e.YNc(1,pi,3,1,"ng-template",2),e.YNc(2,gi,1,2,"ng-template",3),e.qZA())}function _i(o,r){1&o&&(e.TgZ(0,"div",6),e._uU(1,"Settings"),e.qZA())}function vi(o,r){if(1&o&&(e.TgZ(0,"mat-icon"),e._uU(1,"settings"),e.qZA(),e.YNc(2,_i,2,0,"div",5)),2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function hi(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"app-settings-tab",7),e.NdJ("edited",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.fetchData(!0))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("user",t.user)("userOptions",t.userOptions)}}function bi(o,r){1&o&&(e.TgZ(0,"mat-tab"),e.YNc(1,vi,3,1,"ng-template",2),e.YNc(2,hi,1,2,"ng-template",3),e.qZA())}const yi=[{path:"",component:(()=>{class o{constructor(t,i,n,a,d){this.breakpointManager=t,this.activatedRoute=i,this.backend=n,this.security=a,this.uiMessageService=d,this.user={},this.userOptions={canUpdateUser:!1,nonExistent:!1,hasProjects:!1,deleteUserTooltip:"",canDeleteUser:!1,canManageUserRoles:!1,canManageEBoardRoles:!1,canManageEBoard:!1,canManageMetadata:!1,canManageProjectInvites:!1,canUpdateUserPrivate:!1,canCreateProject:!1,loaded:!1},this.username="",this.onDestroy$=new Q.x}ngOnInit(){var t=this;this.activatedRoute.paramMap.pipe((0,A.R)(this.onDestroy$)).subscribe(function(){var i=(0,g.Z)(function*(n){t.username=n.get("username"),yield t.security.waitUntilReady(),yield t.fetchData(),t.setupSubscribers()});return function(n){return i.apply(this,arguments)}}())}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}fetchData(t=!1){var i=this;return(0,g.Z)(function*(){yield i.security.fetchData();const n=yield(0,p.z)(i.backend.withAuth().query({query:_.Ps`
          query FetchUserPageUser($filter: UserFilterInput) {
            users(filter: $filter) {
              id
              username
              displayName
              avatarLink
              bannerLink
              bio
              createdAt
              updatedAt
              classYear
              netId
              projectMembers {
                id
                projectId
              }
              socials {
                id
                link
                platform
                username
              }
              roles {
                roleCode
              }
              eBoard {
                id
                createdAt
                updatedAt
                bio
                avatarLink
                terms {
                  id
                  year
                  roles {
                    roleCode
                  }
                }
              }
            }
          }
        `,variables:{filter:{username:{eq:i.username}}},...t&&{fetchPolicy:"no-cache"}}));if(0==n.data.users.length)return i.userOptions.nonExistent=!0,void(i.userOptions.loaded=!0);let a=(0,M.I8)(n.data.users[0]);a.eBoard?.terms?.sort((y,J)=>J.year-y.year);const d={userId:a.id},f=i.security.makePermCalc().withDomain(d);if(i.userOptions.canUpdateUser=f.hasPermission(h.y3.UpdateUser),i.userOptions.canDeleteUser=f.hasPermission(h.y3.DeleteUser),i.userOptions.canManageUserRoles=f.hasPermission(h.y3.ManageUserRoles),i.userOptions.canManageEBoardRoles=f.hasPermission(h.y3.ManageEboardRoles),i.userOptions.canManageEBoard=f.hasPermission(h.y3.ManageEboard),i.userOptions.canManageMetadata=f.hasPermission(h.y3.ManageMetadata),i.userOptions.canUpdateUserPrivate=f.hasPermission(h.y3.UpdateUserPrivate),i.userOptions.canManageProjectInvites=f.hasAllPermissions(h.y3.JoinProject,h.y3.UpdateUser),i.userOptions.canCreateProject=f.hasPermission(h.y3.CreateProject),i.userOptions.canDeleteUser||(i.userOptions.deleteUserTooltip="Please ask an e-board officer if you'd like to delete your profile."),(a.projectMembers?.length??0)>0&&(i.userOptions.canDeleteUser=!1,i.userOptions.deleteUserTooltip="Cannot delete user that is still in a project!"),i.userOptions.hasProjects=(a.projectMembers?.length??0)>0,i.security.makePermCalc().withDomain({userId:a.id}).hasPermission(h.y3.ReadUserPrivate)){const y=yield(0,p.z)(i.backend.withAuth().withOpDomain({userId:a.id}).query({query:_.Ps`
              query FetchUserPagePrivateUser {
                users {
                  email
                  loginIdentities {
                    id
                    name
                    identityId
                    data
                  }
                }
              }
            `,...t&&{fetchPolicy:"no-cache"}}));if(y.error||0===y.data.users.length)return;a={...a,...y.data.users[0]}}if(i.security.securityContext?.userId){const y=i.security.getOpDomainsFromPermission(h.y3.ManageProjectInvites);if(y&&y.length>0||void 0===y){const J=i.security.securityContext&&i.userOptions.canUpdateUser?yield(0,p.z)(i.backend.withAuth().withOpDomains(y).query({query:_.Ps`
                      query FetchUserPageInvites($filter: ProjectInviteFilterInput) {
                        projectInvites(filter: $filter) {
                          id
                          type
                          project {
                            id
                            name
                            cardImageLink
                          }
                        }
                      }
                    `,variables:{filter:{userId:{eq:i.security.securityContext.userId}}},...t&&{fetchPolicy:"no-cache"}})):void 0;J&&!J.error&&(a.projectInvites=J.data.projectInvites)}else a.projectInvites=[]}i.userOptions.loaded=!0,i.user=a})()}setupSubscribers(){if(!this.security.securityContext?.userId||!this.userOptions.canUpdateUser)return;this.backend.subscribe({query:_.Ps`
          subscription ($filter: UserSubscriptionFilter) {
            userUpdated(filter: $filter) {
              id
            }
          }
        `,variables:{filter:{id:this.security.securityContext.userId}}}).pipe((0,A.R)(this.onDestroy$)).subscribe({next:i=>{this.uiMessageService.notifyInfo("User updated!"),this.fetchData(!0)}});const t={userId:this.security.securityContext.userId};this.backend.subscribe({query:_.Ps`
          subscription ($filter: ProjectInviteSubscriptionFilter) {
            projectInviteCreated(filter: $filter) {
              id
            }
          }
        `,variables:{filter:t}}).pipe((0,A.R)(this.onDestroy$)).subscribe({next:i=>{this.uiMessageService.notifyInfo("New invite!"),this.fetchData(!0)}}),this.backend.subscribe({query:_.Ps`
          subscription ($filter: ProjectInviteSubscriptionFilter) {
            projectInviteDeleted(filter: $filter) {
              id
            }
          }
        `,variables:{filter:t}}).pipe((0,A.R)(this.onDestroy$)).subscribe({next:i=>{this.uiMessageService.notifyInfo("Invite deleted!"),this.fetchData(!0)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.IW),e.Y36(D.gz),e.Y36(w.v),e.Y36(te.I),e.Y36(C.S))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-user-page"]],decls:8,vars:4,consts:[[1,"app-user-page","main-bg"],["mat-align-tabs","center","backgroundColor","primary",3,"selectedIndex"],["mat-tab-label",""],["matTabContent",""],[4,"ngIf"],["style","margin-left: 0.5em;",4,"ngIf"],[2,"margin-left","0.5em"],[3,"user","userOptions","edited"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab"),e.YNc(3,ai,3,1,"ng-template",2),e.YNc(4,si,1,2,"ng-template",3),e.qZA(),e.YNc(5,ui,3,0,"mat-tab",4),e.YNc(6,fi,3,0,"mat-tab",4),e.YNc(7,bi,3,0,"mat-tab",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("selectedIndex",0),e.xp6(4),e.Q6J("ngIf",i.userOptions.canManageProjectInvites),e.xp6(1),e.Q6J("ngIf",i.userOptions.canManageEBoard),e.xp6(1),e.Q6J("ngIf",i.userOptions.canUpdateUser))},dependencies:[u.O5,Be,at,Lt,ni,E.SP,E.uD,E.uX,E.Vc,T.Hw],styles:["[_nghost-%COMP%]{--banner-height: calc(50vh - var(--site-header-height));--avatar-border-width: .5em;--avatar-size: 8em}.banner-container[_ngcontent-%COMP%]{box-sizing:content-box;height:var(--banner-height);width:100%;display:flex;justify-content:center;align-items:center;position:relative}.banner[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover}.edit-banner-tint[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#000;opacity:.5}.avatar-container[_ngcontent-%COMP%]{width:calc(var(--avatar-size) + var(--avatar-border-width));height:calc(var(--avatar-size) + var(--avatar-border-width));position:absolute;box-sizing:content-box;top:calc(var(--banner-height) - .5 * var(--avatar-size));display:flex;justify-content:center;align-items:center;border-radius:50%}.avatar[_ngcontent-%COMP%]{position:absolute;border:solid var(--avatar-border-width);border-radius:50%;object-fit:cover;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width))}.edit-avatar-tint[_ngcontent-%COMP%]{position:absolute;width:calc(100% - 2 * var(--avatar-border-width));height:calc(100% - 2 * var(--avatar-border-width));border-radius:50%;background-color:#000;opacity:.5}.display-name[_ngcontent-%COMP%]{margin:0}.username-tag[_ngcontent-%COMP%]{margin-bottom:1em}.main-bg[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.content-width-padding[_ngcontent-%COMP%]{padding:var(--content-padding);padding-top:0}.socials-button-container[_ngcontent-%COMP%]{box-sizing:border-box;display:grid;align-items:stretch;margin-left:auto;margin-right:auto;gap:8px;grid-template-columns:repeat(auto-fit,minmax(18.75,1fr))}.content[_ngcontent-%COMP%]{display:block;margin:auto;padding-top:0;max-width:var(--content-width)}.core-content[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:32px}"]}),o})()}];let Ti=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[D.Bz.forChild(yi),u.ez,ce,_e,ge,ue,E.Nh,T.Ps]}),o})()}}]);