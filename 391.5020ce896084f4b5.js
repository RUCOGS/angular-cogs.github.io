"use strict";(self.webpackChunkrucogs_website=self.webpackChunkrucogs_website||[]).push([[391],{2391:(Sn,ce,s)=>{s.r(ce),s.d(ce,{ProjectPageModule:()=>Zn});var m=s(8692),k=s(3331),S=s(2516),L=s(3178),d=s(92),le=s(5719),C=s(9638),h=s(4536),P=s(7406),e=s(4537),J=s(8954),E=s(4929),H=s(5436),y=s(1379),Q=s(8023),Oe=s(1860),c=s(4091);const De=["mat-sort-header",""];function Ue(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3),e.NdJ("@arrowPosition.start",function(){e.CHM(t);const o=e.oxw();return e.KtG(o._disableViewStateAnimation=!0)})("@arrowPosition.done",function(){e.CHM(t);const o=e.oxw();return e.KtG(o._disableViewStateAnimation=!1)}),e._UZ(1,"div",4),e.TgZ(2,"div",5),e._UZ(3,"div",6)(4,"div",7)(5,"div",8),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("@arrowOpacity",t._getArrowViewState())("@arrowPosition",t._getArrowViewState())("@allowChildren",t._getArrowDirectionState()),e.xp6(2),e.Q6J("@indicator",t._getArrowDirectionState()),e.xp6(1),e.Q6J("@leftPointer",t._getArrowDirectionState()),e.xp6(1),e.Q6J("@rightPointer",t._getArrowDirectionState())}}const Je=["*"],de=new e.OlP("MAT_SORT_DEFAULT_OPTIONS"),Ee=(0,y.dB)((0,y.Id)(class{}));let te=(()=>{class i extends Ee{constructor(t){super(),this._defaultOptions=t,this.sortables=new Map,this._stateChanges=new Q.x,this.start="asc",this._direction="",this.sortChange=new e.vpe}get direction(){return this._direction}set direction(t){this._direction=t}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=(0,E.Ig)(t)}register(t){this.sortables.set(t.id,t)}deregister(t){this.sortables.delete(t.id)}sort(t){this.active!=t.id?(this.active=t.id,this.direction=t.start?t.start:this.start):this.direction=this.getNextSortDirection(t),this.sortChange.emit({active:this.active,direction:this.direction})}getNextSortDirection(t){if(!t)return"";let o=function qe(i,r){let t=["asc","desc"];return"desc"==i&&t.reverse(),r||t.push(""),t}(t.start||this.start,t?.disableClear??this.disableClear??!!this._defaultOptions?.disableClear),a=o.indexOf(this.direction)+1;return a>=o.length&&(a=0),o[a]}ngOnInit(){this._markInitialized()}ngOnChanges(){this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(de,8))},i.\u0275dir=e.lG2({type:i,selectors:[["","matSort",""]],hostAttrs:[1,"mat-sort"],inputs:{disabled:["matSortDisabled","disabled"],active:["matSortActive","active"],start:["matSortStart","start"],direction:["matSortDirection","direction"],disableClear:["matSortDisableClear","disableClear"]},outputs:{sortChange:"matSortChange"},exportAs:["matSort"],features:[e.qOj,e.TTD]}),i})();const O=y.mZ.ENTERING+" "+y.yN.STANDARD_CURVE,q={indicator:(0,c.X$)("indicator",[(0,c.SB)("active-asc, asc",(0,c.oB)({transform:"translateY(0px)"})),(0,c.SB)("active-desc, desc",(0,c.oB)({transform:"translateY(10px)"})),(0,c.eR)("active-asc <=> active-desc",(0,c.jt)(O))]),leftPointer:(0,c.X$)("leftPointer",[(0,c.SB)("active-asc, asc",(0,c.oB)({transform:"rotate(-45deg)"})),(0,c.SB)("active-desc, desc",(0,c.oB)({transform:"rotate(45deg)"})),(0,c.eR)("active-asc <=> active-desc",(0,c.jt)(O))]),rightPointer:(0,c.X$)("rightPointer",[(0,c.SB)("active-asc, asc",(0,c.oB)({transform:"rotate(45deg)"})),(0,c.SB)("active-desc, desc",(0,c.oB)({transform:"rotate(-45deg)"})),(0,c.eR)("active-asc <=> active-desc",(0,c.jt)(O))]),arrowOpacity:(0,c.X$)("arrowOpacity",[(0,c.SB)("desc-to-active, asc-to-active, active",(0,c.oB)({opacity:1})),(0,c.SB)("desc-to-hint, asc-to-hint, hint",(0,c.oB)({opacity:.54})),(0,c.SB)("hint-to-desc, active-to-desc, desc, hint-to-asc, active-to-asc, asc, void",(0,c.oB)({opacity:0})),(0,c.eR)("* => asc, * => desc, * => active, * => hint, * => void",(0,c.jt)("0ms")),(0,c.eR)("* <=> *",(0,c.jt)(O))]),arrowPosition:(0,c.X$)("arrowPosition",[(0,c.eR)("* => desc-to-hint, * => desc-to-active",(0,c.jt)(O,(0,c.F4)([(0,c.oB)({transform:"translateY(-25%)"}),(0,c.oB)({transform:"translateY(0)"})]))),(0,c.eR)("* => hint-to-desc, * => active-to-desc",(0,c.jt)(O,(0,c.F4)([(0,c.oB)({transform:"translateY(0)"}),(0,c.oB)({transform:"translateY(25%)"})]))),(0,c.eR)("* => asc-to-hint, * => asc-to-active",(0,c.jt)(O,(0,c.F4)([(0,c.oB)({transform:"translateY(25%)"}),(0,c.oB)({transform:"translateY(0)"})]))),(0,c.eR)("* => hint-to-asc, * => active-to-asc",(0,c.jt)(O,(0,c.F4)([(0,c.oB)({transform:"translateY(0)"}),(0,c.oB)({transform:"translateY(-25%)"})]))),(0,c.SB)("desc-to-hint, asc-to-hint, hint, desc-to-active, asc-to-active, active",(0,c.oB)({transform:"translateY(0)"})),(0,c.SB)("hint-to-desc, active-to-desc, desc",(0,c.oB)({transform:"translateY(-25%)"})),(0,c.SB)("hint-to-asc, active-to-asc, asc",(0,c.oB)({transform:"translateY(25%)"}))]),allowChildren:(0,c.X$)("allowChildren",[(0,c.eR)("* <=> *",[(0,c.IO)("@*",(0,c.pV)(),{optional:!0})])])};let $=(()=>{class i{constructor(){this.changes=new Q.x}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ye={provide:$,deps:[[new e.FiY,new e.tp0,$]],useFactory:function Ne(i){return i||new $}},Qe=(0,y.Id)(class{});let me=(()=>{class i extends Qe{constructor(t,n,o,a,l,p,x,T){super(),this._intl=t,this._changeDetectorRef=n,this._sort=o,this._columnDef=a,this._focusMonitor=l,this._elementRef=p,this._ariaDescriber=x,this._showIndicatorHint=!1,this._viewState={},this._arrowDirection="",this._disableViewStateAnimation=!1,this.arrowPosition="after",this._sortActionDescription="Sort",T?.arrowPosition&&(this.arrowPosition=T?.arrowPosition),this._handleStateChanges()}get sortActionDescription(){return this._sortActionDescription}set sortActionDescription(t){this._updateSortActionDescription(t)}get disableClear(){return this._disableClear}set disableClear(t){this._disableClear=(0,E.Ig)(t)}ngOnInit(){!this.id&&this._columnDef&&(this.id=this._columnDef.name),this._updateArrowDirection(),this._setAnimationTransitionState({toState:this._isSorted()?"active":this._arrowDirection}),this._sort.register(this),this._sortButton=this._elementRef.nativeElement.querySelector(".mat-sort-header-container"),this._updateSortActionDescription(this._sortActionDescription)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{const n=!!t;n!==this._showIndicatorHint&&(this._setIndicatorHintVisible(n),this._changeDetectorRef.markForCheck())})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._sort.deregister(this),this._rerenderSubscription.unsubscribe()}_setIndicatorHintVisible(t){this._isDisabled()&&t||(this._showIndicatorHint=t,this._isSorted()||(this._updateArrowDirection(),this._setAnimationTransitionState(this._showIndicatorHint?{fromState:this._arrowDirection,toState:"hint"}:{fromState:"hint",toState:this._arrowDirection})))}_setAnimationTransitionState(t){this._viewState=t||{},this._disableViewStateAnimation&&(this._viewState={toState:t.toState})}_toggleOnInteraction(){this._sort.sort(this),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0)}_handleClick(){this._isDisabled()||this._sort.sort(this)}_handleKeydown(t){!this._isDisabled()&&(t.keyCode===H.L_||t.keyCode===H.K5)&&(t.preventDefault(),this._toggleOnInteraction())}_isSorted(){return this._sort.active==this.id&&("asc"===this._sort.direction||"desc"===this._sort.direction)}_getArrowDirectionState(){return`${this._isSorted()?"active-":""}${this._arrowDirection}`}_getArrowViewState(){const t=this._viewState.fromState;return(t?`${t}-to-`:"")+this._viewState.toState}_updateArrowDirection(){this._arrowDirection=this._isSorted()?this._sort.direction:this.start||this._sort.start}_isDisabled(){return this._sort.disabled||this.disabled}_getAriaSortAttribute(){return this._isSorted()?"asc"==this._sort.direction?"ascending":"descending":"none"}_renderArrow(){return!this._isDisabled()||this._isSorted()}_updateSortActionDescription(t){this._sortButton&&(this._ariaDescriber?.removeDescription(this._sortButton,this._sortActionDescription),this._ariaDescriber?.describe(this._sortButton,t)),this._sortActionDescription=t}_handleStateChanges(){this._rerenderSubscription=(0,Oe.T)(this._sort.sortChange,this._sort._stateChanges,this._intl.changes).subscribe(()=>{this._isSorted()&&(this._updateArrowDirection(),("hint"===this._viewState.toState||"active"===this._viewState.toState)&&(this._disableViewStateAnimation=!0),this._setAnimationTransitionState({fromState:this._arrowDirection,toState:"active"}),this._showIndicatorHint=!1),!this._isSorted()&&this._viewState&&"active"===this._viewState.toState&&(this._disableViewStateAnimation=!1,this._setAnimationTransitionState({fromState:"active",toState:this._arrowDirection})),this._changeDetectorRef.markForCheck()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36($),e.Y36(e.sBO),e.Y36(te,8),e.Y36("MAT_SORT_HEADER_COLUMN_DEF",8),e.Y36(J.tE),e.Y36(e.SBq),e.Y36(J.$s,8),e.Y36(de,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["","mat-sort-header",""]],hostAttrs:[1,"mat-sort-header"],hostVars:3,hostBindings:function(t,n){1&t&&e.NdJ("click",function(){return n._handleClick()})("keydown",function(a){return n._handleKeydown(a)})("mouseenter",function(){return n._setIndicatorHintVisible(!0)})("mouseleave",function(){return n._setIndicatorHintVisible(!1)}),2&t&&(e.uIk("aria-sort",n._getAriaSortAttribute()),e.ekj("mat-sort-header-disabled",n._isDisabled()))},inputs:{disabled:"disabled",id:["mat-sort-header","id"],arrowPosition:"arrowPosition",start:"start",sortActionDescription:"sortActionDescription",disableClear:"disableClear"},exportAs:["matSortHeader"],features:[e.qOj],attrs:De,ngContentSelectors:Je,decls:4,vars:7,consts:[[1,"mat-sort-header-container","mat-focus-indicator"],[1,"mat-sort-header-content"],["class","mat-sort-header-arrow",4,"ngIf"],[1,"mat-sort-header-arrow"],[1,"mat-sort-header-stem"],[1,"mat-sort-header-indicator"],[1,"mat-sort-header-pointer-left"],[1,"mat-sort-header-pointer-right"],[1,"mat-sort-header-pointer-middle"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"div",0)(1,"div",1),e.Hsn(2),e.qZA(),e.YNc(3,Ue,6,6,"div",2),e.qZA()),2&t&&(e.ekj("mat-sort-header-sorted",n._isSorted())("mat-sort-header-position-before","before"===n.arrowPosition),e.uIk("tabindex",n._isDisabled()?null:0)("role",n._isDisabled()?null:"button"),e.xp6(3),e.Q6J("ngIf",n._renderArrow()))},dependencies:[m.O5],styles:[".mat-sort-header-container{display:flex;cursor:pointer;align-items:center;letter-spacing:normal;outline:0}[mat-sort-header].cdk-keyboard-focused .mat-sort-header-container,[mat-sort-header].cdk-program-focused .mat-sort-header-container{border-bottom:solid 1px currentColor}.mat-sort-header-disabled .mat-sort-header-container{cursor:default}.mat-sort-header-content{text-align:center;display:flex;align-items:center}.mat-sort-header-position-before{flex-direction:row-reverse}.mat-sort-header-arrow{height:12px;width:12px;min-width:12px;position:relative;display:flex;opacity:0}.mat-sort-header-arrow,[dir=rtl] .mat-sort-header-position-before .mat-sort-header-arrow{margin:0 0 0 6px}.mat-sort-header-position-before .mat-sort-header-arrow,[dir=rtl] .mat-sort-header-arrow{margin:0 6px 0 0}.mat-sort-header-stem{background:currentColor;height:10px;width:2px;margin:auto;display:flex;align-items:center}.cdk-high-contrast-active .mat-sort-header-stem{width:0;border-left:solid 2px}.mat-sort-header-indicator{width:100%;height:2px;display:flex;align-items:center;position:absolute;top:0;left:0}.mat-sort-header-pointer-middle{margin:auto;height:2px;width:2px;background:currentColor;transform:rotate(45deg)}.cdk-high-contrast-active .mat-sort-header-pointer-middle{width:0;height:0;border-top:solid 2px;border-left:solid 2px}.mat-sort-header-pointer-left,.mat-sort-header-pointer-right{background:currentColor;width:6px;height:2px;position:absolute;top:0}.cdk-high-contrast-active .mat-sort-header-pointer-left,.cdk-high-contrast-active .mat-sort-header-pointer-right{width:0;height:0;border-left:solid 6px;border-top:solid 2px}.mat-sort-header-pointer-left{transform-origin:right;left:0}.mat-sort-header-pointer-right{transform-origin:left;right:0}"],encapsulation:2,data:{animation:[q.indicator,q.leftPointer,q.rightPointer,q.arrowOpacity,q.arrowPosition,q.allowChildren]},changeDetection:0}),i})(),Fe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[Ye],imports:[m.ez,y.BQ]}),i})();var f=s(317),z=s(2940),G=s(7950),Re=s(4276),Be=s(5491),ie=s(335),pe=s(6883),Le=s(6004),ue=s(411);let _e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,Be.F,ie.z,pe.U,P.c,C.ot,d.UX,ie.z,Le.m,k.Ps,ue.As]}),i})();var ne=s(7763);let He=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,k.Ps,le.g,S.Nh,z.AV,ie.z,f.p0,C.ot,G.c,Fe,P.c,Re.J,_e,ne.I,h.Is,d.UX,pe.U]}),i})();var he=s(7723);const $e=["input"],ze=function(i){return{enterDuration:i}},Ge=["*"],Ve=new e.OlP("mat-checkbox-default-options",{providedIn:"root",factory:fe});function fe(){return{color:"accent",clickAction:"check-indeterminate"}}let Ke=0;const ge=fe(),Xe={provide:d.JU,useExisting:(0,e.Gpc)(()=>be),multi:!0};class We{}const et=(0,y.sb)((0,y.pj)((0,y.Kr)((0,y.Id)(class{constructor(i){this._elementRef=i}}))));let tt=(()=>{class i extends et{constructor(t,n,o,a,l,p,x){super(n),this._changeDetectorRef=o,this._ngZone=a,this._animationMode=p,this._options=x,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new e.vpe,this.indeterminateChange=new e.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||ge,this.color=this.defaultColor=this._options.color||ge.color,this.tabIndex=parseInt(l)||0,this.id=this._uniqueId=`${t}${++Ke}`}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=(0,E.Ig)(t)}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const n=(0,E.Ig)(t);n!=this.checked&&(this._checked=n,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const n=(0,E.Ig)(t);n!==this.disabled&&(this._disabled=n,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const n=t!=this._indeterminate;this._indeterminate=(0,E.Ig)(t),n&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let n=this._currentCheckState,o=this._getAnimationTargetElement();if(n!==t&&o&&(this._currentAnimationClass.length>0&&o.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){o.classList.add(this._currentAnimationClass);const a=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{o.classList.remove(a)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,n){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===n)return this._animationClasses.uncheckedToChecked;if(3==n)return this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===n?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===n?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===n?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const n=this._inputElement;n&&(n.nativeElement.indeterminate=t)}}return i.\u0275fac=function(t){e.$Z()},i.\u0275dir=e.lG2({type:i,viewQuery:function(t,n){if(1&t&&(e.Gf($e,5),e.Gf(y.wG,5)),2&t){let o;e.iGM(o=e.CRH())&&(n._inputElement=o.first),e.iGM(o=e.CRH())&&(n.ripple=o.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[e.qOj]}),i})(),be=(()=>{class i extends tt{constructor(t,n,o,a,l,p,x){super("mat-checkbox-",t,n,a,l,p,x),this._focusMonitor=o,this._animationClasses={uncheckedToChecked:"mat-checkbox-anim-unchecked-checked",uncheckedToIndeterminate:"mat-checkbox-anim-unchecked-indeterminate",checkedToUnchecked:"mat-checkbox-anim-checked-unchecked",checkedToIndeterminate:"mat-checkbox-anim-checked-indeterminate",indeterminateToChecked:"mat-checkbox-anim-indeterminate-checked",indeterminateToUnchecked:"mat-checkbox-anim-indeterminate-unchecked"}}_createChangeEvent(t){const n=new We;return n.source=this,n.checked=t,n}_getAnimationTargetElement(){return this._elementRef.nativeElement}ngAfterViewInit(){super.ngAfterViewInit(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||this._onBlur()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}_onInputClick(t){t.stopPropagation(),super._handleInputClick()}focus(t,n){t?this._focusMonitor.focusVia(this._inputElement,t,n):this._inputElement.nativeElement.focus(n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(J.tE),e.Y36(e.R0b),e.$8M("tabindex"),e.Y36(e.QbO,8),e.Y36(Ve,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-checkbox"],hostVars:14,hostBindings:function(t,n){2&t&&(e.Ikx("id",n.id),e.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null),e.ekj("mat-checkbox-indeterminate",n.indeterminate)("mat-checkbox-checked",n.checked)("mat-checkbox-disabled",n.disabled)("mat-checkbox-label-before","before"==n.labelPosition)("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[e._Bn([Xe]),e.qOj],ngContentSelectors:Ge,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),e.NdJ("change",function(a){return n._onInteractionEvent(a)})("click",function(a){return n._onInputClick(a)}),e.qZA(),e.TgZ(5,"span",5),e._UZ(6,"span",6),e.qZA(),e._UZ(7,"span",7),e.TgZ(8,"span",8),e.O4$(),e.TgZ(9,"svg",9),e._UZ(10,"path",10),e.qZA(),e.kcU(),e._UZ(11,"span",11),e.qZA()(),e.TgZ(12,"span",12,13),e.NdJ("cdkObserveContent",function(){return n._onLabelTextChange()}),e.TgZ(14,"span",14),e._uU(15,"\xa0"),e.qZA(),e.Hsn(16),e.qZA()()),2&t){const o=e.MAs(1),a=e.MAs(13);e.uIk("for",n.inputId),e.xp6(2),e.ekj("mat-checkbox-inner-container-no-side-margin",!a.textContent||!a.textContent.trim()),e.xp6(1),e.Q6J("id",n.inputId)("required",n.required)("checked",n.checked)("disabled",n.disabled)("tabIndex",n.tabIndex),e.uIk("value",n.value)("name",n.name)("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby)("aria-checked",n._getAriaChecked())("aria-describedby",n.ariaDescribedby),e.xp6(2),e.Q6J("matRippleTrigger",o)("matRippleDisabled",n._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",e.VKq(19,ze,"NoopAnimations"===n._animationMode?0:150))}},dependencies:[y.wG,he.wD],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:rgba(0,0,0,0);transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:rgba(0,0,0,0)}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}"],encapsulation:2,changeDetection:0}),i})(),ve=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({}),i})(),ot=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[y.si,y.BQ,he.Q8,ve,y.BQ,ve]}),i})();var V=s(3704),xe=s(6438),oe=s(8033),w=s(7545);let rt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,C.ot,G.c,k.Ps,ue.As,w.fF]}),i})();var at=s(4022),F=s(7165),g=s(8659);let st=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,F._t,P.c,g.lN,k.Ps,d.u5,C.ot,G.c]}),i})();var ct=s(9518),ye=s(8399),ke=s(7657);let lt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,_e,xe.t,P.c,C.ot,G.c,ne.I,rt,ye.QX,ke.JP,ct.I,k.Ps,h.Is,V.FA,st,at.l,ot,oe.LD,d.UX,y.XK]}),i})(),dt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,k.Ps,C.ot,z.AV,ne.I]}),i})();var u=s(8239),j=s(9860),_=s(3556),b=s(274),v=s(7445),D=s(3528),Ce=s(6527),N=s(831),mt=s(1241),pt=s(9942),M=s(5208),re=s(9676),Y=s(4583),B=s(6440),ut=s(3223);const _t=function(i){return{clickable:i}};let K=(()=>{class i{constructor(t){this.cdn=t,this.user={},this.clickable=!1,this.link=""}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-inline-profile"]],inputs:{user:"user",clickable:"clickable",link:"link"},decls:6,vars:7,consts:[[2,"display","flex","align-items","center","gap","0.5em","color","inherit","text-decoration","inherit",3,"routerLink","ngClass"],["size","input",3,"avatarSrc"],[2,"font-size","0.75em"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0),e._UZ(1,"app-avatar",1),e.TgZ(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._uU(5),e.qZA()()),2&t&&(e.Q6J("routerLink",n.clickable?n.link:null)("ngClass",e.VKq(5,_t,n.clickable)),e.xp6(1),e.Q6J("avatarSrc",n.cdn.getFileLink(n.user.avatarLink)),e.xp6(2),e.Oqu(n.user.displayName),e.xp6(2),e.hij("@",n.user.username,""))},dependencies:[m.mk,ut.A,L.yS],styles:[".clickable[_ngcontent-%COMP%]{transition:transform .1s ease-out}.clickable[_ngcontent-%COMP%]:hover{transform:scale(1.1)}"]}),i})();var A=s(2709),Te=s(7025),ht=s(2842);let ft=(()=>{class i{constructor(t,n,o,a,l,p){this.backend=n,this.uiMessageService=o,this.rolesService=a,this.dialogRef=l,this.data=p,this.rolesEdited=!1,this.roles=[],this.disabledRoles=[],this.acceptedRoles=[],this.monitor=new Y.y,this.form=t.group({contributions:[this.data.projectMember.contributions,[]]}),l.disableClose=!0}ngOnInit(){var t=this;return(0,u.Z)(function*(){!t.data.projectMember.roles||(t.roles=t.data.projectMember.roles.map(n=>n?.roleCode),t.acceptedRoles=yield t.rolesService.getAddableProjectRoles(t.data.projectId),t.disabledRoles=yield t.rolesService.getDisabledProjectRoles(t.data.projectId))})()}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Some project member information is missing!");return!0}catch(t){return this.uiMessageService.error(t),!1}}save(){if(this.monitor.isProcessing||!this.validate())return;const t={id:this.data.projectMember.id};this.form.get("contributions")?.value!==this.data.projectMember.contributions&&(t.contributions=this.form.get("contributions")?.value),this.rolesEdited&&(t.roles=this.roles),Object.keys(t).length>1&&(this.monitor.addProcess(),this.backend.withAuth().mutate({mutation:b.Ps`
            mutation ($input: UpdateProjectMemberInput!) {
              updateProjectMember(input: $input)
            }
          `,variables:{input:t}}).pipe((0,re.P)()).subscribe({next:n=>{this.monitor.removeProcess(),this.exit(!0)},error:n=>{this.monitor.removeProcess(),this.exit(!1)}}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.QS),e.Y36(w.v$),e.Y36(M.S),e.Y36(w.fu),e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-member-dialog"]],decls:15,vars:10,consts:[[2,"position","relative",3,"formGroup"],[3,"user"],["appearance","outline",2,"width","100%","line-height","1.5em","margin-top","0.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","contributions",3,"maxlength"],["align","end"],["label","Roles",3,"roles","allRoles","disabledRoles","disabled","rolesEdited"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0),e._UZ(2,"app-inline-profile",1),e.TgZ(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Contributions"),e.qZA(),e._UZ(6,"textarea",3),e.TgZ(7,"mat-hint",4),e._uU(8),e.qZA()(),e.TgZ(9,"app-role-codes-editor",5),e.NdJ("rolesEdited",function(){return n.rolesEdited=!0}),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",6),e.NdJ("click",function(){return n.exit()}),e._uU(12,"Exit "),e.qZA(),e.TgZ(13,"button",6),e.NdJ("click",function(){return n.save()}),e._uU(14,"Save "),e.qZA()()),2&t){let o;e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("user",n.data.projectMember.user),e.xp6(4),e.Q6J("maxlength",450),e.xp6(2),e.hij("",(null==(o=n.form.get("contributions"))||null==o.value?null:o.value.length)||0,"/450"),e.xp6(1),e.Q6J("roles",n.roles)("allRoles",n.acceptedRoles)("disabledRoles",n.disabledRoles)("disabled",!n.data.projectMemberOptions.canManageMemberRoles),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing)}},dependencies:[K,C.lW,A.v,Te.IC,g.KE,g.bx,g.hX,P.Nt,h.xY,h.H8,d._Y,d.Fj,d.JJ,d.JL,d.nD,d.sg,d.u,ht.K]}),i})();var X=s(7187),gt=s(5557),je=s(1637);const bt=function(i){return{disabled:i}};function vt(i,r){if(1&i&&e._UZ(0,"app-inline-profile",5),2&i){const t=e.oxw();e.Q6J("user",t.user)("ngClass",e.VKq(2,bt,t.disabled))}}function xt(i,r){if(1&i&&(e.TgZ(0,"mat-option",6),e._UZ(1,"app-inline-profile",7),e.qZA()),2&i){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Q6J("user",t)}}const yt=function(i){return{"cdk-visually-hidden":i}};let we=(()=>{class i extends X.Y{constructor(t,n,o,a,l){super(o,a,l),this.cdn=t,this.backend=n,this.rutgersVerified=!1,this.inputControl=new d.p4,this.filteredUsers$=new gt.t,this.isEnteringNewUser=!0,this._user=null,this.controlType="app-user-input",this.id=`${this.controlType}-${i.nextId++}`}get user(){return this._user}set user(t){this._user=t,this.value=t?.id?t.id:null}get empty(){return""===this.value}ngOnInit(){var n,t=this;null!=this.user&&(this.inputControl.setValue(this.user.username,{emitEvent:!1}),this.isEnteringNewUser=!1),this.inputControl.valueChanges.pipe((0,D.R)(this.onDestroy$)).subscribe({next:(n=(0,u.Z)(function*(o){"string"==typeof o?(t.filteredUsers$.next(yield t.fetchSearchedUsers(o)),t.user=null,t.isEnteringNewUser||(t.inputControl.setValue(o.replace("[object Object]",""),{emitEvent:!1}),t.isEnteringNewUser=!0)):(t.user=o,t.inputControl.setValue(o.username,{emitEvent:!1}))}),function(a){return n.apply(this,arguments)})})}fetchSearchedUsers(t){var n=this;return(0,u.Z)(function*(){let o={};(t=t.toLowerCase())&&(o={...o,username:{startsWith:t,mode:"INSENSITIVE"}}),n.rutgersVerified&&(o={...o,netId:{exists:!0}}),0===Object.keys(o).length&&(o=void 0);const a=yield(0,v.z)(n.backend.query({query:b.Ps`
          query ($filter: UserFilterInput, $sorts: [UserSortInput!], $limit: Int) {
            users(filter: $filter, sorts: $sorts, limit: $limit) {
              id
              username
              displayName
              avatarLink
            }
          }
        `,variables:{limit:10,filter:o,sorts:[{username:"asc"}]}}));return a.error?[]:a.data.users})()}onAutoCompleteOptionSelected(){this.isEnteringNewUser=!1}}return i.nextId=0,i.\u0275fac=function(t){return new(t||i)(e.Y36(B.U),e.Y36(N.v),e.Y36(J.tE),e.Y36(e.SBq),e.Y36(d.a5,10))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-user-input"]],inputs:{rutgersVerified:"rutgersVerified"},features:[e._Bn([{provide:g.Eo,useExisting:i}]),e.qOj],decls:6,vars:9,consts:[["class","app-user-input",3,"user","ngClass",4,"ngIf"],["type","text","placeholder","Enter username","matInput","",3,"formControl","matAutocomplete","ngClass"],["autoActiveFirstOption","",3,"optionSelected"],["auto",""],[3,"value",4,"ngFor","ngForOf"],[1,"app-user-input",3,"user","ngClass"],[3,"value"],[3,"user"]],template:function(t,n){if(1&t&&(e.YNc(0,vt,1,4,"app-inline-profile",0),e._UZ(1,"input",1),e.TgZ(2,"mat-autocomplete",2,3),e.NdJ("optionSelected",function(){return n.onAutoCompleteOptionSelected()}),e.YNc(4,xt,2,2,"mat-option",4),e.ALo(5,"async"),e.qZA()),2&t){const o=e.MAs(3);e.Q6J("ngIf",n.user&&!n.isEnteringNewUser),e.xp6(1),e.Q6J("formControl",n.inputControl)("matAutocomplete",o)("ngClass",e.VKq(7,yt,!n.isEnteringNewUser)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(5,5,n.filteredUsers$))}},dependencies:[m.mk,m.sg,m.O5,d.Fj,d.JJ,d.oH,y.ey,P.Nt,je.XC,je.ZL,K,m.Ov]}),i})();function kt(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," User is required "),e.qZA())}let Ct=(()=>{class i{constructor(t,n,o,a,l){this.backend=n,this.uiMessage=o,this.dialogRef=a,this.data=l,this.monitor=new Y.y,this.form=t.group({user:[null,[d.kI.required]]})}exit(t=!1){var n=this;return(0,u.Z)(function*(){n.monitor.isProcessing||n.dialogRef.close(t)})()}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Missing info!");if(this.data.project.members?.some(t=>t?.user?.id===this.form.get("user")?.value))throw new Error("User is already in the project!");return!0}catch(t){return t instanceof Error&&this.uiMessage.error(t.message),!1}}add(){var t=this;return(0,u.Z)(function*(){if(t.monitor.isProcessing||!t.validate())return;t.monitor.addProcess();const n=yield(0,v.z)(t.backend.withAuth().mutate({mutation:b.Ps`
          mutation ForceCreateProjectMember($input: NewProjectMemberInput!) {
            newProjectMember(input: $input)
          }
        `,variables:{input:{projectId:t.data.project.id,userId:t.form.get("user")?.value}}}));t.monitor.removeProcess(),!n.errors&&t.exit(!0)})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.qu),e.Y36(N.v),e.Y36(M.S),e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-force-add-user-dialog"]],decls:14,vars:4,consts:[[3,"formGroup"],["appearance","outline",2,"width","100%"],["formControlName","user"],[4,"ngIf"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"h3"),e._uU(2,"Invite a User"),e.qZA(),e.TgZ(3,"form",0)(4,"mat-form-field",1)(5,"mat-label"),e._uU(6,"User"),e.qZA(),e._UZ(7,"app-user-input",2),e.YNc(8,kt,2,0,"mat-error",3),e.qZA()()(),e.TgZ(9,"mat-dialog-actions")(10,"button",4),e.NdJ("click",function(){return n.exit()}),e._uU(11,"Exit "),e.qZA(),e.TgZ(12,"button",4),e.NdJ("click",function(){return n.add()}),e._uU(13,"Add "),e.qZA()()),2&t){let o;e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("ngIf",null==(o=n.form.get("user"))?null:o.hasError("required")),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing)}},dependencies:[m.O5,we,C.lW,A.v,g.TO,g.KE,g.hX,h.xY,h.H8,d._Y,d.JJ,d.JL,d.sg,d.u]}),i})();var ae=s(3535),Tt=s(5705),jt=s(398);function wt(i,r){1&i&&(e.TgZ(0,"p",6),e._uU(1,"Empty for now..."),e.qZA())}const It=function(){return{}};let Ie=(()=>{class i{constructor(t){this.cdn=t,this.projectMember={}}ngOnInit(){}getRoles(){return this.projectMember.roles?.map(t=>t.roleCode)??[]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B.U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-project-member-profile"]],inputs:{projectMember:"projectMember"},decls:9,vars:5,consts:[[2,"display","flex","flex-direction","row","gap","24px"],[3,"user"],[2,"display","flex","flex-direction","column","max-height","100%"],["class","app-project-member-profile text-disabled",4,"ngIf"],[2,"flex","1"],[3,"roles"],[1,"app-project-member-profile","text-disabled"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"app-basic-profile",1),e.TgZ(2,"div",2)(3,"h2"),e._uU(4,"Contributions"),e.qZA(),e.YNc(5,wt,2,0,"p",3),e.TgZ(6,"p",4),e._uU(7),e.qZA(),e._UZ(8,"app-roles-display",5),e.qZA()()),2&t){let o;e.xp6(1),e.Q6J("user",null!==(o=n.projectMember.user)&&void 0!==o?o:e.DdM(4,It)),e.xp6(4),e.Q6J("ngIf",!n.projectMember.contributions),e.xp6(2),e.Oqu(n.projectMember.contributions),e.xp6(1),e.Q6J("roles",n.getRoles())}},dependencies:[m.O5,Tt.u,jt.l]}),i})();var Ae=s(6410);function At(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," User is required "),e.qZA())}let Mt=(()=>{class i{constructor(t,n,o,a,l){this.backend=n,this.uiMessage=o,this.dialogRef=a,this.data=l,this.monitor=new Y.y,this.form=t.group({user:[null,[d.kI.required]]})}ngOnInit(){}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Form is incomplete!");const t=this.form.get("user")?.value;if(this.data.project.invites?.some(n=>n?.user?.id===t&&n?.type===_.PA.Outgoing))throw new Error("User already has an outgoing invite from this project!");if(this.data.project.members?.some(n=>n?.user?.id===t))throw new Error("User is already in the project!");return!0}catch(t){return t instanceof Error&&this.uiMessage.error(t.message),!1}}invite(){var t=this;return(0,u.Z)(function*(){if(t.monitor.isProcessing||!t.validate())return;t.monitor.addProcess();const n=yield(0,v.z)(t.backend.withAuth().mutate({mutation:b.Ps`
          mutation InviteUserToProject($input: NewProjectInviteInput!) {
            newProjectInvite(input: $input)
          }
        `,variables:{input:{type:_.PA.Outgoing,projectId:t.data.project.id,userId:t.form.get("user")?.value}}}));return t.monitor.removeProcess(),n.errors?void 0:t.exit(!0)})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.QS),e.Y36(N.v),e.Y36(M.S),e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invite-user-dialog"]],decls:14,vars:5,consts:[[3,"formGroup"],["appearance","outline",2,"width","100%"],["formControlName","user",3,"rutgersVerified"],[4,"ngIf"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"h3"),e._uU(2,"Invite a User"),e.qZA(),e.TgZ(3,"form",0)(4,"mat-form-field",1)(5,"mat-label"),e._uU(6,"User"),e.qZA(),e._UZ(7,"app-user-input",2),e.YNc(8,At,2,0,"mat-error",3),e.qZA()()(),e.TgZ(9,"mat-dialog-actions")(10,"button",4),e.NdJ("click",function(){return n.exit()}),e._uU(11,"Exit "),e.qZA(),e.TgZ(12,"button",4),e.NdJ("click",function(){return n.invite()}),e._uU(13,"Invite "),e.qZA()()),2&t){let o;e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("rutgersVerified",!0),e.xp6(1),e.Q6J("ngIf",null==(o=n.form.get("user"))?null:o.hasError("required")),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing)}},dependencies:[m.O5,we,C.lW,A.v,g.TO,g.KE,g.hX,h.xY,h.H8,d._Y,d.JJ,d.JL,d.sg,d.u]}),i})();function Zt(i,r){1&i&&(e.TgZ(0,"th",16),e._uU(1," User "),e.qZA())}function St(i,r){if(1&i&&(e.TgZ(0,"td",17),e._UZ(1,"app-inline-profile",18),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("user",t.user)}}function Pt(i,r){1&i&&(e.TgZ(0,"th",19),e._uU(1," Type "),e.qZA())}function Ot(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u{1f4e9} Incoming"),e.qZA())}function Dt(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"\u{1f4e4} Outgoing"),e.qZA())}function Ut(i,r){if(1&i&&(e.TgZ(0,"td",20),e.YNc(1,Ot,2,0,"div",21),e.YNc(2,Dt,2,0,"div",21),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("ngIf","INCOMING"===t.type),e.xp6(1),e.Q6J("ngIf","OUTGOING"===t.type)}}function Jt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"th",22)(1,"div",23)(2,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.invite())}),e.TgZ(3,"mat-icon"),e._uU(4,"add"),e.qZA(),e._uU(5," Invite User "),e.qZA()()()}}function Et(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",27),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a.onAcceptInvite(o))}),e.TgZ(1,"mat-icon"),e._uU(2,"check_circle"),e.qZA()()}if(2&i){const t=e.oxw(3);e.Q6J("disabled",t.monitor.isProcessing)}}function qt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"td",20)(1,"div",23),e.YNc(2,Et,3,1,"button",25),e.TgZ(3,"button",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.onRejectInvite(a))}),e.TgZ(4,"mat-icon"),e._uU(5,"cancel"),e.qZA()()()()}if(2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(2),e.Q6J("ngIf","INCOMING"===t.type),e.xp6(1),e.Q6J("disabled",n.monitor.isProcessing)}}function Nt(i,r){1&i&&e._UZ(0,"tr",28)}function Yt(i,r){1&i&&e._UZ(0,"tr",29)}function Qt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"app-filter-header",2,3),e.NdJ("newSearchRequest$",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onNewSearchRequest)}),e.qZA(),e._UZ(3,"div",4),e.TgZ(4,"table",5),e.NdJ("matSortChange",function(o){e.CHM(t);const a=e.oxw();return e.KtG(a.sortData(o))}),e.ynx(5,6),e.YNc(6,Zt,2,0,"th",7),e.YNc(7,St,2,1,"td",8),e.BQk(),e.ynx(8,9),e.YNc(9,Pt,2,0,"th",10),e.YNc(10,Ut,3,2,"td",11),e.BQk(),e.ynx(11,12),e.YNc(12,Jt,6,0,"th",13),e.YNc(13,qt,6,2,"td",11),e.BQk(),e.YNc(14,Nt,1,0,"tr",14),e.YNc(15,Yt,1,0,"tr",15),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("dataSource",t.filteredInvites),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns)}}let Ft=(()=>{class i{constructor(t,n,o){this.backend=t,this.breakpointManager=n,this.dialog=o,this.edited=new e.vpe,this.project={},this.projectOptions={isMember:!1,manageSomeMembers:!1,nonExistent:!1,canUpdateProject:!1,inviteSent:!1,isAuthenticated:!1,loaded:!1,canDeleteProject:!1,canManageMetadata:!1,canCreateProjectMember:!1,canJoinProject:!1},this.monitor=new Y.y,this.displayedColumns=["user","type","buttons"],this.filteredInvites=[],this.onDestroy$=new Q.x}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}ngOnChanges(t){t.project&&(this.monitor.removeProcess(),this.project.invites&&(this.filteredInvites=(0,j.I8)(this.project.invites)))}ngAfterViewInit(){!this.filterHeader||this.filterHeader.newSearchRequest.pipe((0,D.R)(this.onDestroy$)).subscribe(this.onNewSearchRequest.bind(this))}onNewSearchRequest(t){""===t?this.filteredInvites=(0,j.I8)(this.project.invites):(this.filteredInvites=this.project.invites.filter(n=>n.user.username.indexOf(t)>-1),this.filteredInvites=this.filteredInvites.sort((n,o)=>o.user.username.indexOf(t)-n.user.username.indexOf(t)))}onAcceptInvite(t){var n=this;return(0,u.Z)(function*(){n.monitor.isProcessing||(n.monitor.addProcess(),yield(0,v.z)(n.backend.withAuth().mutate({mutation:b.Ps`
          mutation AcceptProjectInvite($inviteId: ID!) {
            acceptProjectInvite(inviteId: $inviteId)
          }
        `,variables:{inviteId:t.id}})))})()}onRejectInvite(t){var n=this;return(0,u.Z)(function*(){n.monitor.isProcessing||(n.monitor.addProcess(),yield(0,v.z)(n.backend.withAuth().mutate({mutation:b.Ps`
          mutation RejectProjectInvite($inviteId: ID!) {
            deleteProjectInvite(inviteId: $inviteId)
          }
        `,variables:{inviteId:t.id}})))})()}invite(){var t=this;return(0,u.Z)(function*(){(yield(0,v.z)(t.dialog.open(Mt,{data:{project:t.project},width:"25em",maxWidth:"90vw"}).afterClosed()))&&t.edited.emit()})()}sortData(t){const n=this.filteredInvites.slice();this.filteredInvites=t.active&&""!==t.direction?n.sort((o,a)=>{const l="asc"===t.direction;switch(t.active){case"user":return(0,j.qu)(o.user?.username,a.user?.username,l);case"type":return(0,j.qu)(o.type,a.type,l);default:return 0}}):n}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N.v),e.Y36(Ce.I),e.Y36(h.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-invites-tab"]],viewQuery:function(t,n){if(1&t&&e.Gf(ae.B,5),2&t){let o;e.iGM(o=e.CRH())&&(n.filterHeader=o.first)}},inputs:{project:"project",projectOptions:"projectOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:1,vars:1,consts:[["style","margin-top: 2em;",4,"ngIf"],[2,"margin-top","2em"],["searchBar","",2,"flex","1",3,"newSearchRequest$"],["membersFilter",""],[2,"display","flex","flex-direction","column","gap","0.25em"],["mat-table","","matSort","","matSort","",1,"mat-elevation-z8",2,"width","100%",3,"dataSource","matSortChange"],["matColumnDef","user"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by user",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 20em; overflow: hidden;",4,"matCellDef"],["matColumnDef","type"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","buttons"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by user"],["mat-cell","",2,"max-width","20em","overflow","hidden"],[3,"user"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type"],["mat-cell",""],[4,"ngIf"],["mat-header-cell",""],[2,"display","flex","justify-content","right"],["mat-stroked-button","","pill","",1,"text-foreground",3,"click"],["mat-icon-button","",3,"disabled","click",4,"ngIf"],["mat-icon-button","",2,"margin-left","0.5em",3,"disabled","click"],["mat-icon-button","",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,n){1&t&&e.YNc(0,Qt,16,3,"div",0),2&t&&e.Q6J("ngIf",n.project.invites)},dependencies:[m.O5,k.Hw,K,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,C.lW,A.v,te,me,ae.B]}),i})();const Rt=["membersFilter"];function Bt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf,a=e.oxw();return e.KtG(a.onTransferOwnership(o))}),e.TgZ(3,"mat-icon"),e._uU(4,"transfer_within_a_station"),e.qZA()()(),e.TgZ(5,"div",22)(6,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf,a=e.oxw();return e.KtG(a.onEdit(o))}),e.TgZ(7,"mat-icon"),e._uU(8,"edit"),e.qZA()()(),e.TgZ(9,"div",22)(10,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().ngIf,a=e.oxw();return e.KtG(a.onKick(o))}),e.TgZ(11,"mat-icon"),e._uU(12,"logout"),e.qZA()()()()}if(2&i){const t=r.ngIf;e.xp6(1),e.Q6J("matTooltip",t.transferOwnershipTooltip),e.xp6(1),e.Q6J("disabled",!t.canTransferOwnership),e.xp6(3),e.Q6J("matTooltip",t.updateMemberTooltip),e.xp6(1),e.Q6J("disabled",!t.canUpdateMember),e.xp6(3),e.Q6J("matTooltip",t.kickMemberTooltip),e.xp6(1),e.Q6J("disabled",!t.canKickMember)}}function Lt(i,r){if(1&i&&(e.TgZ(0,"div",17)(1,"h2"),e._uU(2,"Your Profile"),e.qZA(),e.TgZ(3,"div",18),e._UZ(4,"app-project-member-profile",19),e.YNc(5,Bt,13,6,"div",20),e.qZA()()),2&i){const t=r.ngIf,n=e.oxw();e.xp6(4),e.Q6J("projectMember",t),e.xp6(1),e.Q6J("ngIf",n.getProjectMemberOptions(t))}}function Ht(i,r){1&i&&(e.TgZ(0,"div",25),e._uU(1,"Members"),e.qZA())}function $t(i,r){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove_red_eye"),e.qZA(),e.YNc(2,Ht,2,0,"div",24)),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE","key"))}}function zt(i,r){1&i&&(e.TgZ(0,"th",26),e._uU(1," User "),e.qZA())}function Gt(i,r){if(1&i&&(e.TgZ(0,"td",27),e._UZ(1,"app-inline-profile",28),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Q6J("user",t.user)}}function Vt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",32),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onForceAddUser())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3," Force Add User "),e.qZA()}}function Kt(i,r){if(1&i&&(e.TgZ(0,"th",29)(1,"div",30),e.YNc(2,Vt,4,0,"button",31),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.projectOptions.canCreateProjectMember)}}function Xt(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",22)(2,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onTransferOwnership(o))}),e.TgZ(3,"mat-icon"),e._uU(4,"transfer_within_a_station"),e.qZA()()(),e.TgZ(5,"div",22)(6,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onEdit(o))}),e.TgZ(7,"mat-icon"),e._uU(8,"edit"),e.qZA()()(),e.TgZ(9,"div",22)(10,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw();return e.KtG(a.onKick(o))}),e.TgZ(11,"mat-icon"),e._uU(12,"logout"),e.qZA()()()()}if(2&i){const t=r.ngIf;e.xp6(1),e.Q6J("matTooltip",t.transferOwnershipTooltip),e.xp6(1),e.Q6J("disabled",!t.canTransferOwnership),e.xp6(3),e.Q6J("matTooltip",t.updateMemberTooltip),e.xp6(1),e.Q6J("disabled",!t.canUpdateMember),e.xp6(3),e.Q6J("matTooltip",t.kickMemberTooltip),e.xp6(1),e.Q6J("disabled",!t.canKickMember)}}function Wt(i,r){if(1&i&&(e.TgZ(0,"td",33),e.YNc(1,Xt,13,6,"div",34),e.qZA()),2&i){const t=r.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.getProjectMemberOptions(t))}}function ei(i,r){1&i&&e._UZ(0,"tr",35)}function ti(i,r){1&i&&e._UZ(0,"tr",36)}function ii(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"Invites"),e.qZA())}function ni(i,r){if(1&i&&(e.TgZ(0,"div",38)(1,"mat-icon"),e._uU(2,"mail"),e.qZA(),e.YNc(3,ii,2,0,"div",16),e.qZA()),2&i){const t=e.oxw(2);let n;e.Q6J("matBadge",null!==(n=null==t.project||null==t.project.invites?null:t.project.invites.length)&&void 0!==n&&n?null==t.project||null==t.project.invites?null:t.project.invites.length:void 0),e.xp6(3),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE","key"))}}function oi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,ni,4,2,"ng-template",3),e.TgZ(2,"app-invites-tab",37),e.NdJ("edited",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onInvitesEdited())}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("project",t.project)("projectOptions",t.projectOptions)}}let ri=(()=>{class i{constructor(t,n,o,a,l,p){this.cdn=t,this.breakpointManager=n,this.backend=o,this.security=a,this.uiMessage=l,this.dialog=p,this.edited=new e.vpe,this.project={},this.projectOptions={isMember:!1,manageSomeMembers:!1,nonExistent:!1,canUpdateProject:!1,inviteSent:!1,isAuthenticated:!1,loaded:!1,canDeleteProject:!1,canManageMetadata:!1,canCreateProjectMember:!1,canJoinProject:!1},this.displayedColumns=["member","buttons"],this.filteredProjectMembers=[],this.onDestroy$=new Q.x}ngAfterViewInit(){!this.filterHeader||this.filterHeader.newSearchRequest.pipe((0,D.R)(this.onDestroy$)).subscribe(this.onNewSearchRequest.bind(this))}ngOnChanges(t){t.project&&(this.project.members&&(this.filteredProjectMembers=(0,j.I8)(this.project.members)),this.currentProjectOwner=this.project.members?.find(n=>n?.roles?.some(o=>o?.roleCode===_.LO.ProjectOwner)))}getUserMember(){return this.project.members?.find(t=>t?.user?.id===this.security.securityContext?.userId)??{}}onNewSearchRequest(t){""===t?this.filteredProjectMembers=(0,j.I8)(this.project.members):(this.filteredProjectMembers=this.project.members.filter(n=>n.user.username.indexOf(t)>-1),this.filteredProjectMembers=this.filteredProjectMembers.sort((n,o)=>o.user.username.indexOf(t)-n.user.username.indexOf(t)))}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}onEdit(t){var n=this;return(0,u.Z)(function*(){(yield(0,v.z)(n.dialog.open(ft,{data:{projectMember:t,projectId:n.project.id,projectMemberOptions:n.getProjectMemberOptions(t)},width:"37.5em",maxWidth:"90vw"}).afterClosed()))&&n.edited.emit()})()}onKick(t){var n=this;return(0,u.Z)(function*(){let o=`Are you sure you want to kick "${t?.user?.displayName}" (@${t?.user?.username})?`;if(t?.user?.id===n.security.securityContext?.userId&&(o="Are you sure you want to leave the project?"),yield n.uiMessage.confirmDialog(o).pipe((0,re.P)()).toPromise()){const l=yield(0,v.z)(n.backend.withAuth().mutate({mutation:b.Ps`
            mutation KickMember($id: ID!) {
              deleteProjectMember(id: $id)
            }
          `,variables:{id:t?.id}}));if(l.errors||!l.data)return}})()}getProjectMemberOptions(t){if(!t||!t.id||!this.project.members)return{canKickMember:!1,canUpdateMember:!1,canTransferOwnership:!1,canManageMemberRoles:!1,kickMemberTooltip:"",updateMemberTooltip:"",transferOwnershipTooltip:""};const n=this.security.makePermCalc();let o=!0,a="";n.withDomain({projectMemberId:t.id}).hasPermission(_.y3.ManageProjectMember)||(o=!1,a="Insufficient permissions");let l=!0,p="";t.id===this.currentProjectOwner?.id&&(l=!1,p="Cannot transfer ownership to the current project owner!"),n.withDomain({projectId:this.project.id??""}).hasPermission(_.y3.TransferProjectOwnership)||(l=!1,p="Insufficient permissions");let x=!0,T="";return o||(x=!1,T="Insufficient permissions"),1===this.project.members.length&&(x=!1,T="Project must have at least one member"),t.roles?.some(U=>U?.roleCode===_.LO.ProjectOwner)&&(x=!1,T="Cannot kick the owner until ownership is transferred!"),{canUpdateMember:o,canKickMember:x,canManageMemberRoles:n.withDomain({projectMemberId:t.id}).hasPermission(_.y3.ManageProjectMemberRoles),canTransferOwnership:l,kickMemberTooltip:T,updateMemberTooltip:a,transferOwnershipTooltip:p}}onTransferOwnership(t){var n=this;return(0,u.Z)(function*(){!t||!(yield(0,v.z)(n.uiMessage.confirmDialog(`Are you sure you want to transfer ownership of "${n.project.name}" to "${t.user?.username}"?`)))||(yield(0,v.z)(n.backend.withAuth().mutate({mutation:b.Ps`
          mutation TransferProjectOwnership($projectId: ID!, $memberId: ID!) {
            transferProjectOwnership(projectId: $projectId, memberId: $memberId)
          }
        `,variables:{projectId:n.project.id,memberId:t.id}}))).errors||(n.edited.emit(),n.uiMessage.notifyConfirmed("Ownership transferred!"))})()}onInvitesEdited(){this.edited.emit()}sortData(t){const n=this.filteredProjectMembers.slice();this.filteredProjectMembers=t.active&&""!==t.direction?n.sort((o,a)=>"member"===t.active?(0,j.qu)(o.user?.username,a.user?.username,"asc"===t.direction):0):n}onForceAddUser(){var t=this;return(0,u.Z)(function*(){(yield(0,v.z)(t.dialog.open(Ct,{data:{project:t.project},width:"25em",maxWidth:"90vw"}).afterClosed()))&&t.edited.emit()})()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.Ub),e.Y36(w.IW),e.Y36(w.v$),e.Y36(w.Il),e.Y36(M.S),e.Y36(h.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-members-tab"]],viewQuery:function(t,n){if(1&t&&e.Gf(Rt,5),2&t){let o;e.iGM(o=e.CRH())&&(n.filterHeader=o.first)}},inputs:{project:"project",projectOptions:"projectOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:20,vars:6,consts:[["full-page",""],["style","\n    margin-bottom: 5em;\n  ",4,"ngIf"],["mat-align-tabs","center","mat-stretch-tabs","",3,"selectedIndex"],["mat-tab-label",""],[2,"margin-top","2em"],["searchBar",""],["membersFilter",""],["mat-table","","matSort","",1,"mat-elevation-z8",2,"width","100%",3,"dataSource","matSortChange"],["matColumnDef","member"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by user",4,"matHeaderCellDef"],["mat-cell","","style","max-width: 100px; overflow: hidden;",4,"matCellDef"],["matColumnDef","buttons"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[2,"margin-bottom","5em"],[2,"display","flex","flex-direction","row","gap","1em"],[2,"flex","1",3,"projectMember"],["style","\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        gap: 0.5em;\n      ",4,"ngIf"],[2,"display","flex","flex-direction","column","justify-content","center","gap","0.5em"],[3,"matTooltip"],["mat-icon-button","",3,"disabled","click"],["style","margin-left: 0.5em;",4,"ngIf"],[2,"margin-left","0.5em"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by user"],["mat-cell","",2,"max-width","100px","overflow","hidden"],[3,"user"],["mat-header-cell",""],[2,"display","flex","justify-content","right"],["mat-stroked-button","","pill","","class","text-foreground",3,"click",4,"ngIf"],["mat-stroked-button","","pill","",1,"text-foreground",3,"click"],["mat-cell",""],["style","\n                display: flex;\n                justify-content: right;\n              ",4,"ngIf"],["mat-header-row",""],["mat-row",""],[3,"project","projectOptions","edited"],["matBadgeOverlap","false",2,"display","flex","flex-direction","row","gap","0.5em",3,"matBadge"]],template:function(t,n){1&t&&(e.TgZ(0,"app-bg-container",0),e.YNc(1,Lt,6,2,"div",1),e.TgZ(2,"h2"),e._uU(3,"Membership"),e.qZA(),e.TgZ(4,"mat-tab-group",2)(5,"mat-tab"),e.YNc(6,$t,3,1,"ng-template",3),e.TgZ(7,"div",4),e._UZ(8,"app-filter-header",5,6),e.TgZ(10,"table",7),e.NdJ("matSortChange",function(a){return n.sortData(a)}),e.ynx(11,8),e.YNc(12,zt,2,0,"th",9),e.YNc(13,Gt,2,1,"td",10),e.BQk(),e.ynx(14,11),e.YNc(15,Kt,3,1,"th",12),e.YNc(16,Wt,2,1,"td",13),e.BQk(),e.YNc(17,ei,1,0,"tr",14),e.YNc(18,ti,1,0,"tr",15),e.qZA()()(),e.YNc(19,oi,3,2,"mat-tab",16),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("ngIf",n.projectOptions.isMember&&n.getUserMember()),e.xp6(3),e.Q6J("selectedIndex",0),e.xp6(6),e.Q6J("dataSource",n.filteredProjectMembers),e.xp6(7),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("ngIf",n.projectOptions.canUpdateProject))},dependencies:[m.O5,k.Hw,le.k,S.SP,S.uD,S.uX,z.gM,K,f.BZ,f.fO,f.as,f.w1,f.Dz,f.nj,f.ge,f.ev,f.XQ,f.Gk,C.lW,A.v,te,me,ae.B,Ie,Ae.h,Ft],styles:[".content-width-padding[_ngcontent-%COMP%]{padding:var(--content-padding);padding-top:0}.content[_ngcontent-%COMP%]{display:block;margin:auto;padding-top:0;max-width:var(--content-width)}.mat-tab-labels[_ngcontent-%COMP%]{justify-content:space-around;display:flex}.mat-tab-member[_ngcontent-%COMP%]{flex:1}.mat-tab-buttons[_ngcontent-%COMP%]{flex:0}"]}),i})();var Me=s(9910),se=s(3451),Ze=s(8505),ai=s(5561),W=s(7084);function si(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-chip",4),e.NdJ("removed",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.remove(a))}),e._uU(1),e.TgZ(2,"button",5)(3,"mat-icon"),e._uU(4,"cancel"),e.qZA()()()}if(2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}let ci=(()=>{class i extends X.Y{constructor(){super(...arguments),this.limit=-1,this.addOnBlur=!0,this.separatorKeysCodes=[H.K5,H.OC],this.controlType="app-user-input",this.id=`${this.controlType}-${i.nextId++}`}add(t){const n=(t.value||"").trim();this.value||(this.value=[]),n&&!this.value.includes(n)&&(this.limit<0||this.value.length<this.limit)&&(this.value.push(n),this.onChange(this.value)),t.chipInput.clear()}remove(t){if(!this.value)return;const n=this.value.indexOf(t);n>=0&&(this.value.splice(n,1),this.onChange(this.value))}get empty(){return!this.value||0===this.value.length}}return i.nextId=0,i.\u0275fac=function(){let r;return function(n){return(r||(r=e.n5z(i)))(n||i)}}(),i.\u0275cmp=e.Xpm({type:i,selectors:[["app-tags-input"]],inputs:{limit:"limit"},features:[e._Bn([{provide:g.Eo,useExisting:i}]),e.qOj],decls:4,vars:4,consts:[["aria-label","Tags editor",2,"width","100%"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New tag...",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"removed"],["matChipRemove",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-chip-list",0,1),e.YNc(2,si,5,1,"mat-chip",2),e.TgZ(3,"input",3),e.NdJ("matChipInputTokenEnd",function(a){return n.add(a)}),e.qZA()()),2&t){const o=e.MAs(1);e.xp6(2),e.Q6J("ngForOf",n.value),e.xp6(1),e.Q6J("matChipInputFor",o)("matChipInputSeparatorKeyCodes",n.separatorKeysCodes)("matChipInputAddOnBlur",n.addOnBlur)}},dependencies:[m.sg,W.qn,W.HS,W.oH,W.qH,k.Hw]}),i})();function li(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"input",5),e.NdJ("ngModelChange",function(o){const l=e.CHM(t).$implicit;return e.KtG(l.string=o)})("ngModelChange",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.edited())}),e.qZA()(),e.TgZ(3,"mat-icon",6),e._uU(4,"drag_indicator"),e.qZA(),e.TgZ(5,"button",7),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l.deleteString(a))}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA()()()}if(2&i){const t=r.$implicit;e.xp6(2),e.Q6J("ngModel",t.string)}}let di=(()=>{class i extends X.Y{constructor(t,n,o,a){super(n,o,a),this.changeDetector=t,this.limit=-1,this.stringElementArray=[]}get shouldLabelFloat(){return!0}get value(){return this.stringElementArray.map(t=>t.string)}set value(t){t&&(this.stringElementArray=t.map(n=>({string:n})))}drop(t){!this.stringElementArray||t.previousIndex===t.currentIndex||((0,F.bA)(this.stringElementArray,t.previousIndex,t.currentIndex),this.edited())}edited(){this.onChange(this.value),this.markAsTouched()}addString(){this.stringElementArray.unshift({string:""}),this.edited()}deleteString(t){this.stringElementArray.splice(t,1),this.edited(),this.changeDetector.detectChanges()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.sBO),e.Y36(J.tE),e.Y36(e.SBq),e.Y36(d.a5,10))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-string-array-input"]],inputs:{limit:"limit"},features:[e._Bn([{provide:g.Eo,useExisting:i}]),e.qOj],decls:6,vars:1,consts:[["cdkDropList","",1,"background-color-card","border-color-divider",2,"width","100%","max-width","100%","border-style","solid","border-width","1px","display","block","border-radius","0.5em","overflow","hidden",3,"cdkDropListDropped"],["mat-stroked-button","",1,"border-color-divider",2,"width","100%","border-radius","0.5em 0.5em 0 0","border-left","none","border-right","none","border-top","none","border-bottom-style","solid","border-bottom-width","1px",3,"click"],["class","drag-item background-color-card text-text border-color-divider","style","\n    padding: 1em 0.75em;\n    border-bottom-style: solid;\n    border-bottom-width: 1px;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 0.5em;\n    justify-content: space-between;\n    box-sizing: border-box;\n    font-size: 1em;\n  ","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"drag-item","background-color-card","text-text","border-color-divider",2,"padding","1em 0.75em","border-bottom-style","solid","border-bottom-width","1px","display","flex","flex-direction","row","align-items","center","gap","0.5em","justify-content","space-between","box-sizing","border-box","font-size","1em"],[1,"border-color-divider",2,"border-style","solid","border-width","1px","border-radius","0.5em","padding","0.5em","flex","1"],["matInput","","type","text","placeholder","Enter text here...",3,"ngModel","ngModelChange"],["cdkDragHandle","",2,"cursor","move"],["mat-icon-button","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("cdkDropListDropped",function(a){return n.drop(a)}),e.TgZ(1,"button",1),e.NdJ("click",function(){return n.addString()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA(),e._uU(4," Add "),e.qZA(),e.YNc(5,li,8,1,"div",2),e.qZA()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.stringElementArray))},dependencies:[m.sg,F.Wj,F.Zt,F.Bh,P.Nt,k.Hw,d.Fj,d.JJ,d.On,C.lW,A.v],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.drag-item[_ngcontent-%COMP%]:last-child{border-bottom:solid transparent 0}.drag-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .drag-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),i})();var mi=s(2272),ee=s(7117),pi=s(8009);const ui=["imageFileInput"];function _i(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"button",6),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw();return e.KtG(l.deleteImageFile(a))}),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()(),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",8)(7,"div",9),e._UZ(8,"img",10),e.qZA()()()}if(2&i){const t=r.$implicit,n=e.oxw();e.xp6(5),e.Oqu(t.source),e.xp6(3),e.Q6J("src",n.cdn.getFileLink(t.source),e.LSH)}}let hi=(()=>{class i extends X.Y{constructor(t,n,o,a,l,p){super(a,l,p),this.cdn=t,this.uiMessageService=n,this.changeDetector=o,this.fileSizeLimit="10 MB",this.limit=-1,this.monitor=new Y.y,this.fileSizeLimitBytes=0}ngOnInit(){this.fileSizeLimitBytes=ee.P.byteStringToBytes(this.fileSizeLimit)}get shouldLabelFloat(){return!0}onImageFileChanged(t){if(this.limit>-1&&this.value&&this.value.length>this.limit)return;const n=t.target.files[0];n&&(this.monitor.addProcess(),this.changeDetector.detectChanges(),ee.P.readAsBase64(n).then(o=>{const a=n.size;a<this.fileSizeLimitBytes?(this.value||(this.value=[]),this.value.push({upload:n,source:o}),this.onChange(this.value),this.markAsTouched()):this.uiMessageService.error(`File size is too big! ${ee.P.byteSizeToString(a)} > ${ee.P.byteSizeToString(this.fileSizeLimitBytes)}`)}).catch(o=>{console.log(o)}).finally(()=>{this.imageFileInput&&(this.imageFileInput.nativeElement.value=""),this.monitor.removeProcess()}))}deleteImageFile(t){!this.value||(this.value.splice(t,1),this.changeDetector.detectChanges(),this.onChange(this.value),this.markAsTouched())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(B.U),e.Y36(M.S),e.Y36(e.sBO),e.Y36(J.tE),e.Y36(e.SBq),e.Y36(d.a5,10))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gallery-upload"]],viewQuery:function(t,n){if(1&t&&e.Gf(ui,5),2&t){let o;e.iGM(o=e.CRH())&&(n.imageFileInput=o.first)}},inputs:{fileSizeLimit:"fileSizeLimit",limit:"limit"},features:[e._Bn([{provide:g.Eo,useExisting:i}]),e.qOj],decls:8,vars:4,consts:[["type","file","accept","image/png, image/jpeg, image/gif",2,"display","none",3,"change"],["imageFileInput",""],["mat-stroked-button","","pill","",2,"margin-bottom","0.5em",3,"disabled","click"],["column-width","15em",2,"width","100%",3,"auto-fit-columns"],["style","\n    position: relative;\n    border-radius: 0.5em;\n    padding: 1em;\n    border-style: solid;\n    border-width: 1px;\n    box-sizing: border-box;\n    display: flex;\n    gap: 0.5em;\n    flex-direction: column;\n  ","class","border-color-divider",4,"ngFor","ngForOf"],[1,"border-color-divider",2,"position","relative","border-radius","0.5em","padding","1em","border-style","solid","border-width","1px","box-sizing","border-box","display","flex","gap","0.5em","flex-direction","column"],["mat-icon-button","",2,"position","absolute","top","0.2em","right","0.2em",3,"click"],[2,"text-overflow","ellipsis","overflow","hidden","white-space","nowrap","margin-right","2em"],[2,"height","0","overflow","hidden","padding-top","100%","box-sizing","border-box","position","relative"],[2,"width","100%","vertical-align","top","position","absolute","top","0","left","0","height","100%"],[2,"height","100%","width","100%","object-fit","cover",3,"src"]],template:function(t,n){if(1&t){const o=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(l){return n.onImageFileChanged(l)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){e.CHM(o);const l=e.MAs(1);return e.KtG(l.click())}),e.TgZ(3,"mat-icon"),e._uU(4,"upload"),e.qZA(),e._uU(5," Add Image\n"),e.qZA(),e.TgZ(6,"app-card-grid",3),e.YNc(7,_i,9,2,"div",4),e.qZA()}2&t&&(e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing||n.disabled)("disabled",n.limit>-1&&n.value&&n.value.length>=n.limit),e.xp6(4),e.Q6J("auto-fit-columns",!0),e.xp6(1),e.Q6J("ngForOf",n.value))},dependencies:[m.sg,C.lW,k.Hw,pi.Y,A.v],styles:["[_nghost-%COMP%]{position:relative;width:100%}"]}),i})();const fi=["cardImageUpload"],gi=["bannerUpload"];function bi(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Project name is required "),e.qZA())}function vi(i,r){if(1&i&&(e.TgZ(0,"mat-select-trigger",29)(1,"mat-icon"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&i){const t=r.ngIf,n=e.oxw();e.xp6(2),e.Oqu(n.accessOptions[t].matIcon),e.xp6(1),e.hij(" ",n.accessOptions[t].name," ")}}function xi(i,r){if(1&i&&(e.TgZ(0,"mat-option",30)(1,"div",31)(2,"mat-icon"),e._uU(3),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=r.$implicit;e.Q6J("value",t.key),e.xp6(3),e.Oqu(t.value.matIcon),e.xp6(1),e.hij(" ",t.value.name," ")}}function yi(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Project name is required "),e.qZA())}function ki(i,r){1&i&&(e.TgZ(0,"mat-error"),e._uU(1," Pitch is required "),e.qZA())}function Ci(i,r){if(1&i&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Metadata"),e.qZA(),e.TgZ(3,"mat-form-field",11)(4,"mat-label"),e._uU(5,"Created At"),e.qZA(),e._UZ(6,"input",32),e.TgZ(7,"mat-hint"),e._uU(8,"MM/DD/YYYY"),e.qZA(),e._UZ(9,"mat-datepicker-toggle",33)(10,"mat-datepicker",null,34),e.qZA(),e.TgZ(12,"mat-form-field",11)(13,"mat-label"),e._uU(14,"Completed At"),e.qZA(),e._UZ(15,"input",35),e.TgZ(16,"mat-hint"),e._uU(17,"MM/DD/YYYY"),e.qZA(),e._UZ(18,"mat-datepicker-toggle",33)(19,"mat-datepicker",null,36),e.qZA()()),2&i){const t=e.MAs(11),n=e.MAs(20);e.xp6(6),e.Q6J("matDatepicker",t),e.xp6(3),e.Q6J("for",t),e.xp6(6),e.Q6J("matDatepicker",n),e.xp6(3),e.Q6J("for",n)}}const Ti=new RegExp(/https%3A\/\/api\.soundcloud\.com\/.+\/[0-9]+/);let ji=(()=>{class i{constructor(t,n,o,a,l,p,x){this.backend=n,this.cdnService=o,this.uiMessageService=a,this.changeDetector=l,this.dialogRef=p,this.data=x,this.edited=new e.vpe,this.monitor=new se.yv,this.accessOptions=Me.tT,this.form=t.group({name:[this.data.project.name,[d.kI.required]],access:[this.data.project.access,[d.kI.required]],galleryImages:[this.data.project.galleryImageLinks?.map(T=>({source:T}))],downloadLinks:[this.data.project.downloadLinks],soundcloudEmbedSrc:[this.data.project.soundcloudEmbedSrc],pitch:[this.data.project.pitch,[d.kI.required]],description:[this.data.project.description],tags:[this.data.project.tags?.slice()],completed:[this.data.project.completedAt],createdAt:[new Date(this.data.project.createdAt)],completedAt:[{value:this.data.project.completedAt?new Date(this.data.project.completedAt):null,disabled:!this.data.project.completedAt}]}),p.disableClose=!0}ngAfterViewInit(){!this.cardImageUpload||!this.bannerUpload||!this.data.project.id||(this.cardImageUpload.init(this.cdnService.getFileLink(this.data.project.cardImageLink)),this.bannerUpload.init(this.cdnService.getFileLink(this.data.project.bannerLink)),this.changeDetector.detectChanges())}exit(t=!1){this.monitor.isProcessing||this.dialogRef.close(t)}validate(){try{if(this.form.updateValueAndValidity(),!this.form.valid)throw new Error("Some project information is missing!");if(""!==this.form.get("soundcloudEmbedSrc")?.value&&this.form.get("soundcloudEmbedSrc")?.value!==this.data.project.soundcloudEmbedSrc){const t=this.form.get("soundcloudEmbedSrc")?.value??"",n=Ti.exec(t);if(!n||0===n.length)return this.uiMessageService.error("Soundcloud embed source is not valid!"),!1;this.form.get("soundcloudEmbedSrc")?.setValue(n[0])}return!0}catch(t){return this.uiMessageService.error(t),!1}}save(){if(this.monitor.isProcessing||!this.cardImageUpload||!this.bannerUpload||!this.validate())return;const t={id:this.data.project.id};if(this.form.get("access")?.value!==this.data.project.access&&(t.access=this.form.get("access")?.value),this.form.get("name")?.value!==this.data.project.name&&(t.name=this.form.get("name")?.value),this.form.get("pitch")?.value!==this.data.project.pitch&&(t.pitch=this.form.get("pitch")?.value),this.form.get("description")?.value!==this.data.project.description&&(t.description=this.form.get("description")?.value),this.form.get("soundcloudEmbedSrc")?.value!==this.data.project.soundcloudEmbedSrc&&(t.soundcloudEmbedSrc=this.form.get("soundcloudEmbedSrc")?.value),(!1===this.form.get("completed")?.value&&this.data.project.completedAt||!0===this.form.get("completed")?.value&&!this.data.project.completedAt)&&(t.completed=this.form.get("completed")?.value),(0,j.cO)(this.form.get("downloadLinks")?.value,this.data.project.downloadLinks)||(t.downloadLinks=this.form.get("downloadLinks")?.value),(0,j.cO)(this.form.get("tags")?.value,this.data.project.tags)||(t.tags=this.form.get("tags")?.value),this.data.projectOptions.canManageMetadata){const n=this.form.get("completedAt")?.value?.getTime();this.data.project.completedAt&&n!==this.data.project.completedAt&&(t.completedAt=n);const o=this.form.get("createdAt")?.value?.getTime();o!==this.data.project.createdAt&&(t.createdAt=o)}this.form.get("galleryImages")?.touched&&(t.galleryImages=this.form.get("galleryImages")?.value.map(n=>({...!n.source?.startsWith("data:")&&{source:n.source},...n.upload&&{upload:n.upload}}))),this.cardImageUpload.edited&&(t.cardImage=this.cardImageUpload.value?{upload:this.cardImageUpload.value,operation:_.f0.Insert}:{operation:_.f0.Delete}),this.bannerUpload.edited&&(t.banner=this.bannerUpload.value?{upload:this.bannerUpload.value,operation:_.f0.Insert}:{operation:_.f0.Delete}),Object.keys(t).length>1&&(this.monitor.addProcess(),this.backend.withAuth().mutate({mutation:b.Ps`
            mutation DialogUpdateProject($input: UpdateProjectInput!) {
              updateProject(input: $input)
            }
          `,variables:{input:t}}).pipe((0,re.P)()).subscribe({next:n=>{this.monitor.removeProcess(),this.exit(!0)},error:n=>{this.monitor.removeProcess(),this.uiMessageService.error("Error uploading data!")}}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(d.QS),e.Y36(w.v$),e.Y36(B.U),e.Y36(M.S),e.Y36(e.sBO),e.Y36(h.so),e.Y36(h.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-project-dialog"]],viewQuery:function(t,n){if(1&t&&(e.Gf(fi,5),e.Gf(gi,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.cardImageUpload=o.first),e.iGM(o=e.CRH())&&(n.bannerUpload=o.first)}},outputs:{edited:"edited"},decls:68,vars:21,consts:[[2,"position","relative",3,"formGroup"],[2,"width","100%","height","12.5em","border-radius","0.25em","overflow","hidden"],["fileSizeLimit","10 MB"],["bannerUpload",""],[2,"--size","8em","--offset","calc(var(--size) / 2)","--offset-left-over","calc(var(--size) - var(--offset))","position","relative","height","var(--offset-left-over)","margin-bottom","1em"],[1,"outline-color-card",2,"left","2em","top","calc(-1 * var(--offset))","position","absolute","height","var(--size)","width","var(--size)","border-radius","1em","overflow","hidden","outline-style","solid","outline-width","0.25em"],[1,"background-color-card",2,"width","100%","height","100%"],["fileSizeLimit","5 MB",1,"app-edit-project-dialog","card-image"],["cardImageUpload",""],[2,"display","flex","flex-direction","row","flex-wrap","wrap-reverse","justify-content","left","align-items","flex-end","margin-bottom","16px","gap","24px"],[2,"flex","1","display","flex","flex-direction","row","flex-wrap","wrap","gap","12px","align-items","center"],["appearance","outline",2,"width","100%"],["matInput","","formControlName","name"],[4,"ngIf"],["appearance","outline",2,"flex","1"],["formControlName","access"],["style","\n              display: flex;\n              align-items: center;\n              gap: 1em;\n              height: 20px;\n            ",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["formControlName","completed",2,"flex","1","margin","0.5em"],["appearance","outline",1,"no-padding",2,"width","100%","line-height","1.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","5","formControlName","pitch",3,"maxLength"],["align","end"],["appearance","outline",2,"width","100%","line-height","1.5em"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","5","formControlName","description",3,"maxLength"],["fileSizeLimit","5 MB","formControlName","galleryImages",3,"limit"],["matInput","","formControlName","soundcloudEmbedSrc"],["formControlName","downloadLinks",3,"limit"],["formControlName","tags",3,"limit"],["mat-stroked-button","","color","basic","pill","",3,"disabled","click"],[2,"display","flex","align-items","center","gap","1em","height","20px"],[3,"value"],[2,"display","flex","align-items","center"],["matInput","","formControlName","createdAt",3,"matDatepicker"],["matSuffix","",3,"for"],["createdAt",""],["matInput","","formControlName","completedAt",3,"matDatepicker"],["completedAt",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-dialog-content")(1,"form",0)(2,"div",1),e._UZ(3,"app-image-upload",2,3),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"div",6),e._UZ(8,"app-image-upload",7,8),e.qZA()()(),e.TgZ(10,"div",9)(11,"div",10)(12,"mat-form-field",11)(13,"mat-label"),e._uU(14,"Project Name"),e.qZA(),e._UZ(15,"input",12),e.YNc(16,bi,2,0,"mat-error",13),e.qZA(),e.TgZ(17,"mat-form-field",14)(18,"mat-label"),e._uU(19,"Access"),e.qZA(),e.TgZ(20,"mat-select",15),e.YNc(21,vi,4,2,"mat-select-trigger",16),e.YNc(22,xi,5,3,"mat-option",17),e.ALo(23,"keyvalue"),e.qZA(),e.YNc(24,yi,2,0,"mat-error",13),e.qZA(),e.TgZ(25,"mat-checkbox",18),e._uU(26,"Completed"),e.qZA()()(),e.TgZ(27,"mat-form-field",19)(28,"mat-label"),e._uU(29,"Pitch"),e.qZA(),e._UZ(30,"textarea",20),e.TgZ(31,"mat-hint",21),e._uU(32),e.qZA(),e.YNc(33,ki,2,0,"mat-error",13),e.qZA(),e.TgZ(34,"mat-form-field",22)(35,"mat-label"),e._uU(36,"Description"),e.qZA(),e._UZ(37,"textarea",23),e.TgZ(38,"mat-hint",21),e._uU(39),e.qZA()(),e.TgZ(40,"mat-form-field",11)(41,"mat-label"),e._uU(42,"Gallery Images"),e.qZA(),e._UZ(43,"app-gallery-upload",24),e.TgZ(44,"mat-hint",21),e._uU(45),e.qZA()(),e.TgZ(46,"mat-form-field",11)(47,"mat-label"),e._uU(48,"Soundcloud Embed Source"),e.qZA(),e._UZ(49,"input",25),e.qZA(),e.TgZ(50,"mat-form-field",11)(51,"mat-label"),e._uU(52,"Download/Play Links"),e.qZA(),e._UZ(53,"app-string-array-input",26),e.TgZ(54,"mat-hint",21),e._uU(55),e.qZA()(),e.TgZ(56,"mat-form-field",11)(57,"mat-label"),e._uU(58,"Tags"),e.qZA(),e._UZ(59,"app-tags-input",27),e.TgZ(60,"mat-hint",21),e._uU(61),e.qZA()(),e.YNc(62,Ci,21,4,"div",13),e.qZA()(),e.TgZ(63,"mat-dialog-actions")(64,"button",28),e.NdJ("click",function(){return n.exit()}),e._uU(65,"Exit "),e.qZA(),e.TgZ(66,"button",28),e.NdJ("click",function(){return n.save()}),e._uU(67,"Save "),e.qZA()()),2&t){let o,a,l,p,x,T,Z,U,I;e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(15),e.Q6J("ngIf",null==(o=n.form.get("name"))?null:o.hasError("required")),e.xp6(5),e.Q6J("ngIf",null==(a=n.form.get("access"))?null:a.value),e.xp6(1),e.Q6J("ngForOf",e.lcZ(23,19,n.accessOptions)),e.xp6(2),e.Q6J("ngIf",null==(l=n.form.get("access"))?null:l.hasError("required")),e.xp6(6),e.Q6J("maxLength",300),e.xp6(2),e.hij("",(null==(p=n.form.get("pitch"))||null==p.value?null:p.value.length)||0,"/300"),e.xp6(1),e.Q6J("ngIf",null==(x=n.form.get("pitch"))?null:x.hasError("required")),e.xp6(4),e.Q6J("maxLength",2e3),e.xp6(2),e.hij("",(null==(T=n.form.get("description"))||null==T.value?null:T.value.length)||0,"/2000"),e.xp6(4),e.Q6J("limit",5),e.xp6(2),e.hij("",(null==(Z=n.form.get("galleryImages"))||null==Z.value?null:Z.value.length)||0,"/5"),e.xp6(8),e.Q6J("limit",5),e.xp6(2),e.hij("",(null==(U=n.form.get("downloadLinks"))||null==U.value?null:U.value.length)||0,"/5"),e.xp6(4),e.Q6J("limit",5),e.xp6(2),e.hij("",(null==(I=n.form.get("tags"))||null==I.value?null:I.value.length)||0,"/5"),e.xp6(1),e.Q6J("ngIf",n.data.projectOptions.canManageMetadata),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing),e.xp6(2),e.Q6J("disabled",n.monitor.isProcessing)}},dependencies:[m.sg,m.O5,Te.IC,g.TO,g.KE,g.bx,g.hX,g.R9,P.Nt,C.lW,A.v,ci,k.Hw,h.xY,h.H8,V.Mq,V.hl,V.nW,di,mi.J,hi,be,oe.gD,oe.$L,y.ey,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,m.Nd]}),i})();var wi=s(1656);const Ii=function(){return{}};function Ai(i,r){if(1&i&&e._UZ(0,"app-project-member-profile",2),2&i){let n;e.Q6J("projectMember",null!==(n=r.$implicit)&&void 0!==n?n:e.DdM(1,Ii))}}let Mi=(()=>{class i{constructor(){this.projectMembers=[]}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-project-members-display"]],inputs:{projectMembers:"projectMembers"},decls:2,vars:1,consts:[[2,"display","flex","flex-direction","column","gap","48px"],[3,"projectMember",4,"ngFor","ngForOf"],[3,"projectMember"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Ai,1,2,"app-project-member-profile",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.projectMembers))},dependencies:[m.sg,Ie]}),i})();var Zi=s(9439);let Se=(()=>{class i{constructor(t){this.templateRef=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.Rgc))},i.\u0275dir=e.lG2({type:i,selectors:[["","appCarouselItem",""]]}),i})();var Si=s(3512);const Pi=["transitionAnimationRoot"],Oi=["fadeOutTransitionAnimationRoot"],Di=["carouselButtonsContainer"];function Ui(i,r){}function Ji(i,r){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,Ui,0,0,"ng-template",17),e.qZA()()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",n.getItemStyle()),e.xp6(1),e.Q6J("ngTemplateOutlet",t.templateRef)}}function Ei(i,r){}function qi(i,r){if(1&i&&(e.TgZ(0,"div",15)(1,"div",16),e.YNc(2,Ei,0,0,"ng-template",17),e.qZA()()),2&i){const t=r.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",n.getItemStyle()),e.xp6(1),e.Q6J("ngTemplateOutlet",t.templateRef)}}const Ni=function(i){return{active:i}};function Yi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.gotoSlide(a))}),e.qZA()}if(2&i){const t=r.index,n=e.oxw(2);e.Q6J("ngClass",e.VKq(1,Ni,n.currentSlideIndex===t))}}function Qi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4,5)(5,"div",6),e.YNc(6,Ji,3,2,"div",7),e.qZA()(),e.TgZ(7,"div",4,8)(9,"div",6),e.YNc(10,qi,3,2,"div",7),e.qZA()()(),e.TgZ(11,"div",9)(12,"button",10),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.previous(!0))}),e.TgZ(13,"mat-icon"),e._uU(14,"keyboard_arrow_left"),e.qZA()(),e.TgZ(15,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.next(!0))}),e.TgZ(16,"mat-icon"),e._uU(17,"keyboard_arrow_right"),e.qZA()()(),e.TgZ(18,"div",12,13),e.YNc(20,Yi,1,3,"button",14),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("ngStyle",t.getCarouselContainerStyle()),e.xp6(5),e.Q6J("ngStyle",t.getOffsetStyle()),e.xp6(1),e.Q6J("ngForOf",t.currentSlides),e.xp6(3),e.Q6J("ngStyle",t.getOffsetStyle()),e.xp6(1),e.Q6J("ngForOf",t.fadeoutSlides),e.xp6(8),e.Q6J("ngStyle",t.getCarouselButtonsContainerStyle()),e.xp6(2),e.Q6J("ngForOf",t.slides)}}let Fi=(()=>{class i{constructor(t,n,o,a){this.elementRef=t,this.changeDetector=n,this.animBuilder=o,this.cssLength=a,this.visibleSlides=1,this.autoplay=!1,this.autoplayDurationMS=2e3,this.timings="250ms ease-out",this.display="inline-block",this.currentSlides=[],this.fadeoutSlides=[],this.gap="0.5em",this.currentSlideIndex=0,this.sidePadding="2em"}ngOnDestroy(){this.slidePlayer&&this.slidePlayer.destroy(),this.fadeOutPlayer&&this.fadeOutPlayer.destroy(),this.fadeInPlayer&&this.fadeInPlayer.destroy(),this.stopAutoPlay()}ngAfterViewInit(){setTimeout(()=>{this.slides&&0!==this.slides.length?(this.updateCurrentSlide(0),this.autoplay&&this.startAutoPlay(),this.changeDetector.detectChanges()):this.display="none"})}updateCurrentSlide(t){if(!this.slides)return;const n=this.slides.toArray();this.currentSlideIndex=(0,j.DQ)(t,n.length),this.currentSlides=(0,j.Xl)(n,this.currentSlideIndex-1,this.visibleSlides+2)}getSlidePercentageWidth(){return 100/this.visibleSlides}getAnimationTransform(t=1){return`translateX(calc(${t} * ${this.getSlidePercentageWidth()}%)`}getDefaultAnimationTransform(){return"translateX(0)"}getNextAnimation(){return[(0,c.oB)({transform:this.getAnimationTransform(1)}),(0,c.jt)(this.timings,(0,c.oB)({transform:this.getDefaultAnimationTransform()}))]}getPreviousAnimation(){return[(0,c.oB)({transform:this.getAnimationTransform(-1)}),(0,c.jt)(this.timings,(0,c.oB)({transform:this.getDefaultAnimationTransform()}))]}getFadeoutAnimation(){return[(0,c.oB)({transform:"translateY(0)",opacity:1}),(0,c.jt)(this.timings,(0,c.oB)({transform:"translateY(100%)",opacity:0}))]}getFadeinAnimation(){return[(0,c.oB)({transform:"translateY(-100%)",opacity:0}),(0,c.jt)(this.timings,(0,c.oB)({transform:"translateY(0)",opacity:1}))]}next(t=!1){!this.transAnimRoot||(this.slidePlayer&&(this.slidePlayer.finish(),this.slidePlayer.destroy()),t&&this.stopAutoPlay(),this.slidePlayer=this.animBuilder.build(this.getNextAnimation()).create(this.transAnimRoot.nativeElement),this.slidePlayer.play(),this.updateCurrentSlide(this.currentSlideIndex+1))}previous(t=!1){!this.transAnimRoot||(this.slidePlayer&&(this.slidePlayer.finish(),this.slidePlayer.destroy()),t&&this.stopAutoPlay(),this.slidePlayer=this.animBuilder.build(this.getPreviousAnimation()).create(this.transAnimRoot.nativeElement),this.slidePlayer.play(),this.updateCurrentSlide(this.currentSlideIndex-1))}stopAutoPlay(){this.autoPlayIntervalId&&(clearInterval(this.autoPlayIntervalId),this.autoPlayIntervalId=void 0)}startAutoPlay(){this.autoPlayIntervalId||(this.autoPlayIntervalId=setInterval(()=>{this.next()},this.autoplayDurationMS))}getOffsetStyle(){return{transform:this.getDefaultAnimationTransform(),gap:this.gap}}getCarouselPxWidth(){return this.elementRef.nativeElement.offsetWidth-2*this.cssLength.convertToNumber(this.sidePadding,"px")}getPaddedCarouselPxWidth(){return this.elementRef.nativeElement.offsetWidth-this.cssLength.convertToNumber(this.sidePadding,"px")}getItemStyle(){return{width:this.getPaddedCarouselPxWidth()/this.visibleSlides-this.cssLength.convertToNumber(this.gap,"px")*(this.visibleSlides-1)*.5+"px",height:this.elementRef.nativeElement.offsetHeight+"px"}}fadeToSlide(t,n){!this.transAnimRoot||!this.fadeOutTransAnimRoot||(this.fadeOutPlayer&&(this.fadeOutPlayer.finish(),this.fadeOutPlayer.destroy()),this.fadeInPlayer&&(this.fadeInPlayer.finish(),this.fadeInPlayer.destroy()),n&&this.stopAutoPlay(),this.fadeoutSlides=this.currentSlides.slice(0),this.updateCurrentSlide(t),this.fadeInPlayer=this.animBuilder.build(this.getFadeinAnimation()).create(this.transAnimRoot.nativeElement),this.fadeOutPlayer=this.animBuilder.build(this.getFadeoutAnimation()).create(this.fadeOutTransAnimRoot.nativeElement),this.fadeInPlayer.play(),this.fadeOutPlayer.play())}gotoSlide(t){t=(0,j.DQ)(t,this.slides.length),this.currentSlideIndex!==t&&((0,j.DQ)(this.currentSlideIndex+1,this.slides.length)===t?this.next():(0,j.DQ)(this.currentSlideIndex-1,this.slides.length)===t?this.previous():this.fadeToSlide(t,!0))}areCarouselButtonsVisible(){return!!this.carouselButtonsContainer&&this.getCarouselPxWidth()>=this.carouselButtonsContainer.nativeElement.offsetWidth}getCarouselContainerStyle(){return{"padding-left":this.sidePadding,"padding-right":this.sidePadding}}getCarouselButtonsContainerStyle(){return{visibility:this.areCarouselButtonsVisible()?"visible":"hidden"}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(c._j),e.Y36(Si.I))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-carousel"]],contentQueries:function(t,n,o){if(1&t&&e.Suo(o,Se,4),2&t){let a;e.iGM(a=e.CRH())&&(n.slides=a)}},viewQuery:function(t,n){if(1&t&&(e.Gf(Pi,5),e.Gf(Oi,5),e.Gf(Di,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.transAnimRoot=o.first),e.iGM(o=e.CRH())&&(n.fadeOutTransAnimRoot=o.first),e.iGM(o=e.CRH())&&(n.carouselButtonsContainer=o.first)}},hostVars:2,hostBindings:function(t,n){2&t&&e.Udp("display",n.display)},inputs:{visibleSlides:"visibleSlides",autoplay:"autoplay",autoplayDurationMS:"autoplayDurationMS",timings:"timings"},decls:1,vars:1,consts:[["style","\n  position: relative;\n  max-width: 100%;\n  height: 100%;\n",3,"ngStyle",4,"ngIf"],[2,"position","relative","max-width","100%","height","100%",3,"ngStyle"],[2,"position","relative","width","100%","height","100%"],[2,"position","relative","overflow","hidden","height","100%","width","100%","border-radius","0.5em"],[2,"position","absolute","width","100%","top","0"],["transitionAnimationRoot",""],[2,"display","flex","flex-direction","row","justify-content","center","align-items","center",3,"ngStyle"],["style","\n            display: inline;\n            position: relative;\n          ",4,"ngFor","ngForOf"],["fadeOutTransitionAnimationRoot",""],[2,"position","absolute","display","flex","flex-direction","row","align-items","center","top","0","height","100%","width","100%"],["mat-mini-fab","","color","blank",2,"position","absolute","left","-1.25em","display","flex","align-items","center","justify-content","center",3,"click"],["mat-mini-fab","","color","blank",2,"position","absolute","right","-1.25em","display","flex","align-items","center","justify-content","center",3,"click"],[2,"position","absolute","width","100%","bottom","1em","display","flex","flex-direction","row","justify-content","center","gap","0.5em",3,"ngStyle"],["carouselButtonsContainer",""],["mat-raised-button","","style","\n        border-radius: 1em;\n        height: 0.5em;\n        overflow: hidden;\n      ","class","app-carousel carousel-button",3,"ngClass","click",4,"ngFor","ngForOf"],[2,"display","inline","position","relative"],[3,"ngStyle"],[3,"ngTemplateOutlet"],["mat-raised-button","",1,"app-carousel","carousel-button",2,"border-radius","1em","height","0.5em","overflow","hidden",3,"ngClass","click"]],template:function(t,n){1&t&&e.YNc(0,Qi,21,7,"div",0),2&t&&e.Q6J("ngIf",n.currentSlides.length>0)},dependencies:[m.mk,m.sg,m.O5,m.tP,m.PC,C.lW,A.v,k.Hw],styles:["[_nghost-%COMP%]{display:inline-block}"]}),i})();var Ri=s(3324),Bi=s(6387),Li=s(2933);function Hi(i,r){1&i&&e._UZ(0,"div",15)}function $i(i,r){1&i&&e._UZ(0,"div",16)}const Pe=function(){return[]};function zi(i,r){1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"div",6),e.qZA(),e.TgZ(7,"div",7)(8,"div",8)(9,"h1",9),e._uU(10,"_"),e.qZA(),e.YNc(11,Hi,1,0,"div",10),e.qZA(),e.TgZ(12,"app-tag-container",11),e.YNc(13,$i,1,0,"div",12),e.qZA(),e.TgZ(14,"div")(15,"p",13),e._uU(16," _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ "),e.qZA()()()(),e.TgZ(17,"div",14)(18,"div")(19,"p",13),e._uU(20,"_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ "),e.qZA()()()()()()),2&i&&(e.xp6(11),e.Q6J("ngForOf",e.DdM(2,Pe).constructor(2)),e.xp6(2),e.Q6J("ngForOf",e.DdM(3,Pe).constructor(4)))}function Gi(i,r){if(1&i&&e._UZ(0,"img",24),2&i){const t=e.oxw(2);e.Q6J("src",t.bannerSrc,e.LSH)}}function Vi(i,r){if(1&i&&(e.TgZ(0,"div",33)(1,"h4",34)(2,"mat-icon"),e._uU(3),e.qZA(),e._uU(4),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(3),e.Oqu(t.accessOptions[t.project.access].matIcon),e.xp6(1),e.hij(" ",t.accessOptions[t.project.access].name," ")}}function Ki(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.join())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3," Join "),e.qZA()}}function Xi(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(4);return e.KtG(o.requestInvite())}),e.TgZ(1,"mat-icon"),e._uU(2,"mail"),e.qZA(),e._uU(3),e.qZA()}if(2&i){const t=e.oxw(4);e.Q6J("disabled",t.projectOptions.inviteSent),e.xp6(3),e.hij(" ",t.projectOptions.inviteSent?"Invite requested":"Request to Join"," ")}}function Wi(i,r){1&i&&(e.TgZ(0,"button",39)(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e._uU(3," Closed "),e.qZA())}function en(i,r){if(1&i&&(e.YNc(0,Ki,4,0,"button",29),e.YNc(1,Xi,4,2,"button",35),e.YNc(2,Wi,4,0,"button",36)),2&i){const t=e.oxw(3);e.Q6J("ngIf","OPEN"===t.project.access),e.xp6(1),e.Q6J("ngIf","INVITE"===t.project.access),e.xp6(1),e.Q6J("ngIf","CLOSED"===t.project.access)}}function tn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.edit())}),e._uU(1,"Edit Project "),e.qZA()}}function nn(i,r){if(1&i&&(e.TgZ(0,"app-tag",40),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.hij(" ",t," ")}}function on(i,r){if(1&i&&(e.TgZ(0,"div",7)(1,"div",25)(2,"h1",26),e._uU(3),e.qZA(),e.YNc(4,Vi,5,2,"div",27),e.YNc(5,en,3,3,"ng-template",28),e.YNc(6,tn,2,0,"button",29),e.qZA(),e.TgZ(7,"app-tag-container",11)(8,"app-tag",30),e._uU(9),e.qZA(),e.YNc(10,nn,2,1,"app-tag",31),e.qZA(),e.TgZ(11,"p",32),e._uU(12),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.Oqu(t.project.name),e.xp6(1),e.Q6J("ngIf",void 0!==t.accessOptions[t.project.access]),e.xp6(1),e.Q6J("ngIf",t.projectOptions.canJoinProject&&!t.projectOptions.isMember&&t.projectOptions.isAuthenticated),e.xp6(1),e.Q6J("ngIf",t.projectOptions.canUpdateProject),e.xp6(3),e.Oqu(t.getProjectYear()),e.xp6(1),e.Q6J("ngForOf",t.project.tags),e.xp6(2),e.hij(" ",t.project.pitch," ")}}function rn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a.onDownloadLinkClick(o))}),e.TgZ(1,"div",51),e._UZ(2,"ic-icon",52),e._uU(3),e.qZA()()}if(2&i){const t=r.ngIf;e.xp6(2),e.Q6J("icon",t.icon),e.xp6(1),e.hij(" Play ",t.text," ")}}function an(i,r){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,rn,4,2,"button",49),e.qZA()),2&i){const t=r.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.getDownloadLinkStaticData(t))}}function sn(i,r){if(1&i&&e._UZ(0,"img",60),2&i){const t=e.oxw().$implicit,n=e.oxw(5);e.Q6J("src",n.cdn.getFileLink(t),e.LSH)}}function cn(i,r){1&i&&(e.ynx(0),e.YNc(1,sn,1,1,"img",59),e.BQk())}function ln(i,r){if(1&i&&(e.TgZ(0,"div",56)(1,"div",57)(2,"app-carousel",58),e.YNc(3,cn,2,0,"ng-container",44),e.qZA()()()),2&i){const t=e.oxw(4);e.xp6(2),e.Q6J("visibleSlides",1)("autoplay",!0)("autoplayDurationMS",6e3),e.xp6(1),e.Q6J("ngForOf",t.project.galleryImageLinks)}}function dn(i,r){if(1&i&&e._UZ(0,"img",60),2&i){const t=e.oxw().$implicit,n=e.oxw(4);e.Q6J("src",n.cdn.getFileLink(t),e.LSH)}}function mn(i,r){1&i&&(e.ynx(0),e.YNc(1,dn,1,1,"img",59),e.BQk())}function pn(i,r){if(1&i&&(e.TgZ(0,"div",53),e.YNc(1,ln,4,4,"div",54),e.TgZ(2,"app-carousel",55),e.YNc(3,mn,2,0,"ng-container",44),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",!t.breakpointManager.matchedBreakpointOrBelow("MEDIUM_MOBILE")),e.xp6(1),e.Q6J("visibleSlides",t.getVisibleSlides())("autoplay",!0)("autoplayDurationMS",2e3),e.xp6(1),e.Q6J("ngForOf",t.project.galleryImageLinks)}}function un(i,r){if(1&i&&(e._UZ(0,"iframe",61),e.ALo(1,"safe")),2&i){const t=e.oxw(3);e.Q6J("src",e.xi3(1,1,"https://w.soundcloud.com/player/?url="+t.project.soundcloudEmbedSrc+"&color=%23"+t.soundCloudColor+"&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&show_teaser=true","resourceUrl"),e.uOi)}}function _n(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij("Completed at ",t.getDateString(t.project.completedAt),"")}}function hn(i,r){if(1&i&&(e.TgZ(0,"div",14)(1,"div",41),e._UZ(2,"markdown",42),e.qZA(),e.TgZ(3,"div",43),e.YNc(4,an,2,1,"div",44),e.qZA(),e.YNc(5,pn,4,5,"div",45),e.YNc(6,un,2,4,"iframe",46),e.TgZ(7,"div",47)(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA(),e.YNc(12,_n,2,1,"div",0),e.qZA(),e._UZ(13,"mat-divider"),e.TgZ(14,"h2"),e._uU(15,"Members"),e.qZA(),e._UZ(16,"app-project-members-display",48),e.qZA()),2&i){const t=e.oxw(2);let n;e.xp6(2),e.Q6J("data",null!==(n=t.project.description)&&void 0!==n?n:""),e.xp6(2),e.Q6J("ngForOf",t.project.downloadLinks),e.xp6(1),e.Q6J("ngIf",t.project.galleryImageLinks&&t.project.galleryImageLinks.length>0),e.xp6(1),e.Q6J("ngIf",t.project.soundcloudEmbedSrc),e.xp6(3),e.hij("Created at ",t.getDateString(t.project.createdAt),""),e.xp6(2),e.hij("Updated at ",t.getDateString(t.project.updatedAt),""),e.xp6(1),e.Q6J("ngIf",t.project.completedAt),e.xp6(4),e.Q6J("projectMembers",t.getProjectMembers())}}function fn(i,r){1&i&&(e.TgZ(0,"div",62)(1,"h1"),e._uU(2,"This project doesn't exist"),e.qZA(),e.TgZ(3,"p",63),e._uU(4,"Try searching for another"),e.qZA()())}function gn(i,r){if(1&i&&(e.TgZ(0,"div")(1,"div",17),e.YNc(2,Gi,1,1,"img",18),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",19),e._UZ(8,"img",20),e.qZA()(),e.YNc(9,on,13,7,"div",21),e.qZA(),e.YNc(10,hn,17,8,"div",22),e.YNc(11,fn,5,0,"div",23),e.qZA()()()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngStyle",t.getBannerContainerStyle()),e.xp6(1),e.Q6J("ngIf",t.bannerSrc),e.xp6(6),e.Q6J("src",t.cardImageSrc,e.LSH),e.xp6(1),e.Q6J("ngIf",!t.projectOptions.nonExistent),e.xp6(1),e.Q6J("ngIf",!t.projectOptions.nonExistent),e.xp6(1),e.Q6J("ngIf",t.projectOptions.nonExistent)}}let bn=(()=>{class i{constructor(t,n,o,a,l,p,x){this.cdn=t,this.settings=n,this.dialog=o,this.backend=a,this.security=l,this.uiMessageService=p,this.breakpointManager=x,this.edited=new e.vpe,this.project={},this.projectOptions={isMember:!1,manageSomeMembers:!1,nonExistent:!1,canUpdateProject:!1,inviteSent:!1,isAuthenticated:!1,loaded:!1,canDeleteProject:!1,canManageMetadata:!1,canCreateProjectMember:!1,canJoinProject:!1},this.cardImageSrc="https://c.tenor.com/Tu0MCmJ4TJUAAAAC/load-loading.gif",this.bannerSrc="https://c.tenor.com/Tu0MCmJ4TJUAAAAC/load-loading.gif",this.accessOptions=Me.tT,this.soundCloudColor="b3002d",this.monitor=new se.yv,this.setupBannerColorListener=!1,this.downloadLinkStaticData=[{domains:["store.steampowered.com"],text:"on Steam",icon:"steam"},{domains:["itch.io"],text:"on Itch",icon:"itchdotio"}],this.defaultDownloadLinkStaticData={text:"here",icon:"play"}}ngAfterViewChecked(){this.trySetupBannerColorListeners()}ngOnChanges(t){t.project&&(this.bannerSrc=this.project.bannerLink?this.cdn.getFileLink(this.project.bannerLink):"",this.cardImageSrc=this.project.cardImageLink?this.cdn.getFileLink(this.project.cardImageLink):this.settings.General.defaultCardImageSrc)}getProjectMembers(){return this.project.members}trySetupBannerColorListeners(){if(this.setupBannerColorListener)return;const t=document.querySelector("img.project-page.overview-tab.card-image");if(t){t.setAttribute("crossOrigin","Anonymous");const n=new ai.Z;t.addEventListener("load",()=>{const[o,a,l]=n.getColor(t);this.bannerColor=new se.Il(o,a,l)}),this.setupBannerColorListener=!0}}getBannerContainerStyle(){return{...this.bannerColor&&{"background-color":this.bannerColor.hexString()}}}join(){var t=this;return(0,u.Z)(function*(){if(t.monitor.isProcessing)return;t.monitor.addProcess();const n=yield(0,v.z)(t.backend.withAuth().mutate({mutation:b.Ps`
          mutation JoinOpenProject($projectId: ID!) {
            joinOpenProject(projectId: $projectId)
          }
        `,variables:{projectId:t.project.id}}));t.monitor.removeProcess(),!n.errors&&t.uiMessageService.notifyConfirmed("Joined project!")})()}requestInvite(){var t=this;return(0,u.Z)(function*(){if(t.monitor.isProcessing)return;t.monitor.addProcess();const n=yield(0,v.z)(t.backend.withAuth().mutate({mutation:b.Ps`
          mutation NewProjectInvite($input: NewProjectInviteInput!) {
            newProjectInvite(input: $input)
          }
        `,variables:{input:{type:_.PA.Incoming,projectId:t.project.id,userId:t.security.securityContext?.userId}}}));t.monitor.removeProcess(),!n.errors&&t.uiMessageService.notifyConfirmed("Invite sent!")})()}edit(){var t=this;return(0,u.Z)(function*(){(yield(0,v.z)(t.dialog.open(ji,{data:{project:t.project,projectOptions:t.projectOptions},width:"37.5em",maxWidth:"90vw"}).afterClosed()))&&t.edited.emit()})()}getDownloadLinkStaticData(t){return t&&this.downloadLinkStaticData.find(o=>o.domains.some(a=>t.includes(a)))||this.defaultDownloadLinkStaticData}onDownloadLinkClick(t){t&&window.open(t,"_blank")}getDateString(t){return new Date(t).toLocaleString()}getProjectYear(){return new Date(this.project.createdAt).getFullYear()}getVisibleSlides(){return this.breakpointManager.matchedBreakpointOrAbove(Ze.U.Desktop)?3:this.breakpointManager.matchedBreakpointOrAbove(Ze.U.Mobile)?2:1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(w.Ub),e.Y36(wi.g),e.Y36(h.uw),e.Y36(w.v$),e.Y36(w.Il),e.Y36(M.S),e.Y36(w.IW))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-overview-tab"]],inputs:{project:"project",projectOptions:"projectOptions"},outputs:{edited:"edited"},features:[e.TTD],decls:2,vars:2,consts:[[4,"ngIf"],[1,"project-page","overview-tab","banner-container","loading"],[1,"project-page","overview-tab","content-width-padding"],[1,"project-page","overview-tab","content"],["breakable-styles","","prebreak-style","\n          flex-direction: row; \n        ","break-style","\n          flex-direction: column;\n        ","break-on","width < 840",2,"position","relative","display","flex","margin-top","2em","flex-wrap","wrap","width","100%","gap","2em"],[1,"project-page","overview-tab","card-offset"],[1,"project-page","overview-tab","card-image-container","loading"],[2,"flex","1 1 0","display","flex","flex-direction","column","max-width","100%"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","justify-content","left","align-items","flex-start","margin-bottom","16px","gap","0.5em"],[1,"project-page","overview-tab","name","loading",2,"margin-bottom","0px","flex","1"],["style","\n              width: 6em;\n              height: 2em;\n              border-radius: 3em;\n            ","class","loading",4,"ngFor","ngForOf"],[2,"margin-bottom","1em"],["style","\n              width: 5em;\n              height: 1.5em;\n              border-radius: 3em;\n            ","class","loading",4,"ngFor","ngForOf"],[1,"loading",2,"display","inline"],[2,"display","flex","flex-direction","column","gap","2em","margin-top","2em"],[1,"loading",2,"width","6em","height","2em","border-radius","3em"],[1,"loading",2,"width","5em","height","1.5em","border-radius","3em"],[1,"project-page","overview-tab","banner-container",3,"ngStyle"],["class","project-page overview-tab banner",3,"src",4,"ngIf"],[1,"project-page","overview-tab","card-image-container"],[1,"project-page","overview-tab","card-image",3,"src"],["style","\n          flex: 1 1 0;\n          display: flex;\n          flex-direction: column;\n          max-width: 100%;\n        ",4,"ngIf"],["style","\n        display: flex;\n        flex-direction: column;\n        gap: 2em;\n        margin-top: 2em;\n      ",4,"ngIf"],["style","\n        margin-top: 3em;\n      ","class","text-disabled",4,"ngIf"],[1,"project-page","overview-tab","banner",3,"src"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","justify-content","left","align-items","flex-start","margin-bottom","16px","gap","8px"],[1,"project-page","overview-tab","name",2,"margin-bottom","0px","flex","1","min-width","5em","word-break","break-word"],["style","padding: 0.4em 0.5em 0 0.5em;",4,"ngIf"],[3,"ngIf"],["class","project-page overview-tab edit-button","mat-stroked-button","","color","basic","pill","",3,"click",4,"ngIf"],["color","primary"],["color","blank",4,"ngFor","ngForOf"],[1,"project-page","overview-tab","pitch"],[2,"padding","0.4em 0.5em 0 0.5em"],[1,"mat-caption",2,"display","flex","flex-direction","row","gap","1em","margin-bottom","0px","align-items","center"],["class","project-page overview-tab edit-button","mat-stroked-button","","color","basic","pill","",3,"disabled","click",4,"ngIf"],["class","project-page overview-tab edit-button","mat-stroked-button","","color","basic","pill","","disabled","",4,"ngIf"],["mat-stroked-button","","color","basic","pill","",1,"project-page","overview-tab","edit-button",3,"click"],["mat-stroked-button","","color","basic","pill","",1,"project-page","overview-tab","edit-button",3,"disabled","click"],["mat-stroked-button","","color","basic","pill","","disabled","",1,"project-page","overview-tab","edit-button"],["color","blank"],[1,"margin-top:","16px"],["lineNumbers","",3,"data"],[2,"display","flex","flex-direction","row","flex-wrap","wrap","gap","0.5em"],[4,"ngFor","ngForOf"],["style","\n          display: flex;\n          flex-direction: column;\n          gap: 0.5em;\n        ",4,"ngIf"],["width","100%","height","450","scrolling","no","frameborder","no","allow","autoplay",3,"src",4,"ngIf"],[1,"text-disabled",2,"display","flex","flex-direction","row","gap","2em"],[3,"projectMembers"],["mat-flat-button","","pill","","tall-button","","color","primary",3,"click",4,"ngIf"],["mat-flat-button","","pill","","tall-button","","color","primary",3,"click"],[2,"display","flex","align-items","center","justify-content","center","flex-direction","row","gap","0.5em"],["size","1.5em",3,"icon"],[2,"display","flex","flex-direction","column","gap","0.5em"],["style","\n            position: relative;\n            width: 100%;\n            padding-top: 56.25%;\n          ",4,"ngIf"],[2,"width","100%","height","20em",3,"visibleSlides","autoplay","autoplayDurationMS"],[2,"position","relative","width","100%","padding-top","56.25%"],[2,"position","absolute","top","0","left","0","bottom","0","right","0"],[2,"position","relative","width","100%","height","100%",3,"visibleSlides","autoplay","autoplayDurationMS"],["style","position: relative; width: 100%; height: 100%; object-fit: cover;",3,"src",4,"appCarouselItem"],[2,"position","relative","width","100%","height","100%","object-fit","cover",3,"src"],["width","100%","height","450","scrolling","no","frameborder","no","allow","autoplay",3,"src"],[1,"text-disabled",2,"margin-top","3em"],[1,"project-page","overview-tab","no-results-text"]],template:function(t,n){1&t&&(e.YNc(0,zi,21,4,"div",0),e.YNc(1,gn,12,6,"div",0)),2&t&&(e.Q6J("ngIf",!n.projectOptions.loaded),e.xp6(1),e.Q6J("ngIf",n.projectOptions.loaded))},dependencies:[m.sg,m.O5,m.PC,Mi,xe.d,C.lW,A.v,Zi.l,Fi,Se,ye.ar,ke.lF,Ri.m,Bi.Z,k.Hw,Li.l],styles:["[_nghost-%COMP%]{--card-image-size: 18.75em;--card-offset: 6.25em}.banner-container[_ngcontent-%COMP%]{display:block;box-sizing:content-box;height:50vh;width:100%;display:flex;justify-content:center;align-items:center;position:relative}.banner[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover}.card-offset[_ngcontent-%COMP%]{height:calc(var(--card-image-size) - var(--card-offset))}.card-image-container[_ngcontent-%COMP%]{outline-style:solid;outline-width:.5em;display:block;position:relative;bottom:var(--card-offset);height:var(--card-image-size);width:var(--card-image-size);border-radius:1em}.card-image[_ngcontent-%COMP%]{width:inherit;height:100%;object-fit:cover;border-radius:16px}.pitch[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0;overflow:hidden;word-wrap:break-word}.edit-banner-tint[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;background-color:#000;opacity:.5}.edit-profile-picture-tint[_ngcontent-%COMP%]{position:absolute;width:calc(100% - 2 * var(--border-width));height:calc(100% - 2 * var(--border-width));border-radius:50%;background-color:#000;opacity:.5}.main-bg[_ngcontent-%COMP%]{position:relative;box-sizing:border-box}.content-width-padding[_ngcontent-%COMP%]{padding:var(--content-padding);padding-top:0}.socials-button-container[_ngcontent-%COMP%]{box-sizing:border-box;display:grid;align-items:stretch;margin-left:auto;margin-right:auto;gap:8px;grid-template-columns:repeat(auto-fit,minmax(256px,1fr))}.content[_ngcontent-%COMP%]{display:block;margin:auto;padding-top:0;max-width:var(--content-width)}"]}),i})();function vn(i,r){if(1&i&&(e.TgZ(0,"div",5)(1,"h2"),e._uU(2,"Discord"),e.qZA(),e.TgZ(3,"h4",6),e._uU(4,"Category ID"),e.qZA(),e.TgZ(5,"div"),e._uU(6),e.qZA(),e.TgZ(7,"div",7)(8,"div"),e._uU(9),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.qZA()()()),2&i){const t=e.oxw();e.xp6(6),e.Oqu(t.project.discordConfig.categoryId),e.xp6(3),e.hij("Created at ",t.getDateString(t.project.discordConfig.createdAt),""),e.xp6(2),e.hij("Updated at ",t.getDateString(t.project.discordConfig.updatedAt),"")}}let xn=(()=>{class i{constructor(t,n,o){this.uiMessageService=t,this.backend=n,this.router=o,this.edited=new e.vpe,this.project={},this.projectOptions={isMember:!1,manageSomeMembers:!1,nonExistent:!1,canUpdateProject:!1,inviteSent:!1,isAuthenticated:!1,loaded:!1,canDeleteProject:!1,canManageMetadata:!1,canCreateProjectMember:!1,canJoinProject:!1},this.monitor=new Y.y}ngOnInit(){}deleteProject(){var t=this;return(0,u.Z)(function*(){if(!(yield(0,v.z)(t.uiMessageService.confirmDialog(`Are you sure you want to delete the project "${t.project.name}"? There's no going back!`))))return;t.monitor.addProcess();const o=yield(0,v.z)(t.backend.withAuth().mutate({mutation:b.Ps`
          mutation DeleteProject($id: ID!) {
            deleteProject(id: $id)
          }
        `,variables:{id:t.project.id}}));t.monitor.removeProcess(),!o.errors&&t.router.navigateByUrl("/projects")})()}getDeleteProjectTooltip(){return this.projectOptions.canDeleteProject?this.project.discordConfig?"Cannot delete project with discord presence! Please archive the project's discord category first.":"":"Please ask an e-board officer if you'd like to delete a project."}getDateString(t){return new Date(t).toLocaleString()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M.S),e.Y36(N.v),e.Y36(L.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings-tab"]],inputs:{project:"project",projectOptions:"projectOptions"},outputs:{edited:"edited"},decls:11,vars:3,consts:[["full-page",""],[2,"display","flex","flex-direction","column","gap","2em"],["style","margin-bottom: 2em;",4,"ngIf"],[2,"width","min-content",3,"matTooltip"],["mat-flat-button","","pill","","tall-button","","color","primary",2,"max-width","20em",3,"disabled","click"],[2,"margin-bottom","2em"],[2,"margin-bottom","0.1em"],[1,"text-disabled",2,"display","flex","flex-direction","row","gap","2em","margin-top","1em"]],template:function(t,n){1&t&&(e.TgZ(0,"app-bg-container",0)(1,"div",1)(2,"div"),e.YNc(3,vn,12,3,"div",2),e.TgZ(4,"h2"),e._uU(5,"Danger Zone"),e.qZA(),e.TgZ(6,"div",3)(7,"button",4),e.NdJ("click",function(){return n.deleteProject()}),e.TgZ(8,"mat-icon"),e._uU(9,"delete"),e.qZA(),e._uU(10," Delete Project "),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",n.project.discordConfig),e.xp6(3),e.Q6J("matTooltip",n.getDeleteProjectTooltip()),e.xp6(1),e.Q6J("disabled",!n.projectOptions.canDeleteProject||n.monitor.isProcessing||n.project.discordConfig))},dependencies:[m.O5,k.Hw,C.lW,z.gM,A.v,Ae.h]}),i})();function yn(i,r){1&i&&(e.TgZ(0,"div",6),e._uU(1,"Overview"),e.qZA())}function kn(i,r){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove_red_eye"),e.qZA(),e.YNc(2,yn,2,0,"div",5)),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE","key"))}}function Cn(i,r){1&i&&(e.TgZ(0,"div",6),e._uU(1,"Members"),e.qZA())}function Tn(i,r){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"person"),e.qZA(),e.YNc(2,Cn,2,0,"div",5)),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function jn(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,Tn,3,1,"ng-template",2),e.TgZ(2,"app-members-tab",3),e.NdJ("edited",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fetchData(!0))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("project",t.project)("projectOptions",t.projectOptions)}}function wn(i,r){1&i&&(e.TgZ(0,"div",6),e._uU(1,"Settings"),e.qZA())}function In(i,r){if(1&i&&(e.TgZ(0,"mat-icon"),e._uU(1,"settings"),e.qZA(),e.YNc(2,wn,2,0,"div",5)),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("ngIf",t.breakpointManager.matchedBreakpointOrAbove("MOBILE"))}}function An(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"mat-tab"),e.YNc(1,In,3,1,"ng-template",2),e.TgZ(2,"app-settings-tab",3),e.NdJ("edited",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.fetchData(!0))}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("project",t.project)("projectOptions",t.projectOptions)}}const Mn=[{path:"",component:(()=>{class i{constructor(t,n,o,a,l,p){this.breakpointManager=t,this.activatedRoute=n,this.backend=o,this.security=a,this.authService=l,this.uiMessageService=p,this.project={},this.projectOptions={isMember:!1,manageSomeMembers:!1,nonExistent:!1,canUpdateProject:!1,inviteSent:!1,isAuthenticated:!1,loaded:!1,canDeleteProject:!1,canManageMetadata:!1,canCreateProjectMember:!1,canJoinProject:!1},this.projectId="",this.onDestroy$=new Q.x}ngOnInit(){var t=this;this.activatedRoute.paramMap.pipe((0,D.R)(this.onDestroy$)).subscribe(function(){var n=(0,u.Z)(function*(o){t.projectId=o.get("projectId"),yield t.security.waitUntilReady(),yield t.fetchData(!0),t.setupSubscribers()});return function(o){return n.apply(this,arguments)}}())}ngOnDestroy(){this.onDestroy$.next(),this.onDestroy$.complete()}fetchData(t=!1){var n=this;return(0,u.Z)(function*(){yield n.security.fetchData(),n.projectOptions.isAuthenticated=null!=n.security.securityContext?.userId;const o={projectId:n.projectId},a=n.security.makePermCalc().withDomain(o);let l,p;if(n.security.securityContext?.userId){let I=n.security.getOpDomainsFromPermission(_.y3.ManageProjectInvites);l=(0,v.z)(n.backend.withAuth().withOpDomains(I).query({query:b.Ps`
              query FetchProjectPageInvites($filter: ProjectInviteFilterInput) {
                projectInvites(filter: $filter) {
                  id
                  type
                  user {
                    id
                    displayName
                    username
                    avatarLink
                  }
                }
              }
            `,variables:{filter:{projectId:{eq:n.projectId}}},...t&&{fetchPolicy:"no-cache"}}))}a.hasPermission(_.y3.ManageProjectDiscord)&&(p=(0,v.z)(n.backend.withAuth().withOpDomain({projectId:n.projectId}).query({query:b.Ps`
              query FetchProjectPageDiscord {
                projectDiscordConfigs {
                  id
                  createdAt
                  updatedAt
                  categoryId
                }
              }
            `})));const x=(0,v.z)(n.backend.withAuth().query({query:b.Ps`
          query FetchProjectPageProject($filter: ProjectFilterInput) {
            projects(filter: $filter) {
              id
              cardImageLink
              bannerLink
              completedAt
              createdAt
              updatedAt
              name
              access
              pitch
              description
              tags
              galleryImageLinks
              soundcloudEmbedSrc
              downloadLinks
              members {
                id
                user {
                  id
                  avatarLink
                  bannerLink
                  bio
                  classYear
                  netId
                  username
                  displayName
                }
                contributions
                roles {
                  roleCode
                }
              }
            }
          }
        `,variables:{filter:{id:{eq:n.projectId}}},...t&&{fetchPolicy:"no-cache"}})),[T,Z,U]=yield Promise.all([p,l,x]);if(0==U.data.projects.length)return n.projectOptions.nonExistent=!0,void(n.projectOptions.loaded=!0);n.projectOptions.canUpdateProject=a.hasPermission(_.y3.UpdateProject),n.projectOptions.canDeleteProject=a.hasPermission(_.y3.DeleteProject),n.projectOptions.canManageMetadata=a.hasPermission(_.y3.ManageMetadata),n.projectOptions.canCreateProjectMember=a.hasPermission(_.y3.CreateProjectMember),n.projectOptions.canJoinProject=a.hasPermission(_.y3.JoinProject),n.project=(0,j.I8)(U.data.projects[0]),Z&&!Z.error&&(n.project.invites=Z.data.projectInvites),T&&!T.error&&(n.project.discordConfig=T.data.projectDiscordConfigs[0]),n.projectOptions.manageSomeMembers=a.withDomains(n.project.members?.map(I=>({projectMemberId:I?.id??""}))??[]).hasPermission(_.y3.ManageProjectMember),n.projectOptions.inviteSent=n.project.invites?.some(I=>I?.type===_.PA.Incoming&&I?.user?.id===n.security.securityContext?.userId)??!1,n.projectOptions.canUpdateProject=a.hasPermission(_.y3.UpdateProject),n.authService.authenticated&&(n.projectOptions.isMember=n.project.members?.some(I=>I?.user?.id===n.authService.getPayload()?.user.id)??!1),n.projectOptions.loaded=!0})()}setupSubscribers(){var t=this;if(!this.security.securityContext?.userId)return;let n={userId:this.security.securityContext.userId,projectId:this.projectId};var o;this.projectOptions.canUpdateProject&&(n={projectId:this.projectId}),this.backend.subscribe({query:b.Ps`
          subscription OnProjectInviteCreated($filter: ProjectInviteSubscriptionFilter) {
            projectInviteCreated(filter: $filter) {
              id
            }
          }
        `,variables:{filter:n}}).pipe((0,D.R)(this.onDestroy$)).subscribe({next:o=>{this.projectOptions.canUpdateProject&&this.uiMessageService.notifyInfo("New invite!"),this.fetchData(!0)}}),this.backend.subscribe({query:b.Ps`
          subscription OnProjectInviteDeleted($filter: ProjectInviteSubscriptionFilter) {
            projectInviteDeleted(filter: $filter) {
              userId
            }
          }
        `,variables:{filter:n}}).pipe((0,D.R)(this.onDestroy$)).subscribe({next:(o=(0,u.Z)(function*(a){const l=a.data?.projectInviteDeleted;yield t.fetchData(!0),t.project.members?.some(p=>p?.user?.id===l?.userId)?t.uiMessageService.notifyInfo("Invite accepted!"):t.uiMessageService.notifyInfo("Invite rejected!")}),function(l){return o.apply(this,arguments)})}),this.backend.subscribe({query:b.Ps`
          subscription OnProjectMemberDeleted($filter: ProjectMemberSubscriptionFilter) {
            projectMemberDeleted(filter: $filter) {
              userId
            }
          }
        `,variables:{filter:{projectId:this.projectId}}}).pipe((0,D.R)(this.onDestroy$)).subscribe({next:function(){var o=(0,u.Z)(function*(a){t.uiMessageService.notifyInfo(a.data?.projectMemberDeleted?.userId===t.security.securityContext?.userId?"You were kicked!":"Member kicked!"),yield t.fetchData(!0)});return function(l){return o.apply(this,arguments)}}()}),this.backend.subscribe({query:b.Ps`
          subscription OnProjectMemberCreated($filter: ProjectMemberSubscriptionFilter) {
            projectMemberCreated(filter: $filter) {
              id
            }
          }
        `,variables:{filter:{projectId:this.projectId}}}).pipe((0,D.R)(this.onDestroy$)).subscribe({next:function(){var o=(0,u.Z)(function*(a){t.projectOptions.canUpdateProject&&t.uiMessageService.notifyInfo("Member added!"),yield t.fetchData(!0)});return function(l){return o.apply(this,arguments)}}()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ce.I),e.Y36(L.gz),e.Y36(N.v),e.Y36(mt.I),e.Y36(pt.e),e.Y36(M.S))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-project-page"]],decls:7,vars:5,consts:[[1,"app-project-page","main-bg"],["mat-align-tabs","center","backgroundColor","primary",3,"selectedIndex"],["mat-tab-label",""],[3,"project","projectOptions","edited"],[4,"ngIf"],["style","margin-left: 0.5em;",4,"ngIf"],[2,"margin-left","0.5em"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab"),e.YNc(3,kn,3,1,"ng-template",2),e.TgZ(4,"app-overview-tab",3),e.NdJ("edited",function(){return n.fetchData(!0)}),e.qZA()(),e.YNc(5,jn,3,2,"mat-tab",4),e.YNc(6,An,3,2,"mat-tab",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("selectedIndex",0),e.xp6(3),e.Q6J("project",n.project)("projectOptions",n.projectOptions),e.xp6(1),e.Q6J("ngIf",n.projectOptions.manageSomeMembers),e.xp6(1),e.Q6J("ngIf",n.projectOptions.canUpdateProject))},dependencies:[m.O5,ri,bn,xn,k.Hw,S.SP,S.uD,S.uX]}),i})()}];let Zn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[L.Bz.forChild(Mn),m.ez,He,lt,dt,k.Ps,S.Nh]}),i})()}}]);