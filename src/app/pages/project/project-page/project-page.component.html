<div class="app-project-page main-bg">
  <div *ngIf="isEditing; then editingPage; else displayPage"></div>
  <ng-template #editingPage>
    <form [formGroup]="form" enctype="multipart/form-data">
      <div class="app-project-page banner-container">
        <app-image-upload [imageSrc]="getFileLink(projectEdits.bannerLink)" [fileSizeLimitMB]="5"></app-image-upload>
      </div>
      <div class="app-project-page content-width-padding">
        <div class="app-project-page content">
          <div breakable-styles 
            style="
              position: relative;
              display: flex; 
              margin-top: 2em; 
              flex-wrap: wrap; 
              width: 100%;
              gap: 2em;
            "
            prebreak-style="
              flex-direction: row; 
            "
            break-style="
              flex-direction: column;
            "
            break-on="width < 840"
          >
            <div class="app-project-page card-offset">
              <div class="app-project-page card-image-container">
                <img [src]="getFileLink(project.cardImageLink)" class="app-project-page card-image">
              </div>
            </div>
            <div style="
              flex: 1 1 0;
              display: flex;
              flex-direction: column;
              max-width: 100%;
            ">
              <div style="
                display: flex;
                flex-direction: row;
                flex-wrap: wrap;
                justify-content: left;
                align-items: center;
                margin-bottom: 16px;
                gap: 8px;
              ">
                <h1 class="app-project-page name" style="
                  margin-bottom: 0px;
                  flex: 1;
                ">{{ project.name }}</h1>
                <button class="app-project-page edit-profile-button" mat-stroked-button color="basic" pill (click)="edit()" style="
                  padding: 4px 24px 4px 24px;
                ">Edit Project
                </button>
              </div>
              <p class="app-project-page pitch">
                {{ project.pitch }}
              </p>
            </div>
          </div>
          <div class="app-project-page core-content">
            <div class="margin-top: 16px">
              <markdown katex lineNumbers *ngIf="isMarkdownReady">
                {{ project.description }}
              </markdown>
            </div>
            <div *ngIf="nonExistent">
              <h1>This account doesn't exist</h1>
              <p class="app-project-page no-results-text">Try searching for another</p>
            </div>
            <mat-divider></mat-divider>
            <h2>Members</h2>
            <app-project-members-display [projectMembers]="getProjectMembers()"></app-project-members-display>
          </div>
        </div>
      </div>
    </form>
  </ng-template>
  <ng-template #displayPage>
    <div class="app-project-page banner-container">
      <img [src]="getFileLink(project.bannerLink ?? '')" class="app-project-page banner">
    </div>
    <div class="app-project-page content-width-padding">
      <div class="app-project-page content">
        <div breakable-styles 
          style="
            position: relative;
            display: flex; 
            margin-top: 2em; 
            flex-wrap: wrap; 
            width: 100%;
            gap: 2em;
          "
          prebreak-style="
            flex-direction: row; 
          "
          break-style="
            flex-direction: column;
          "
          break-on="width < 840"
        >
          <div class="app-project-page card-offset">
            <div class="app-project-page card-image-container">
              <img [src]="getFileLink(project.cardImageLink ?? '')" class="app-project-page card-image">
            </div>
          </div>
          <div style="
            flex: 1 1 0;
            display: flex;
            flex-direction: column;
            max-width: 100%;
          ">
            <div style="
              display: flex;
              flex-direction: row;
              flex-wrap: wrap;
              justify-content: left;
              align-items: center;
              margin-bottom: 16px;
              gap: 8px;
            ">
              <h1 class="app-project-page name" style="
                margin-bottom: 0px;
                flex: 1;
              ">{{ project.name }}</h1>
              <button class="app-project-page edit-profile-button" mat-stroked-button color="basic" pill (click)="edit()" style="
                padding: 4px 24px 4px 24px;
              ">Edit Project
              </button>
            </div>
            <p class="app-project-page pitch">
              {{ project.pitch }}
            </p>
          </div>
        </div>
        <div class="app-project-page core-content">
          <div class="margin-top: 16px">
            <markdown katex lineNumbers *ngIf="isMarkdownReady">
              {{ project.description }}
            </markdown>
          </div>
          <div *ngIf="nonExistent">
            <h1>This account doesn't exist</h1>
            <p class="app-project-page no-results-text">Try searching for another</p>
          </div>
          <mat-divider></mat-divider>
          <h2>Members</h2>
          <app-project-members-display [projectMembers]="getProjectMembers()"></app-project-members-display>
        </div>
      </div>
    </div>
  </ng-template>
</div>